(()=>{var Ga=Object.create;var zn=Object.defineProperty;var Ia=Object.getOwnPropertyDescriptor;var Na=Object.getOwnPropertyNames;var Ta=Object.getPrototypeOf,Ra=Object.prototype.hasOwnProperty;var ie=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports),Oa=(n,t)=>{for(var e in t)zn(n,e,{get:t[e],enumerable:!0})},Ma=(n,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let u of Na(t))!Ra.call(n,u)&&u!==e&&zn(n,u,{get:()=>t[u],enumerable:!(i=Ia(t,u))||i.enumerable});return n};var re=(n,t,e)=>(e=n!=null?Ga(Ta(n)):{},Ma(t||!n||!n.__esModule?zn(e,"default",{value:n,enumerable:!0}):e,n));var se=ie((Yl,Xi)=>{Xi.exports=globalThis.msagl});var po=ie(Zr=>{"use strict";Object.defineProperty(Zr,"__esModule",{value:!0});var Qn=class{constructor(...t){this._head=this._tail=null,this._length=0,t.length>0&&t.forEach(e=>{this.append(e)})}*iterator(){let t=this._head;for(;t;)yield t.value,t=t.next}[Symbol.iterator](){return this.iterator()}get head(){return this._head?this._head.value:null}get tail(){return this._tail?this._tail.value:null}get length(){return this._length}insert(t,e,i=!1){if(i&&this.isDuplicate(t))return!1;let u=new Tt(t),a=this._head;if(a)for(;;){if(a.value===e)return u.next=a.next,u.prev=a,a.next=u,u.next?u.next.prev=u:this._tail=u,this._length++,!0;if(a.next)a=a.next;else return!1}else return!1}append(t,e=!1){if(e&&this.isDuplicate(t))return!1;let i=new Tt(t);return this._tail?(this._tail.next=i,i.prev=this._tail,this._tail=i):this._head=this._tail=i,this._length++,!0}prepend(t,e=!1){if(e&&this.isDuplicate(t))return!1;let i=new Tt(t);return this._head?(i.next=this._head,this._head.prev=i,this._head=i):this._head=this._tail=i,this._length++,!0}remove(t){let e=this._head;if(!!e){if(e.value===t)return this._head=e.next,this._head.prev=null,e.next=e.prev=null,this._length--,e.value;for(;;){if(e.value===t)return e.next?(e.prev.next=e.next,e.next.prev=e.prev,e.next=e.prev=null):(e.prev.next=null,this._tail=e.prev,e.next=e.prev=null),this._length--,e.value;if(e.next)e=e.next;else return}}}removeHead(){let t=this._head;if(!!t)return this._head.next?(this._head.next.prev=null,this._head=this._head.next,t.next=t.prev=null):(this._head=null,this._tail=null),this._length--,t.value}removeTail(){let t=this._tail;if(!!t)return this._tail.prev?(this._tail.prev.next=null,this._tail=this._tail.prev,t.next=t.prev=null):(this._head=null,this._tail=null),this._length--,t.value}first(t){let e=this.iterator(),i=[],u=Math.min(t,this.length);for(let a=0;a<u;a++){let l=e.next();i.push(l.value)}return i}toArray(){return[...this]}isDuplicate(t){return new Set(this.toArray()).has(t)}};Zr.LinkedList=Qn;var Tt=class{constructor(t){this.value=t,this.next=null,this.prev=null}};Zr.LinkedListItem=Tt});var Eo=ie(ti=>{"use strict";Object.defineProperty(ti,"__esModule",{value:!0});var ns=po(),ei=class extends ns.LinkedList{constructor(...t){super(...t)}get front(){return this.head}enqueue(t){this.append(t)}dequeue(){return this.removeHead()}};ti.Queue=ei});var Fo=ie((Zd,Do)=>{"use strict";function ls(n,t){function e(){this.constructor=n}e.prototype=t.prototype,n.prototype=new e}function gt(n,t,e,i){this.message=n,this.expected=t,this.found=e,this.location=i,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,gt)}ls(gt,Error);gt.buildMessage=function(n,t){var e={literal:function(p){return'"'+u(p.text)+'"'},class:function(p){var w="",C;for(C=0;C<p.parts.length;C++)w+=p.parts[C]instanceof Array?a(p.parts[C][0])+"-"+a(p.parts[C][1]):a(p.parts[C]);return"["+(p.inverted?"^":"")+w+"]"},any:function(p){return"any character"},end:function(p){return"end of input"},other:function(p){return p.description}};function i(p){return p.charCodeAt(0).toString(16).toUpperCase()}function u(p){return p.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(w){return"\\x0"+i(w)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(w){return"\\x"+i(w)})}function a(p){return p.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(w){return"\\x0"+i(w)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(w){return"\\x"+i(w)})}function l(p){return e[p.type](p)}function h(p){var w=new Array(p.length),C,x;for(C=0;C<p.length;C++)w[C]=l(p[C]);if(w.sort(),w.length>0){for(C=1,x=1;C<w.length;C++)w[C-1]!==w[C]&&(w[x]=w[C],x++);w.length=x}switch(w.length){case 1:return w[0];case 2:return w[0]+" or "+w[1];default:return w.slice(0,-1).join(", ")+", or "+w[w.length-1]}}function f(p){return p?'"'+u(p)+'"':"end of input"}return"Expected "+h(n)+" but "+f(t)+" found."};function cs(n,t){t=t!==void 0?t:{};var e={},i={start:Oi},u=Oi,a="strict",l=M("strict",!0),h="graph",f=M("graph",!0),p="digraph",w=M("digraph",!0),C="{",x=M("{",!1),N="}",W=M("}",!1),J=function(o,c,E,m){m===null&&(m=[]);var v={type:c.toLowerCase(),children:m};return o&&(v.strict=!0),E&&(v.id=E),v},ue=";",$=M(";",!1),be=function(o,c){return c},R=function(o,c){return[o].concat(c)},Ne="=",Ke=M("=",!1),Fe=function(o,c){return{type:"attr_stmt",target:"graph",attr_list:[{type:"attr",id:o,eq:c}]}},ge="node",Se=M("node",!0),le="edge",ce=M("edge",!0),Te=function(o,c){return{type:"attr_stmt",target:o,attr_list:c}},ae="[",he=M("[",!1),jt="]",$t=M("]",!1),Ut=function(o,c){return(o||[]).concat(c||[])},fe=function(o,c){return c},qt=",",it=M(",",!1),Et=function(o,c,E){return[{type:"attr",id:o,eq:c}].concat(E||[])},At=function(o,c,E){var m=[o];return m=m.concat(c.map(function(v){return v.id})),{type:"edge_stmt",edge_list:m,attr_list:E||[]}},ot="->",Dr=M("->",!1),zt="--",Fr=M("--",!1),hn=function(o,c,E){return[{type:"edgeRHS",edgeop:o,id:c}].concat(E||[])},gn=function(o,c){return{type:"node_stmt",node_id:o,attr_list:c||[]}},fn=function(o,c){return c?{type:"node_id",id:o,port:c}:{type:"node_id",id:o}},mn=ke("port"),Ce=":",Kt=M(":",!1),pn=function(o,c){return c},En=function(o,c){return{type:"port",id:o,compass_pt:c||null}},An=function(o){return{type:"port",compass_pt:o||null}},yn="subgraph",bn=M("subgraph",!0),wn=function(o){return o?{type:"subgraph",id:o}:{type:"subgraph"}},vn=function(o,c){return o=o||{type:"subgraph"},o.children=c||[],o},Cn="n",Dn=M("n",!1),Sr="ne",_t=M("ne",!1),Br="e",Ht=M("e",!1),Jt="se",Fn=M("se",!1),Sn="s",Zt=M("s",!1),Yt="sw",yt=M("sw",!1),Bn="w",kn=M("w",!1),Re="nw",xn=M("nw",!1),Pn=ke("UNICODE_STRING"),kr=function(o,c){return o+c.join("")},xr=function(o,c){return o+c},Gn="$",In=M("$",!1),Pr="_",Nn=M("_",!1),Gr=ke("NUMBER"),Tn="-",Rn=M("-",!1),Ir=".",Xt=M(".",!1),Oe=/^[0-9]/,we=Ee([["0","9"]],!1,!1),Nr=function(o){return parseFloat(Ni())},bt=function(o){return{type:"id",value:o.slice(1,o.length-1),html:!0}},wt="<",vt=M("<",!1),Ct=">",Dt=M(">",!1),Tr=function(o){return"<"+o.join("")+">"},me=oa(),Me=function(o){return o},Rr=function(o){return o.join("")},pe='"',_e=M('"',!1),Or=function(o){return o.join("")},ut=function(){return Ni()},Le="\\",We=M("\\",!1),Mr=function(o){return o[1]==='"'?'"':o[0]+o[1]},Qt=function(){return""},er=/^[\n\r\u2028\u2029]/,On=Ee([`
`,"\r","\u2028","\u2029"],!1,!1),He=ke("end of line"),A=`
`,B=M(`
`,!1),k=`\r
`,P=M(`\r
`,!1),j="\r",U=M("\r",!1),q="\u2028",ne=M("\u2028",!1),Je="\u2029",Ve=M("\u2029",!1),Lr=/^[^"\\\0-\x1F\x7F]/,Wr=Ee(['"',"\\",["\0",""],"\x7F"],!0,!1),Di='\\"',Iu=M('\\"',!1),Nu=function(){return'"'},Tu=function(){return"\\"},Ru=ke("COMMENT"),Ou=ke("BLOCK_COMMENT"),Fi="/*",Mu=M("/*",!1),Ft="*/",Mn=M("*/",!1),Si=function(o){return o},Lu=function(o){return o.join("")},Wu=ke("C_COMMENT"),Bi="//",Vu=M("//",!1),St=/^[\n]/,Bt=Ee([`
`],!1,!1),ki=function(o){return o.join("")},ju=ke("MACRO_COMMENT"),$u="#",Uu=M("#",!1),qu=ke("WHITESPACE"),xi=/^[\n\r]/,Pi=Ee([`
`,"\r"],!1,!1),Gi=/^[ \t]/,Ii=Ee([" ","	"],!1,!1),zu=/^[a-z\xB5\xDF-\xF6\xF8-\xFF\u0101\u0103\u0105\u0107\u0109\u010B\u010D\u010F\u0111\u0113\u0115\u0117\u0119\u011B\u011D\u011F\u0121\u0123\u0125\u0127\u0129\u012B\u012D\u012F\u0131\u0133\u0135\u0137-\u0138\u013A\u013C\u013E\u0140\u0142\u0144\u0146\u0148-\u0149\u014B\u014D\u014F\u0151\u0153\u0155\u0157\u0159\u015B\u015D\u015F\u0161\u0163\u0165\u0167\u0169\u016B\u016D\u016F\u0171\u0173\u0175\u0177\u017A\u017C\u017E-\u0180\u0183\u0185\u0188\u018C-\u018D\u0192\u0195\u0199-\u019B\u019E\u01A1\u01A3\u01A5\u01A8\u01AA-\u01AB\u01AD\u01B0\u01B4\u01B6\u01B9-\u01BA\u01BD-\u01BF\u01C6\u01C9\u01CC\u01CE\u01D0\u01D2\u01D4\u01D6\u01D8\u01DA\u01DC-\u01DD\u01DF\u01E1\u01E3\u01E5\u01E7\u01E9\u01EB\u01ED\u01EF-\u01F0\u01F3\u01F5\u01F9\u01FB\u01FD\u01FF\u0201\u0203\u0205\u0207\u0209\u020B\u020D\u020F\u0211\u0213\u0215\u0217\u0219\u021B\u021D\u021F\u0221\u0223\u0225\u0227\u0229\u022B\u022D\u022F\u0231\u0233-\u0239\u023C\u023F-\u0240\u0242\u0247\u0249\u024B\u024D\u024F-\u0293\u0295-\u02AF\u0371\u0373\u0377\u037B-\u037D\u0390\u03AC-\u03CE\u03D0-\u03D1\u03D5-\u03D7\u03D9\u03DB\u03DD\u03DF\u03E1\u03E3\u03E5\u03E7\u03E9\u03EB\u03ED\u03EF-\u03F3\u03F5\u03F8\u03FB-\u03FC\u0430-\u045F\u0461\u0463\u0465\u0467\u0469\u046B\u046D\u046F\u0471\u0473\u0475\u0477\u0479\u047B\u047D\u047F\u0481\u048B\u048D\u048F\u0491\u0493\u0495\u0497\u0499\u049B\u049D\u049F\u04A1\u04A3\u04A5\u04A7\u04A9\u04AB\u04AD\u04AF\u04B1\u04B3\u04B5\u04B7\u04B9\u04BB\u04BD\u04BF\u04C2\u04C4\u04C6\u04C8\u04CA\u04CC\u04CE-\u04CF\u04D1\u04D3\u04D5\u04D7\u04D9\u04DB\u04DD\u04DF\u04E1\u04E3\u04E5\u04E7\u04E9\u04EB\u04ED\u04EF\u04F1\u04F3\u04F5\u04F7\u04F9\u04FB\u04FD\u04FF\u0501\u0503\u0505\u0507\u0509\u050B\u050D\u050F\u0511\u0513\u0515\u0517\u0519\u051B\u051D\u051F\u0521\u0523\u0525\u0527\u0561-\u0587\u1D00-\u1D2B\u1D6B-\u1D77\u1D79-\u1D9A\u1E01\u1E03\u1E05\u1E07\u1E09\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1E1F\u1E21\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E2D\u1E2F\u1E31\u1E33\u1E35\u1E37\u1E39\u1E3B\u1E3D\u1E3F\u1E41\u1E43\u1E45\u1E47\u1E49\u1E4B\u1E4D\u1E4F\u1E51\u1E53\u1E55\u1E57\u1E59\u1E5B\u1E5D\u1E5F\u1E61\u1E63\u1E65\u1E67\u1E69\u1E6B\u1E6D\u1E6F\u1E71\u1E73\u1E75\u1E77\u1E79\u1E7B\u1E7D\u1E7F\u1E81\u1E83\u1E85\u1E87\u1E89\u1E8B\u1E8D\u1E8F\u1E91\u1E93\u1E95-\u1E9D\u1E9F\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u1EC9\u1ECB\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u1EF3\u1EF5\u1EF7\u1EF9\u1EFB\u1EFD\u1EFF-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB0-\u1FB4\u1FB6-\u1FB7\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FC7\u1FD0-\u1FD3\u1FD6-\u1FD7\u1FE0-\u1FE7\u1FF2-\u1FF4\u1FF6-\u1FF7\u210A\u210E-\u210F\u2113\u212F\u2134\u2139\u213C-\u213D\u2146-\u2149\u214E\u2184\u2C30-\u2C5E\u2C61\u2C65-\u2C66\u2C68\u2C6A\u2C6C\u2C71\u2C73-\u2C74\u2C76-\u2C7B\u2C81\u2C83\u2C85\u2C87\u2C89\u2C8B\u2C8D\u2C8F\u2C91\u2C93\u2C95\u2C97\u2C99\u2C9B\u2C9D\u2C9F\u2CA1\u2CA3\u2CA5\u2CA7\u2CA9\u2CAB\u2CAD\u2CAF\u2CB1\u2CB3\u2CB5\u2CB7\u2CB9\u2CBB\u2CBD\u2CBF\u2CC1\u2CC3\u2CC5\u2CC7\u2CC9\u2CCB\u2CCD\u2CCF\u2CD1\u2CD3\u2CD5\u2CD7\u2CD9\u2CDB\u2CDD\u2CDF\u2CE1\u2CE3-\u2CE4\u2CEC\u2CEE\u2CF3\u2D00-\u2D25\u2D27\u2D2D\uA641\uA643\uA645\uA647\uA649\uA64B\uA64D\uA64F\uA651\uA653\uA655\uA657\uA659\uA65B\uA65D\uA65F\uA661\uA663\uA665\uA667\uA669\uA66B\uA66D\uA681\uA683\uA685\uA687\uA689\uA68B\uA68D\uA68F\uA691\uA693\uA695\uA697\uA723\uA725\uA727\uA729\uA72B\uA72D\uA72F-\uA731\uA733\uA735\uA737\uA739\uA73B\uA73D\uA73F\uA741\uA743\uA745\uA747\uA749\uA74B\uA74D\uA74F\uA751\uA753\uA755\uA757\uA759\uA75B\uA75D\uA75F\uA761\uA763\uA765\uA767\uA769\uA76B\uA76D\uA76F\uA771-\uA778\uA77A\uA77C\uA77F\uA781\uA783\uA785\uA787\uA78C\uA78E\uA791\uA793\uA7A1\uA7A3\uA7A5\uA7A7\uA7A9\uA7FA\uFB00-\uFB06\uFB13-\uFB17\uFF41-\uFF5A]/,Ku=Ee([["a","z"],"\xB5",["\xDF","\xF6"],["\xF8","\xFF"],"\u0101","\u0103","\u0105","\u0107","\u0109","\u010B","\u010D","\u010F","\u0111","\u0113","\u0115","\u0117","\u0119","\u011B","\u011D","\u011F","\u0121","\u0123","\u0125","\u0127","\u0129","\u012B","\u012D","\u012F","\u0131","\u0133","\u0135",["\u0137","\u0138"],"\u013A","\u013C","\u013E","\u0140","\u0142","\u0144","\u0146",["\u0148","\u0149"],"\u014B","\u014D","\u014F","\u0151","\u0153","\u0155","\u0157","\u0159","\u015B","\u015D","\u015F","\u0161","\u0163","\u0165","\u0167","\u0169","\u016B","\u016D","\u016F","\u0171","\u0173","\u0175","\u0177","\u017A","\u017C",["\u017E","\u0180"],"\u0183","\u0185","\u0188",["\u018C","\u018D"],"\u0192","\u0195",["\u0199","\u019B"],"\u019E","\u01A1","\u01A3","\u01A5","\u01A8",["\u01AA","\u01AB"],"\u01AD","\u01B0","\u01B4","\u01B6",["\u01B9","\u01BA"],["\u01BD","\u01BF"],"\u01C6","\u01C9","\u01CC","\u01CE","\u01D0","\u01D2","\u01D4","\u01D6","\u01D8","\u01DA",["\u01DC","\u01DD"],"\u01DF","\u01E1","\u01E3","\u01E5","\u01E7","\u01E9","\u01EB","\u01ED",["\u01EF","\u01F0"],"\u01F3","\u01F5","\u01F9","\u01FB","\u01FD","\u01FF","\u0201","\u0203","\u0205","\u0207","\u0209","\u020B","\u020D","\u020F","\u0211","\u0213","\u0215","\u0217","\u0219","\u021B","\u021D","\u021F","\u0221","\u0223","\u0225","\u0227","\u0229","\u022B","\u022D","\u022F","\u0231",["\u0233","\u0239"],"\u023C",["\u023F","\u0240"],"\u0242","\u0247","\u0249","\u024B","\u024D",["\u024F","\u0293"],["\u0295","\u02AF"],"\u0371","\u0373","\u0377",["\u037B","\u037D"],"\u0390",["\u03AC","\u03CE"],["\u03D0","\u03D1"],["\u03D5","\u03D7"],"\u03D9","\u03DB","\u03DD","\u03DF","\u03E1","\u03E3","\u03E5","\u03E7","\u03E9","\u03EB","\u03ED",["\u03EF","\u03F3"],"\u03F5","\u03F8",["\u03FB","\u03FC"],["\u0430","\u045F"],"\u0461","\u0463","\u0465","\u0467","\u0469","\u046B","\u046D","\u046F","\u0471","\u0473","\u0475","\u0477","\u0479","\u047B","\u047D","\u047F","\u0481","\u048B","\u048D","\u048F","\u0491","\u0493","\u0495","\u0497","\u0499","\u049B","\u049D","\u049F","\u04A1","\u04A3","\u04A5","\u04A7","\u04A9","\u04AB","\u04AD","\u04AF","\u04B1","\u04B3","\u04B5","\u04B7","\u04B9","\u04BB","\u04BD","\u04BF","\u04C2","\u04C4","\u04C6","\u04C8","\u04CA","\u04CC",["\u04CE","\u04CF"],"\u04D1","\u04D3","\u04D5","\u04D7","\u04D9","\u04DB","\u04DD","\u04DF","\u04E1","\u04E3","\u04E5","\u04E7","\u04E9","\u04EB","\u04ED","\u04EF","\u04F1","\u04F3","\u04F5","\u04F7","\u04F9","\u04FB","\u04FD","\u04FF","\u0501","\u0503","\u0505","\u0507","\u0509","\u050B","\u050D","\u050F","\u0511","\u0513","\u0515","\u0517","\u0519","\u051B","\u051D","\u051F","\u0521","\u0523","\u0525","\u0527",["\u0561","\u0587"],["\u1D00","\u1D2B"],["\u1D6B","\u1D77"],["\u1D79","\u1D9A"],"\u1E01","\u1E03","\u1E05","\u1E07","\u1E09","\u1E0B","\u1E0D","\u1E0F","\u1E11","\u1E13","\u1E15","\u1E17","\u1E19","\u1E1B","\u1E1D","\u1E1F","\u1E21","\u1E23","\u1E25","\u1E27","\u1E29","\u1E2B","\u1E2D","\u1E2F","\u1E31","\u1E33","\u1E35","\u1E37","\u1E39","\u1E3B","\u1E3D","\u1E3F","\u1E41","\u1E43","\u1E45","\u1E47","\u1E49","\u1E4B","\u1E4D","\u1E4F","\u1E51","\u1E53","\u1E55","\u1E57","\u1E59","\u1E5B","\u1E5D","\u1E5F","\u1E61","\u1E63","\u1E65","\u1E67","\u1E69","\u1E6B","\u1E6D","\u1E6F","\u1E71","\u1E73","\u1E75","\u1E77","\u1E79","\u1E7B","\u1E7D","\u1E7F","\u1E81","\u1E83","\u1E85","\u1E87","\u1E89","\u1E8B","\u1E8D","\u1E8F","\u1E91","\u1E93",["\u1E95","\u1E9D"],"\u1E9F","\u1EA1","\u1EA3","\u1EA5","\u1EA7","\u1EA9","\u1EAB","\u1EAD","\u1EAF","\u1EB1","\u1EB3","\u1EB5","\u1EB7","\u1EB9","\u1EBB","\u1EBD","\u1EBF","\u1EC1","\u1EC3","\u1EC5","\u1EC7","\u1EC9","\u1ECB","\u1ECD","\u1ECF","\u1ED1","\u1ED3","\u1ED5","\u1ED7","\u1ED9","\u1EDB","\u1EDD","\u1EDF","\u1EE1","\u1EE3","\u1EE5","\u1EE7","\u1EE9","\u1EEB","\u1EED","\u1EEF","\u1EF1","\u1EF3","\u1EF5","\u1EF7","\u1EF9","\u1EFB","\u1EFD",["\u1EFF","\u1F07"],["\u1F10","\u1F15"],["\u1F20","\u1F27"],["\u1F30","\u1F37"],["\u1F40","\u1F45"],["\u1F50","\u1F57"],["\u1F60","\u1F67"],["\u1F70","\u1F7D"],["\u1F80","\u1F87"],["\u1F90","\u1F97"],["\u1FA0","\u1FA7"],["\u1FB0","\u1FB4"],["\u1FB6","\u1FB7"],"\u1FBE",["\u1FC2","\u1FC4"],["\u1FC6","\u1FC7"],["\u1FD0","\u1FD3"],["\u1FD6","\u1FD7"],["\u1FE0","\u1FE7"],["\u1FF2","\u1FF4"],["\u1FF6","\u1FF7"],"\u210A",["\u210E","\u210F"],"\u2113","\u212F","\u2134","\u2139",["\u213C","\u213D"],["\u2146","\u2149"],"\u214E","\u2184",["\u2C30","\u2C5E"],"\u2C61",["\u2C65","\u2C66"],"\u2C68","\u2C6A","\u2C6C","\u2C71",["\u2C73","\u2C74"],["\u2C76","\u2C7B"],"\u2C81","\u2C83","\u2C85","\u2C87","\u2C89","\u2C8B","\u2C8D","\u2C8F","\u2C91","\u2C93","\u2C95","\u2C97","\u2C99","\u2C9B","\u2C9D","\u2C9F","\u2CA1","\u2CA3","\u2CA5","\u2CA7","\u2CA9","\u2CAB","\u2CAD","\u2CAF","\u2CB1","\u2CB3","\u2CB5","\u2CB7","\u2CB9","\u2CBB","\u2CBD","\u2CBF","\u2CC1","\u2CC3","\u2CC5","\u2CC7","\u2CC9","\u2CCB","\u2CCD","\u2CCF","\u2CD1","\u2CD3","\u2CD5","\u2CD7","\u2CD9","\u2CDB","\u2CDD","\u2CDF","\u2CE1",["\u2CE3","\u2CE4"],"\u2CEC","\u2CEE","\u2CF3",["\u2D00","\u2D25"],"\u2D27","\u2D2D","\uA641","\uA643","\uA645","\uA647","\uA649","\uA64B","\uA64D","\uA64F","\uA651","\uA653","\uA655","\uA657","\uA659","\uA65B","\uA65D","\uA65F","\uA661","\uA663","\uA665","\uA667","\uA669","\uA66B","\uA66D","\uA681","\uA683","\uA685","\uA687","\uA689","\uA68B","\uA68D","\uA68F","\uA691","\uA693","\uA695","\uA697","\uA723","\uA725","\uA727","\uA729","\uA72B","\uA72D",["\uA72F","\uA731"],"\uA733","\uA735","\uA737","\uA739","\uA73B","\uA73D","\uA73F","\uA741","\uA743","\uA745","\uA747","\uA749","\uA74B","\uA74D","\uA74F","\uA751","\uA753","\uA755","\uA757","\uA759","\uA75B","\uA75D","\uA75F","\uA761","\uA763","\uA765","\uA767","\uA769","\uA76B","\uA76D","\uA76F",["\uA771","\uA778"],"\uA77A","\uA77C","\uA77F","\uA781","\uA783","\uA785","\uA787","\uA78C","\uA78E","\uA791","\uA793","\uA7A1","\uA7A3","\uA7A5","\uA7A7","\uA7A9","\uA7FA",["\uFB00","\uFB06"],["\uFB13","\uFB17"],["\uFF41","\uFF5A"]],!1,!1),_u=/^[\u02B0-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0374\u037A\u0559\u0640\u06E5-\u06E6\u07F4-\u07F5\u07FA\u081A\u0824\u0828\u0971\u0E46\u0EC6\u10FC\u17D7\u1843\u1AA7\u1C78-\u1C7D\u1D2C-\u1D6A\u1D78\u1D9B-\u1DBF\u2071\u207F\u2090-\u209C\u2C7C-\u2C7D\u2D6F\u2E2F\u3005\u3031-\u3035\u303B\u309D-\u309E\u30FC-\u30FE\uA015\uA4F8-\uA4FD\uA60C\uA67F\uA717-\uA71F\uA770\uA788\uA7F8-\uA7F9\uA9CF\uAA70\uAADD\uAAF3-\uAAF4\uFF70\uFF9E-\uFF9F]/,Hu=Ee([["\u02B0","\u02C1"],["\u02C6","\u02D1"],["\u02E0","\u02E4"],"\u02EC","\u02EE","\u0374","\u037A","\u0559","\u0640",["\u06E5","\u06E6"],["\u07F4","\u07F5"],"\u07FA","\u081A","\u0824","\u0828","\u0971","\u0E46","\u0EC6","\u10FC","\u17D7","\u1843","\u1AA7",["\u1C78","\u1C7D"],["\u1D2C","\u1D6A"],"\u1D78",["\u1D9B","\u1DBF"],"\u2071","\u207F",["\u2090","\u209C"],["\u2C7C","\u2C7D"],"\u2D6F","\u2E2F","\u3005",["\u3031","\u3035"],"\u303B",["\u309D","\u309E"],["\u30FC","\u30FE"],"\uA015",["\uA4F8","\uA4FD"],"\uA60C","\uA67F",["\uA717","\uA71F"],"\uA770","\uA788",["\uA7F8","\uA7F9"],"\uA9CF","\uAA70","\uAADD",["\uAAF3","\uAAF4"],"\uFF70",["\uFF9E","\uFF9F"]],!1,!1),Ju=/^[\xAA\xBA\u01BB\u01C0-\u01C3\u0294\u05D0-\u05EA\u05F0-\u05F2\u0620-\u063F\u0641-\u064A\u066E-\u066F\u0671-\u06D3\u06D5\u06EE-\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u0800-\u0815\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0972-\u0977\u0979-\u097F\u0985-\u098C\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC-\u09DD\u09DF-\u09E1\u09F0-\u09F1\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33\u0A35-\u0A36\u0A38-\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0-\u0AE1\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32-\u0B33\u0B35-\u0B39\u0B3D\u0B5C-\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9C\u0B9E-\u0B9F\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58-\u0C59\u0C60-\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0-\u0CE1\u0CF1-\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32-\u0E33\u0E40-\u0E45\u0E81-\u0E82\u0E84\u0E87-\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA-\u0EAB\u0EAD-\u0EB0\u0EB2-\u0EB3\u0EBD\u0EC0-\u0EC4\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065-\u1066\u106E-\u1070\u1075-\u1081\u108E\u10D0-\u10FA\u10FD-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17DC\u1820-\u1842\u1844-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE-\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C77\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5-\u1CF6\u2135-\u2138\u2D30-\u2D67\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3006\u303C\u3041-\u3096\u309F\u30A1-\u30FA\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA014\uA016-\uA48C\uA4D0-\uA4F7\uA500-\uA60B\uA610-\uA61F\uA62A-\uA62B\uA66E\uA6A0-\uA6E5\uA7FB-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA6F\uAA71-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5-\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADC\uAAE0-\uAAEA\uAAF2\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF66-\uFF6F\uFF71-\uFF9D\uFFA0-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,Zu=Ee(["\xAA","\xBA","\u01BB",["\u01C0","\u01C3"],"\u0294",["\u05D0","\u05EA"],["\u05F0","\u05F2"],["\u0620","\u063F"],["\u0641","\u064A"],["\u066E","\u066F"],["\u0671","\u06D3"],"\u06D5",["\u06EE","\u06EF"],["\u06FA","\u06FC"],"\u06FF","\u0710",["\u0712","\u072F"],["\u074D","\u07A5"],"\u07B1",["\u07CA","\u07EA"],["\u0800","\u0815"],["\u0840","\u0858"],"\u08A0",["\u08A2","\u08AC"],["\u0904","\u0939"],"\u093D","\u0950",["\u0958","\u0961"],["\u0972","\u0977"],["\u0979","\u097F"],["\u0985","\u098C"],["\u098F","\u0990"],["\u0993","\u09A8"],["\u09AA","\u09B0"],"\u09B2",["\u09B6","\u09B9"],"\u09BD","\u09CE",["\u09DC","\u09DD"],["\u09DF","\u09E1"],["\u09F0","\u09F1"],["\u0A05","\u0A0A"],["\u0A0F","\u0A10"],["\u0A13","\u0A28"],["\u0A2A","\u0A30"],["\u0A32","\u0A33"],["\u0A35","\u0A36"],["\u0A38","\u0A39"],["\u0A59","\u0A5C"],"\u0A5E",["\u0A72","\u0A74"],["\u0A85","\u0A8D"],["\u0A8F","\u0A91"],["\u0A93","\u0AA8"],["\u0AAA","\u0AB0"],["\u0AB2","\u0AB3"],["\u0AB5","\u0AB9"],"\u0ABD","\u0AD0",["\u0AE0","\u0AE1"],["\u0B05","\u0B0C"],["\u0B0F","\u0B10"],["\u0B13","\u0B28"],["\u0B2A","\u0B30"],["\u0B32","\u0B33"],["\u0B35","\u0B39"],"\u0B3D",["\u0B5C","\u0B5D"],["\u0B5F","\u0B61"],"\u0B71","\u0B83",["\u0B85","\u0B8A"],["\u0B8E","\u0B90"],["\u0B92","\u0B95"],["\u0B99","\u0B9A"],"\u0B9C",["\u0B9E","\u0B9F"],["\u0BA3","\u0BA4"],["\u0BA8","\u0BAA"],["\u0BAE","\u0BB9"],"\u0BD0",["\u0C05","\u0C0C"],["\u0C0E","\u0C10"],["\u0C12","\u0C28"],["\u0C2A","\u0C33"],["\u0C35","\u0C39"],"\u0C3D",["\u0C58","\u0C59"],["\u0C60","\u0C61"],["\u0C85","\u0C8C"],["\u0C8E","\u0C90"],["\u0C92","\u0CA8"],["\u0CAA","\u0CB3"],["\u0CB5","\u0CB9"],"\u0CBD","\u0CDE",["\u0CE0","\u0CE1"],["\u0CF1","\u0CF2"],["\u0D05","\u0D0C"],["\u0D0E","\u0D10"],["\u0D12","\u0D3A"],"\u0D3D","\u0D4E",["\u0D60","\u0D61"],["\u0D7A","\u0D7F"],["\u0D85","\u0D96"],["\u0D9A","\u0DB1"],["\u0DB3","\u0DBB"],"\u0DBD",["\u0DC0","\u0DC6"],["\u0E01","\u0E30"],["\u0E32","\u0E33"],["\u0E40","\u0E45"],["\u0E81","\u0E82"],"\u0E84",["\u0E87","\u0E88"],"\u0E8A","\u0E8D",["\u0E94","\u0E97"],["\u0E99","\u0E9F"],["\u0EA1","\u0EA3"],"\u0EA5","\u0EA7",["\u0EAA","\u0EAB"],["\u0EAD","\u0EB0"],["\u0EB2","\u0EB3"],"\u0EBD",["\u0EC0","\u0EC4"],["\u0EDC","\u0EDF"],"\u0F00",["\u0F40","\u0F47"],["\u0F49","\u0F6C"],["\u0F88","\u0F8C"],["\u1000","\u102A"],"\u103F",["\u1050","\u1055"],["\u105A","\u105D"],"\u1061",["\u1065","\u1066"],["\u106E","\u1070"],["\u1075","\u1081"],"\u108E",["\u10D0","\u10FA"],["\u10FD","\u1248"],["\u124A","\u124D"],["\u1250","\u1256"],"\u1258",["\u125A","\u125D"],["\u1260","\u1288"],["\u128A","\u128D"],["\u1290","\u12B0"],["\u12B2","\u12B5"],["\u12B8","\u12BE"],"\u12C0",["\u12C2","\u12C5"],["\u12C8","\u12D6"],["\u12D8","\u1310"],["\u1312","\u1315"],["\u1318","\u135A"],["\u1380","\u138F"],["\u13A0","\u13F4"],["\u1401","\u166C"],["\u166F","\u167F"],["\u1681","\u169A"],["\u16A0","\u16EA"],["\u1700","\u170C"],["\u170E","\u1711"],["\u1720","\u1731"],["\u1740","\u1751"],["\u1760","\u176C"],["\u176E","\u1770"],["\u1780","\u17B3"],"\u17DC",["\u1820","\u1842"],["\u1844","\u1877"],["\u1880","\u18A8"],"\u18AA",["\u18B0","\u18F5"],["\u1900","\u191C"],["\u1950","\u196D"],["\u1970","\u1974"],["\u1980","\u19AB"],["\u19C1","\u19C7"],["\u1A00","\u1A16"],["\u1A20","\u1A54"],["\u1B05","\u1B33"],["\u1B45","\u1B4B"],["\u1B83","\u1BA0"],["\u1BAE","\u1BAF"],["\u1BBA","\u1BE5"],["\u1C00","\u1C23"],["\u1C4D","\u1C4F"],["\u1C5A","\u1C77"],["\u1CE9","\u1CEC"],["\u1CEE","\u1CF1"],["\u1CF5","\u1CF6"],["\u2135","\u2138"],["\u2D30","\u2D67"],["\u2D80","\u2D96"],["\u2DA0","\u2DA6"],["\u2DA8","\u2DAE"],["\u2DB0","\u2DB6"],["\u2DB8","\u2DBE"],["\u2DC0","\u2DC6"],["\u2DC8","\u2DCE"],["\u2DD0","\u2DD6"],["\u2DD8","\u2DDE"],"\u3006","\u303C",["\u3041","\u3096"],"\u309F",["\u30A1","\u30FA"],"\u30FF",["\u3105","\u312D"],["\u3131","\u318E"],["\u31A0","\u31BA"],["\u31F0","\u31FF"],["\u3400","\u4DB5"],["\u4E00","\u9FCC"],["\uA000","\uA014"],["\uA016","\uA48C"],["\uA4D0","\uA4F7"],["\uA500","\uA60B"],["\uA610","\uA61F"],["\uA62A","\uA62B"],"\uA66E",["\uA6A0","\uA6E5"],["\uA7FB","\uA801"],["\uA803","\uA805"],["\uA807","\uA80A"],["\uA80C","\uA822"],["\uA840","\uA873"],["\uA882","\uA8B3"],["\uA8F2","\uA8F7"],"\uA8FB",["\uA90A","\uA925"],["\uA930","\uA946"],["\uA960","\uA97C"],["\uA984","\uA9B2"],["\uAA00","\uAA28"],["\uAA40","\uAA42"],["\uAA44","\uAA4B"],["\uAA60","\uAA6F"],["\uAA71","\uAA76"],"\uAA7A",["\uAA80","\uAAAF"],"\uAAB1",["\uAAB5","\uAAB6"],["\uAAB9","\uAABD"],"\uAAC0","\uAAC2",["\uAADB","\uAADC"],["\uAAE0","\uAAEA"],"\uAAF2",["\uAB01","\uAB06"],["\uAB09","\uAB0E"],["\uAB11","\uAB16"],["\uAB20","\uAB26"],["\uAB28","\uAB2E"],["\uABC0","\uABE2"],["\uAC00","\uD7A3"],["\uD7B0","\uD7C6"],["\uD7CB","\uD7FB"],["\uF900","\uFA6D"],["\uFA70","\uFAD9"],"\uFB1D",["\uFB1F","\uFB28"],["\uFB2A","\uFB36"],["\uFB38","\uFB3C"],"\uFB3E",["\uFB40","\uFB41"],["\uFB43","\uFB44"],["\uFB46","\uFBB1"],["\uFBD3","\uFD3D"],["\uFD50","\uFD8F"],["\uFD92","\uFDC7"],["\uFDF0","\uFDFB"],["\uFE70","\uFE74"],["\uFE76","\uFEFC"],["\uFF66","\uFF6F"],["\uFF71","\uFF9D"],["\uFFA0","\uFFBE"],["\uFFC2","\uFFC7"],["\uFFCA","\uFFCF"],["\uFFD2","\uFFD7"],["\uFFDA","\uFFDC"]],!1,!1),Yu=/^[\u01C5\u01C8\u01CB\u01F2\u1F88-\u1F8F\u1F98-\u1F9F\u1FA8-\u1FAF\u1FBC\u1FCC\u1FFC]/,Xu=Ee(["\u01C5","\u01C8","\u01CB","\u01F2",["\u1F88","\u1F8F"],["\u1F98","\u1F9F"],["\u1FA8","\u1FAF"],"\u1FBC","\u1FCC","\u1FFC"],!1,!1),Qu=/^[A-Z\xC0-\xD6\xD8-\xDE\u0100\u0102\u0104\u0106\u0108\u010A\u010C\u010E\u0110\u0112\u0114\u0116\u0118\u011A\u011C\u011E\u0120\u0122\u0124\u0126\u0128\u012A\u012C\u012E\u0130\u0132\u0134\u0136\u0139\u013B\u013D\u013F\u0141\u0143\u0145\u0147\u014A\u014C\u014E\u0150\u0152\u0154\u0156\u0158\u015A\u015C\u015E\u0160\u0162\u0164\u0166\u0168\u016A\u016C\u016E\u0170\u0172\u0174\u0176\u0178-\u0179\u017B\u017D\u0181-\u0182\u0184\u0186-\u0187\u0189-\u018B\u018E-\u0191\u0193-\u0194\u0196-\u0198\u019C-\u019D\u019F-\u01A0\u01A2\u01A4\u01A6-\u01A7\u01A9\u01AC\u01AE-\u01AF\u01B1-\u01B3\u01B5\u01B7-\u01B8\u01BC\u01C4\u01C7\u01CA\u01CD\u01CF\u01D1\u01D3\u01D5\u01D7\u01D9\u01DB\u01DE\u01E0\u01E2\u01E4\u01E6\u01E8\u01EA\u01EC\u01EE\u01F1\u01F4\u01F6-\u01F8\u01FA\u01FC\u01FE\u0200\u0202\u0204\u0206\u0208\u020A\u020C\u020E\u0210\u0212\u0214\u0216\u0218\u021A\u021C\u021E\u0220\u0222\u0224\u0226\u0228\u022A\u022C\u022E\u0230\u0232\u023A-\u023B\u023D-\u023E\u0241\u0243-\u0246\u0248\u024A\u024C\u024E\u0370\u0372\u0376\u0386\u0388-\u038A\u038C\u038E-\u038F\u0391-\u03A1\u03A3-\u03AB\u03CF\u03D2-\u03D4\u03D8\u03DA\u03DC\u03DE\u03E0\u03E2\u03E4\u03E6\u03E8\u03EA\u03EC\u03EE\u03F4\u03F7\u03F9-\u03FA\u03FD-\u042F\u0460\u0462\u0464\u0466\u0468\u046A\u046C\u046E\u0470\u0472\u0474\u0476\u0478\u047A\u047C\u047E\u0480\u048A\u048C\u048E\u0490\u0492\u0494\u0496\u0498\u049A\u049C\u049E\u04A0\u04A2\u04A4\u04A6\u04A8\u04AA\u04AC\u04AE\u04B0\u04B2\u04B4\u04B6\u04B8\u04BA\u04BC\u04BE\u04C0-\u04C1\u04C3\u04C5\u04C7\u04C9\u04CB\u04CD\u04D0\u04D2\u04D4\u04D6\u04D8\u04DA\u04DC\u04DE\u04E0\u04E2\u04E4\u04E6\u04E8\u04EA\u04EC\u04EE\u04F0\u04F2\u04F4\u04F6\u04F8\u04FA\u04FC\u04FE\u0500\u0502\u0504\u0506\u0508\u050A\u050C\u050E\u0510\u0512\u0514\u0516\u0518\u051A\u051C\u051E\u0520\u0522\u0524\u0526\u0531-\u0556\u10A0-\u10C5\u10C7\u10CD\u1E00\u1E02\u1E04\u1E06\u1E08\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1E1E\u1E20\u1E22\u1E24\u1E26\u1E28\u1E2A\u1E2C\u1E2E\u1E30\u1E32\u1E34\u1E36\u1E38\u1E3A\u1E3C\u1E3E\u1E40\u1E42\u1E44\u1E46\u1E48\u1E4A\u1E4C\u1E4E\u1E50\u1E52\u1E54\u1E56\u1E58\u1E5A\u1E5C\u1E5E\u1E60\u1E62\u1E64\u1E66\u1E68\u1E6A\u1E6C\u1E6E\u1E70\u1E72\u1E74\u1E76\u1E78\u1E7A\u1E7C\u1E7E\u1E80\u1E82\u1E84\u1E86\u1E88\u1E8A\u1E8C\u1E8E\u1E90\u1E92\u1E94\u1E9E\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u1EC8\u1ECA\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u1EF2\u1EF4\u1EF6\u1EF8\u1EFA\u1EFC\u1EFE\u1F08-\u1F0F\u1F18-\u1F1D\u1F28-\u1F2F\u1F38-\u1F3F\u1F48-\u1F4D\u1F59\u1F5B\u1F5D\u1F5F\u1F68-\u1F6F\u1FB8-\u1FBB\u1FC8-\u1FCB\u1FD8-\u1FDB\u1FE8-\u1FEC\u1FF8-\u1FFB\u2102\u2107\u210B-\u210D\u2110-\u2112\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u2130-\u2133\u213E-\u213F\u2145\u2183\u2C00-\u2C2E\u2C60\u2C62-\u2C64\u2C67\u2C69\u2C6B\u2C6D-\u2C70\u2C72\u2C75\u2C7E-\u2C80\u2C82\u2C84\u2C86\u2C88\u2C8A\u2C8C\u2C8E\u2C90\u2C92\u2C94\u2C96\u2C98\u2C9A\u2C9C\u2C9E\u2CA0\u2CA2\u2CA4\u2CA6\u2CA8\u2CAA\u2CAC\u2CAE\u2CB0\u2CB2\u2CB4\u2CB6\u2CB8\u2CBA\u2CBC\u2CBE\u2CC0\u2CC2\u2CC4\u2CC6\u2CC8\u2CCA\u2CCC\u2CCE\u2CD0\u2CD2\u2CD4\u2CD6\u2CD8\u2CDA\u2CDC\u2CDE\u2CE0\u2CE2\u2CEB\u2CED\u2CF2\uA640\uA642\uA644\uA646\uA648\uA64A\uA64C\uA64E\uA650\uA652\uA654\uA656\uA658\uA65A\uA65C\uA65E\uA660\uA662\uA664\uA666\uA668\uA66A\uA66C\uA680\uA682\uA684\uA686\uA688\uA68A\uA68C\uA68E\uA690\uA692\uA694\uA696\uA722\uA724\uA726\uA728\uA72A\uA72C\uA72E\uA732\uA734\uA736\uA738\uA73A\uA73C\uA73E\uA740\uA742\uA744\uA746\uA748\uA74A\uA74C\uA74E\uA750\uA752\uA754\uA756\uA758\uA75A\uA75C\uA75E\uA760\uA762\uA764\uA766\uA768\uA76A\uA76C\uA76E\uA779\uA77B\uA77D-\uA77E\uA780\uA782\uA784\uA786\uA78B\uA78D\uA790\uA792\uA7A0\uA7A2\uA7A4\uA7A6\uA7A8\uA7AA\uFF21-\uFF3A]/,ea=Ee([["A","Z"],["\xC0","\xD6"],["\xD8","\xDE"],"\u0100","\u0102","\u0104","\u0106","\u0108","\u010A","\u010C","\u010E","\u0110","\u0112","\u0114","\u0116","\u0118","\u011A","\u011C","\u011E","\u0120","\u0122","\u0124","\u0126","\u0128","\u012A","\u012C","\u012E","\u0130","\u0132","\u0134","\u0136","\u0139","\u013B","\u013D","\u013F","\u0141","\u0143","\u0145","\u0147","\u014A","\u014C","\u014E","\u0150","\u0152","\u0154","\u0156","\u0158","\u015A","\u015C","\u015E","\u0160","\u0162","\u0164","\u0166","\u0168","\u016A","\u016C","\u016E","\u0170","\u0172","\u0174","\u0176",["\u0178","\u0179"],"\u017B","\u017D",["\u0181","\u0182"],"\u0184",["\u0186","\u0187"],["\u0189","\u018B"],["\u018E","\u0191"],["\u0193","\u0194"],["\u0196","\u0198"],["\u019C","\u019D"],["\u019F","\u01A0"],"\u01A2","\u01A4",["\u01A6","\u01A7"],"\u01A9","\u01AC",["\u01AE","\u01AF"],["\u01B1","\u01B3"],"\u01B5",["\u01B7","\u01B8"],"\u01BC","\u01C4","\u01C7","\u01CA","\u01CD","\u01CF","\u01D1","\u01D3","\u01D5","\u01D7","\u01D9","\u01DB","\u01DE","\u01E0","\u01E2","\u01E4","\u01E6","\u01E8","\u01EA","\u01EC","\u01EE","\u01F1","\u01F4",["\u01F6","\u01F8"],"\u01FA","\u01FC","\u01FE","\u0200","\u0202","\u0204","\u0206","\u0208","\u020A","\u020C","\u020E","\u0210","\u0212","\u0214","\u0216","\u0218","\u021A","\u021C","\u021E","\u0220","\u0222","\u0224","\u0226","\u0228","\u022A","\u022C","\u022E","\u0230","\u0232",["\u023A","\u023B"],["\u023D","\u023E"],"\u0241",["\u0243","\u0246"],"\u0248","\u024A","\u024C","\u024E","\u0370","\u0372","\u0376","\u0386",["\u0388","\u038A"],"\u038C",["\u038E","\u038F"],["\u0391","\u03A1"],["\u03A3","\u03AB"],"\u03CF",["\u03D2","\u03D4"],"\u03D8","\u03DA","\u03DC","\u03DE","\u03E0","\u03E2","\u03E4","\u03E6","\u03E8","\u03EA","\u03EC","\u03EE","\u03F4","\u03F7",["\u03F9","\u03FA"],["\u03FD","\u042F"],"\u0460","\u0462","\u0464","\u0466","\u0468","\u046A","\u046C","\u046E","\u0470","\u0472","\u0474","\u0476","\u0478","\u047A","\u047C","\u047E","\u0480","\u048A","\u048C","\u048E","\u0490","\u0492","\u0494","\u0496","\u0498","\u049A","\u049C","\u049E","\u04A0","\u04A2","\u04A4","\u04A6","\u04A8","\u04AA","\u04AC","\u04AE","\u04B0","\u04B2","\u04B4","\u04B6","\u04B8","\u04BA","\u04BC","\u04BE",["\u04C0","\u04C1"],"\u04C3","\u04C5","\u04C7","\u04C9","\u04CB","\u04CD","\u04D0","\u04D2","\u04D4","\u04D6","\u04D8","\u04DA","\u04DC","\u04DE","\u04E0","\u04E2","\u04E4","\u04E6","\u04E8","\u04EA","\u04EC","\u04EE","\u04F0","\u04F2","\u04F4","\u04F6","\u04F8","\u04FA","\u04FC","\u04FE","\u0500","\u0502","\u0504","\u0506","\u0508","\u050A","\u050C","\u050E","\u0510","\u0512","\u0514","\u0516","\u0518","\u051A","\u051C","\u051E","\u0520","\u0522","\u0524","\u0526",["\u0531","\u0556"],["\u10A0","\u10C5"],"\u10C7","\u10CD","\u1E00","\u1E02","\u1E04","\u1E06","\u1E08","\u1E0A","\u1E0C","\u1E0E","\u1E10","\u1E12","\u1E14","\u1E16","\u1E18","\u1E1A","\u1E1C","\u1E1E","\u1E20","\u1E22","\u1E24","\u1E26","\u1E28","\u1E2A","\u1E2C","\u1E2E","\u1E30","\u1E32","\u1E34","\u1E36","\u1E38","\u1E3A","\u1E3C","\u1E3E","\u1E40","\u1E42","\u1E44","\u1E46","\u1E48","\u1E4A","\u1E4C","\u1E4E","\u1E50","\u1E52","\u1E54","\u1E56","\u1E58","\u1E5A","\u1E5C","\u1E5E","\u1E60","\u1E62","\u1E64","\u1E66","\u1E68","\u1E6A","\u1E6C","\u1E6E","\u1E70","\u1E72","\u1E74","\u1E76","\u1E78","\u1E7A","\u1E7C","\u1E7E","\u1E80","\u1E82","\u1E84","\u1E86","\u1E88","\u1E8A","\u1E8C","\u1E8E","\u1E90","\u1E92","\u1E94","\u1E9E","\u1EA0","\u1EA2","\u1EA4","\u1EA6","\u1EA8","\u1EAA","\u1EAC","\u1EAE","\u1EB0","\u1EB2","\u1EB4","\u1EB6","\u1EB8","\u1EBA","\u1EBC","\u1EBE","\u1EC0","\u1EC2","\u1EC4","\u1EC6","\u1EC8","\u1ECA","\u1ECC","\u1ECE","\u1ED0","\u1ED2","\u1ED4","\u1ED6","\u1ED8","\u1EDA","\u1EDC","\u1EDE","\u1EE0","\u1EE2","\u1EE4","\u1EE6","\u1EE8","\u1EEA","\u1EEC","\u1EEE","\u1EF0","\u1EF2","\u1EF4","\u1EF6","\u1EF8","\u1EFA","\u1EFC","\u1EFE",["\u1F08","\u1F0F"],["\u1F18","\u1F1D"],["\u1F28","\u1F2F"],["\u1F38","\u1F3F"],["\u1F48","\u1F4D"],"\u1F59","\u1F5B","\u1F5D","\u1F5F",["\u1F68","\u1F6F"],["\u1FB8","\u1FBB"],["\u1FC8","\u1FCB"],["\u1FD8","\u1FDB"],["\u1FE8","\u1FEC"],["\u1FF8","\u1FFB"],"\u2102","\u2107",["\u210B","\u210D"],["\u2110","\u2112"],"\u2115",["\u2119","\u211D"],"\u2124","\u2126","\u2128",["\u212A","\u212D"],["\u2130","\u2133"],["\u213E","\u213F"],"\u2145","\u2183",["\u2C00","\u2C2E"],"\u2C60",["\u2C62","\u2C64"],"\u2C67","\u2C69","\u2C6B",["\u2C6D","\u2C70"],"\u2C72","\u2C75",["\u2C7E","\u2C80"],"\u2C82","\u2C84","\u2C86","\u2C88","\u2C8A","\u2C8C","\u2C8E","\u2C90","\u2C92","\u2C94","\u2C96","\u2C98","\u2C9A","\u2C9C","\u2C9E","\u2CA0","\u2CA2","\u2CA4","\u2CA6","\u2CA8","\u2CAA","\u2CAC","\u2CAE","\u2CB0","\u2CB2","\u2CB4","\u2CB6","\u2CB8","\u2CBA","\u2CBC","\u2CBE","\u2CC0","\u2CC2","\u2CC4","\u2CC6","\u2CC8","\u2CCA","\u2CCC","\u2CCE","\u2CD0","\u2CD2","\u2CD4","\u2CD6","\u2CD8","\u2CDA","\u2CDC","\u2CDE","\u2CE0","\u2CE2","\u2CEB","\u2CED","\u2CF2","\uA640","\uA642","\uA644","\uA646","\uA648","\uA64A","\uA64C","\uA64E","\uA650","\uA652","\uA654","\uA656","\uA658","\uA65A","\uA65C","\uA65E","\uA660","\uA662","\uA664","\uA666","\uA668","\uA66A","\uA66C","\uA680","\uA682","\uA684","\uA686","\uA688","\uA68A","\uA68C","\uA68E","\uA690","\uA692","\uA694","\uA696","\uA722","\uA724","\uA726","\uA728","\uA72A","\uA72C","\uA72E","\uA732","\uA734","\uA736","\uA738","\uA73A","\uA73C","\uA73E","\uA740","\uA742","\uA744","\uA746","\uA748","\uA74A","\uA74C","\uA74E","\uA750","\uA752","\uA754","\uA756","\uA758","\uA75A","\uA75C","\uA75E","\uA760","\uA762","\uA764","\uA766","\uA768","\uA76A","\uA76C","\uA76E","\uA779","\uA77B",["\uA77D","\uA77E"],"\uA780","\uA782","\uA784","\uA786","\uA78B","\uA78D","\uA790","\uA792","\uA7A0","\uA7A2","\uA7A4","\uA7A6","\uA7A8","\uA7AA",["\uFF21","\uFF3A"]],!1,!1),ta=/^[\u16EE-\u16F0\u2160-\u2182\u2185-\u2188\u3007\u3021-\u3029\u3038-\u303A\uA6E6-\uA6EF]/,ra=Ee([["\u16EE","\u16F0"],["\u2160","\u2182"],["\u2185","\u2188"],"\u3007",["\u3021","\u3029"],["\u3038","\u303A"],["\uA6E6","\uA6EF"]],!1,!1),na=/^[0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]/,ia=Ee([["0","9"],["\u0660","\u0669"],["\u06F0","\u06F9"],["\u07C0","\u07C9"],["\u0966","\u096F"],["\u09E6","\u09EF"],["\u0A66","\u0A6F"],["\u0AE6","\u0AEF"],["\u0B66","\u0B6F"],["\u0BE6","\u0BEF"],["\u0C66","\u0C6F"],["\u0CE6","\u0CEF"],["\u0D66","\u0D6F"],["\u0E50","\u0E59"],["\u0ED0","\u0ED9"],["\u0F20","\u0F29"],["\u1040","\u1049"],["\u1090","\u1099"],["\u17E0","\u17E9"],["\u1810","\u1819"],["\u1946","\u194F"],["\u19D0","\u19D9"],["\u1A80","\u1A89"],["\u1A90","\u1A99"],["\u1B50","\u1B59"],["\u1BB0","\u1BB9"],["\u1C40","\u1C49"],["\u1C50","\u1C59"],["\uA620","\uA629"],["\uA8D0","\uA8D9"],["\uA900","\uA909"],["\uA9D0","\uA9D9"],["\uAA50","\uAA59"],["\uABF0","\uABF9"],["\uFF10","\uFF19"]],!1,!1),s=0,O=0,Vr=[{line:1,column:1}],Be=0,Ln=[],y=0,jr;if("startRule"in t){if(!(t.startRule in i))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');u=i[t.startRule]}function Ni(){return n.substring(O,s)}function Wl(){return tr(O,s)}function Vl(o,c){throw c=c!==void 0?c:tr(O,s),Ri([ke(o)],n.substring(O,s),c)}function jl(o,c){throw c=c!==void 0?c:tr(O,s),aa(o,c)}function M(o,c){return{type:"literal",text:o,ignoreCase:c}}function Ee(o,c,E){return{type:"class",parts:o,inverted:c,ignoreCase:E}}function oa(){return{type:"any"}}function ua(){return{type:"end"}}function ke(o){return{type:"other",description:o}}function Ti(o){var c=Vr[o],E;if(c)return c;for(E=o-1;!Vr[E];)E--;for(c=Vr[E],c={line:c.line,column:c.column};E<o;)n.charCodeAt(E)===10?(c.line++,c.column=1):c.column++,E++;return Vr[o]=c,c}function tr(o,c){var E=Ti(o),m=Ti(c);return{start:{offset:o,line:E.line,column:E.column},end:{offset:c,line:m.line,column:m.column}}}function D(o){s<Be||(s>Be&&(Be=s,Ln=[]),Ln.push(o))}function aa(o,c){return new gt(o,null,null,c)}function Ri(o,c,E){return new gt(gt.buildMessage(o,c),o,c,E)}function Oi(){var o,c;if(o=[],c=Mi(),c!==e)for(;c!==e;)o.push(c),c=Mi();else o=e;return o}function Mi(){var o,c,E,m,v,F,I,Y,X,Pe,Ae,qn,Yi;return o=s,c=K(),c!==e?(n.substr(s,6).toLowerCase()===a?(E=n.substr(s,6),s+=6):(E=e,y===0&&D(l)),E===e&&(E=null),E!==e?(m=K(),m!==e?(n.substr(s,5).toLowerCase()===h?(v=n.substr(s,5),s+=5):(v=e,y===0&&D(f)),v===e&&(n.substr(s,7).toLowerCase()===p?(v=n.substr(s,7),s+=7):(v=e,y===0&&D(w))),v!==e?(F=K(),F!==e?(I=xe(),I===e&&(I=null),I!==e?(Y=K(),Y!==e?(n.charCodeAt(s)===123?(X=C,s++):(X=e,y===0&&D(x)),X!==e?(Pe=Li(),Pe===e&&(Pe=null),Pe!==e?(Ae=K(),Ae!==e?(n.charCodeAt(s)===125?(qn=N,s++):(qn=e,y===0&&D(W)),qn!==e?(Yi=K(),Yi!==e?(O=o,c=J(E,v,I,Pe),o=c):(s=o,o=e)):(s=o,o=e)):(s=o,o=e)):(s=o,o=e)):(s=o,o=e)):(s=o,o=e)):(s=o,o=e)):(s=o,o=e)):(s=o,o=e)):(s=o,o=e)):(s=o,o=e)):(s=o,o=e),o}function Li(){var o,c,E,m,v,F,I,Y,X,Pe,Ae;if(o=s,c=K(),c!==e)if(E=Wn(),E!==e)if(m=K(),m!==e)if(n.charCodeAt(s)===59?(v=ue,s++):(v=e,y===0&&D($)),v===e&&(v=null),v!==e){for(F=[],I=s,Y=K(),Y!==e?(X=Wn(),X!==e?(Pe=K(),Pe!==e?(n.charCodeAt(s)===59?(Ae=ue,s++):(Ae=e,y===0&&D($)),Ae===e&&(Ae=null),Ae!==e?(O=I,Y=be(E,X),I=Y):(s=I,I=e)):(s=I,I=e)):(s=I,I=e)):(s=I,I=e);I!==e;)F.push(I),I=s,Y=K(),Y!==e?(X=Wn(),X!==e?(Pe=K(),Pe!==e?(n.charCodeAt(s)===59?(Ae=ue,s++):(Ae=e,y===0&&D($)),Ae===e&&(Ae=null),Ae!==e?(O=I,Y=be(E,X),I=Y):(s=I,I=e)):(s=I,I=e)):(s=I,I=e)):(s=I,I=e);F!==e?(O=o,c=R(E,F),o=c):(s=o,o=e)}else s=o,o=e;else s=o,o=e;else s=o,o=e;else s=o,o=e;return o}function Wn(){var o,c,E,m,v,F;return o=s,c=xe(),c!==e?(E=K(),E!==e?(n.charCodeAt(s)===61?(m=Ne,s++):(m=e,y===0&&D(Ke)),m!==e?(v=K(),v!==e?(F=xe(),F!==e?(O=o,c=Fe(c,F),o=c):(s=o,o=e)):(s=o,o=e)):(s=o,o=e)):(s=o,o=e)):(s=o,o=e),o===e&&(o=sa(),o===e&&(o=la(),o===e&&(o=jn(),o===e&&(o=ca(),o===e&&(o=s,c=xe(),c!==e?(n.charCodeAt(s)===61?(E=Ne,s++):(E=e,y===0&&D(Ke)),E!==e?(m=xe(),m!==e?(c=[c,E,m],o=c):(s=o,o=e)):(s=o,o=e)):(s=o,o=e)))))),o}function sa(){var o,c,E;return o=s,n.substr(s,5).toLowerCase()===h?(c=n.substr(s,5),s+=5):(c=e,y===0&&D(f)),c===e&&(n.substr(s,4).toLowerCase()===ge?(c=n.substr(s,4),s+=4):(c=e,y===0&&D(Se)),c===e&&(n.substr(s,4).toLowerCase()===le?(c=n.substr(s,4),s+=4):(c=e,y===0&&D(ce)))),c!==e?(E=$r(),E!==e?(O=o,c=Te(c,E),o=c):(s=o,o=e)):(s=o,o=e),o}function $r(){var o,c,E,m,v,F,I,Y,X;return o=s,c=K(),c!==e?(n.charCodeAt(s)===91?(E=ae,s++):(E=e,y===0&&D(he)),E!==e?(m=K(),m!==e?(v=Wi(),v===e&&(v=null),v!==e?(F=K(),F!==e?(n.charCodeAt(s)===93?(I=jt,s++):(I=e,y===0&&D($t)),I!==e?(Y=K(),Y!==e?(X=$r(),X===e&&(X=null),X!==e?(O=o,c=Ut(v,X),o=c):(s=o,o=e)):(s=o,o=e)):(s=o,o=e)):(s=o,o=e)):(s=o,o=e)):(s=o,o=e)):(s=o,o=e)):(s=o,o=e),o}function Wi(){var o,c,E,m,v,F,I,Y;return o=s,c=K(),c!==e?(E=xe(),E!==e?(m=s,v=K(),v!==e?(n.charCodeAt(s)===61?(F=Ne,s++):(F=e,y===0&&D(Ke)),F!==e?(I=K(),I!==e?(Y=xe(),Y!==e?(O=m,v=fe(E,Y),m=v):(s=m,m=e)):(s=m,m=e)):(s=m,m=e)):(s=m,m=e),m===e&&(m=null),m!==e?(v=K(),v!==e?(n.charCodeAt(s)===44?(F=qt,s++):(F=e,y===0&&D(it)),F===e&&(n.charCodeAt(s)===59?(F=ue,s++):(F=e,y===0&&D($))),F===e&&(F=null),F!==e?(I=Wi(),I===e&&(I=null),I!==e?(O=o,c=Et(E,m,I),o=c):(s=o,o=e)):(s=o,o=e)):(s=o,o=e)):(s=o,o=e)):(s=o,o=e)):(s=o,o=e),o}function la(){var o,c,E,m;return o=s,c=jn(),c===e&&(c=Vn()),c!==e?(E=Vi(),E!==e?(m=$r(),m===e&&(m=null),m!==e?(O=o,c=At(c,E,m),o=c):(s=o,o=e)):(s=o,o=e)):(s=o,o=e),o}function Vi(){var o,c,E,m,v,F,I;return o=s,c=K(),c!==e?(n.substr(s,2)===ot?(E=ot,s+=2):(E=e,y===0&&D(Dr)),E===e&&(n.substr(s,2)===zt?(E=zt,s+=2):(E=e,y===0&&D(Fr))),E!==e?(m=K(),m!==e?(v=jn(),v===e&&(v=Vn()),v!==e?(F=K(),F!==e?(I=Vi(),I===e&&(I=null),I!==e?(O=o,c=hn(E,v,I),o=c):(s=o,o=e)):(s=o,o=e)):(s=o,o=e)):(s=o,o=e)):(s=o,o=e)):(s=o,o=e),o}function ca(){var o,c,E;return o=s,c=Vn(),c!==e?(E=$r(),E===e&&(E=null),E!==e?(O=o,c=gn(c,E),o=c):(s=o,o=e)):(s=o,o=e),o}function Vn(){var o,c,E;return o=s,c=xe(),c!==e?(E=da(),E===e&&(E=null),E!==e?(O=o,c=fn(c,E),o=c):(s=o,o=e)):(s=o,o=e),o}function da(){var o,c,E,m,v,F;return y++,o=s,n.charCodeAt(s)===58?(c=Ce,s++):(c=e,y===0&&D(Kt)),c!==e?(E=xe(),E!==e?(m=s,n.charCodeAt(s)===58?(v=Ce,s++):(v=e,y===0&&D(Kt)),v!==e?(F=ji(),F!==e?(O=m,v=pn(E,F),m=v):(s=m,m=e)):(s=m,m=e),m===e&&(m=null),m!==e?(O=o,c=En(E,m),o=c):(s=o,o=e)):(s=o,o=e)):(s=o,o=e),o===e&&(o=s,n.charCodeAt(s)===58?(c=Ce,s++):(c=e,y===0&&D(Kt)),c!==e?(E=ji(),E!==e?(O=o,c=An(E),o=c):(s=o,o=e)):(s=o,o=e)),y--,o===e&&(c=e,y===0&&D(mn)),o}function jn(){var o,c,E,m,v,F;return o=s,c=s,n.substr(s,8).toLowerCase()===yn?(E=n.substr(s,8),s+=8):(E=e,y===0&&D(bn)),E!==e?(m=K(),m!==e?(v=xe(),v===e&&(v=null),v!==e?(F=K(),F!==e?(O=c,E=wn(v),c=E):(s=c,c=e)):(s=c,c=e)):(s=c,c=e)):(s=c,c=e),c===e&&(c=null),c!==e?(n.charCodeAt(s)===123?(E=C,s++):(E=e,y===0&&D(x)),E!==e?(m=Li(),m===e&&(m=null),m!==e?(v=K(),v!==e?(n.charCodeAt(s)===125?(F=N,s++):(F=e,y===0&&D(W)),F!==e?(O=o,c=vn(c,m),o=c):(s=o,o=e)):(s=o,o=e)):(s=o,o=e)):(s=o,o=e)):(s=o,o=e),o}function ji(){var o;return n.charCodeAt(s)===110?(o=Cn,s++):(o=e,y===0&&D(Dn)),o===e&&(n.substr(s,2)===Sr?(o=Sr,s+=2):(o=e,y===0&&D(_t)),o===e&&(n.charCodeAt(s)===101?(o=Br,s++):(o=e,y===0&&D(Ht)),o===e&&(n.substr(s,2)===Jt?(o=Jt,s+=2):(o=e,y===0&&D(Fn)),o===e&&(n.charCodeAt(s)===115?(o=Sn,s++):(o=e,y===0&&D(Zt)),o===e&&(n.substr(s,2)===Yt?(o=Yt,s+=2):(o=e,y===0&&D(yt)),o===e&&(n.charCodeAt(s)===119?(o=Bn,s++):(o=e,y===0&&D(kn)),o===e&&(n.substr(s,2)===Re?(o=Re,s+=2):(o=e,y===0&&D(xn))))))))),o}function xe(){var o;return o=$i(),o===e&&(o=ha(),o===e&&(o=zi(),o===e&&(o=fa(),o===e&&(o=ga())))),o}function $i(){var o,c,E,m;if(y++,o=s,c=Ui(),c!==e){for(E=[],m=qi();m!==e;)E.push(m),m=qi();E!==e?(O=o,c=kr(c,E),o=c):(s=o,o=e)}else s=o,o=e;return y--,o===e&&(c=e,y===0&&D(Pn)),o}function ha(){var o,c,E;return o=s,c=zi(),c!==e?(E=$i(),E!==e?(O=o,c=xr(c,E),o=c):(s=o,o=e)):(s=o,o=e),o}function Ui(){var o;return o=Ca(),o===e&&(n.charCodeAt(s)===36?(o=Gn,s++):(o=e,y===0&&D(In)),o===e&&(n.charCodeAt(s)===95?(o=Pr,s++):(o=e,y===0&&D(Nn)))),o}function qi(){var o;return o=Ui(),o===e&&(o=Pa()),o}function zi(){var o,c,E,m,v,F,I,Y,X;if(y++,o=s,c=s,n.charCodeAt(s)===45?(E=Tn,s++):(E=e,y===0&&D(Rn)),E===e&&(E=null),E!==e){if(m=s,n.charCodeAt(s)===46?(v=Ir,s++):(v=e,y===0&&D(Xt)),v!==e){if(F=[],Oe.test(n.charAt(s))?(I=n.charAt(s),s++):(I=e,y===0&&D(we)),I!==e)for(;I!==e;)F.push(I),Oe.test(n.charAt(s))?(I=n.charAt(s),s++):(I=e,y===0&&D(we));else F=e;F!==e?(v=[v,F],m=v):(s=m,m=e)}else s=m,m=e;if(m===e){if(m=s,v=[],Oe.test(n.charAt(s))?(F=n.charAt(s),s++):(F=e,y===0&&D(we)),F!==e)for(;F!==e;)v.push(F),Oe.test(n.charAt(s))?(F=n.charAt(s),s++):(F=e,y===0&&D(we));else v=e;if(v!==e){if(F=s,n.charCodeAt(s)===46?(I=Ir,s++):(I=e,y===0&&D(Xt)),I!==e){for(Y=[],Oe.test(n.charAt(s))?(X=n.charAt(s),s++):(X=e,y===0&&D(we));X!==e;)Y.push(X),Oe.test(n.charAt(s))?(X=n.charAt(s),s++):(X=e,y===0&&D(we));Y!==e?(I=[I,Y],F=I):(s=F,F=e)}else s=F,F=e;F===e&&(F=null),F!==e?(v=[v,F],m=v):(s=m,m=e)}else s=m,m=e}m!==e?(E=[E,m],c=E):(s=c,c=e)}else s=c,c=e;return c!==e&&(O=o,c=Nr(c)),o=c,y--,o===e&&(c=e,y===0&&D(Gr)),o}function ga(){var o,c;return o=s,c=$n(),c!==e&&(O=o,c=bt(c)),o=c,o}function $n(){var o,c,E,m;if(o=s,n.charCodeAt(s)===60?(c=wt,s++):(c=e,y===0&&D(vt)),c!==e){for(E=[],m=Ki(),m===e&&(m=$n());m!==e;)E.push(m),m=Ki(),m===e&&(m=$n());E!==e?(n.charCodeAt(s)===62?(m=Ct,s++):(m=e,y===0&&D(Dt)),m!==e?(O=o,c=Tr(E),o=c):(s=o,o=e)):(s=o,o=e)}else s=o,o=e;return o}function Ki(){var o,c,E,m,v;if(o=s,c=[],E=s,m=s,y++,n.charCodeAt(s)===62?(v=Ct,s++):(v=e,y===0&&D(Dt)),v===e&&(n.charCodeAt(s)===60?(v=wt,s++):(v=e,y===0&&D(vt))),y--,v===e?m=void 0:(s=m,m=e),m!==e?(n.length>s?(v=n.charAt(s),s++):(v=e,y===0&&D(me)),v!==e?(O=E,m=Me(v),E=m):(s=E,E=e)):(s=E,E=e),E!==e)for(;E!==e;)c.push(E),E=s,m=s,y++,n.charCodeAt(s)===62?(v=Ct,s++):(v=e,y===0&&D(Dt)),v===e&&(n.charCodeAt(s)===60?(v=wt,s++):(v=e,y===0&&D(vt))),y--,v===e?m=void 0:(s=m,m=e),m!==e?(n.length>s?(v=n.charAt(s),s++):(v=e,y===0&&D(me)),v!==e?(O=E,m=Me(v),E=m):(s=E,E=e)):(s=E,E=e);else c=e;return c!==e&&(O=o,c=Rr(c)),o=c,o}function fa(){var o,c,E,m;if(o=s,n.charCodeAt(s)===34?(c=pe,s++):(c=e,y===0&&D(_e)),c!==e){for(E=[],m=_i();m!==e;)E.push(m),m=_i();E!==e?(n.charCodeAt(s)===34?(m=pe,s++):(m=e,y===0&&D(_e)),m!==e?(O=o,c=Or(E),o=c):(s=o,o=e)):(s=o,o=e)}else s=o,o=e;return o}function _i(){var o,c,E;return o=ma(),o===e&&(o=s,c=s,y++,n.charCodeAt(s)===34?(E=pe,s++):(E=e,y===0&&D(_e)),E===e&&(E=Ea()),y--,E===e?c=void 0:(s=c,c=e),c!==e?(E=ya(),E!==e?(O=o,c=ut(),o=c):(s=o,o=e)):(s=o,o=e),o===e&&(o=pa())),o}function ma(){var o,c,E,m;return o=s,c=s,n.charCodeAt(s)===92?(E=Le,s++):(E=e,y===0&&D(We)),E!==e?(n.length>s?(m=n.charAt(s),s++):(m=e,y===0&&D(me)),m!==e?(E=[E,m],c=E):(s=c,c=e)):(s=c,c=e),c!==e&&(O=o,c=Mr(c)),o=c,o}function pa(){var o,c,E;return o=s,n.charCodeAt(s)===92?(c=Le,s++):(c=e,y===0&&D(We)),c!==e?(E=Aa(),E!==e?(O=o,c=Qt(),o=c):(s=o,o=e)):(s=o,o=e),o}function Ea(){var o;return er.test(n.charAt(s))?(o=n.charAt(s),s++):(o=e,y===0&&D(On)),o}function Aa(){var o,c;return y++,n.charCodeAt(s)===10?(o=A,s++):(o=e,y===0&&D(B)),o===e&&(n.substr(s,2)===k?(o=k,s+=2):(o=e,y===0&&D(P)),o===e&&(n.charCodeAt(s)===13?(o=j,s++):(o=e,y===0&&D(U)),o===e&&(n.charCodeAt(s)===8232?(o=q,s++):(o=e,y===0&&D(ne)),o===e&&(n.charCodeAt(s)===8233?(o=Je,s++):(o=e,y===0&&D(Ve)))))),y--,o===e&&(c=e,y===0&&D(He)),o}function ya(){var o;return n.length>s?(o=n.charAt(s),s++):(o=e,y===0&&D(me)),o}function $l(){var o,c,E;if(o=s,c=[],E=Hi(),E!==e)for(;E!==e;)c.push(E),E=Hi();else c=e;return c!==e&&(O=o,c=Or(c)),o=c,o}function Hi(){var o,c,E;return Lr.test(n.charAt(s))?(o=n.charAt(s),s++):(o=e,y===0&&D(Wr)),o===e&&(o=s,n.substr(s,2)===Di?(c=Di,s+=2):(c=e,y===0&&D(Iu)),c!==e&&(O=o,c=Nu()),o=c,o===e&&(o=s,n.charCodeAt(s)===92?(c=Le,s++):(c=e,y===0&&D(We)),c!==e?(E=Un(),E!==e?(O=o,c=Qt(),o=c):(s=o,o=e)):(s=o,o=e),o===e&&(o=s,n.charCodeAt(s)===92?(c=Le,s++):(c=e,y===0&&D(We)),c!==e&&(O=o,c=Tu()),o=c))),o}function Ji(){var o,c;return y++,o=ba(),o===e&&(o=wa(),o===e&&(o=va())),y--,o===e&&(c=e,y===0&&D(Ru)),o}function ba(){var o,c,E,m,v,F;if(y++,o=s,n.substr(s,2)===Fi?(c=Fi,s+=2):(c=e,y===0&&D(Mu)),c!==e){for(E=[],m=s,v=s,y++,n.substr(s,2)===Ft?(F=Ft,s+=2):(F=e,y===0&&D(Mn)),y--,F===e?v=void 0:(s=v,v=e),v!==e?(n.length>s?(F=n.charAt(s),s++):(F=e,y===0&&D(me)),F!==e?(O=m,v=Si(F),m=v):(s=m,m=e)):(s=m,m=e);m!==e;)E.push(m),m=s,v=s,y++,n.substr(s,2)===Ft?(F=Ft,s+=2):(F=e,y===0&&D(Mn)),y--,F===e?v=void 0:(s=v,v=e),v!==e?(n.length>s?(F=n.charAt(s),s++):(F=e,y===0&&D(me)),F!==e?(O=m,v=Si(F),m=v):(s=m,m=e)):(s=m,m=e);E!==e?(n.substr(s,2)===Ft?(m=Ft,s+=2):(m=e,y===0&&D(Mn)),m!==e?(O=o,c=Lu(E),o=c):(s=o,o=e)):(s=o,o=e)}else s=o,o=e;return y--,o===e&&(c=e,y===0&&D(Ou)),o}function wa(){var o,c,E,m,v,F;if(y++,o=s,n.substr(s,2)===Bi?(c=Bi,s+=2):(c=e,y===0&&D(Vu)),c!==e){for(E=[],m=s,v=s,y++,St.test(n.charAt(s))?(F=n.charAt(s),s++):(F=e,y===0&&D(Bt)),y--,F===e?v=void 0:(s=v,v=e),v!==e?(n.length>s?(F=n.charAt(s),s++):(F=e,y===0&&D(me)),F!==e?(O=m,v=Me(F),m=v):(s=m,m=e)):(s=m,m=e);m!==e;)E.push(m),m=s,v=s,y++,St.test(n.charAt(s))?(F=n.charAt(s),s++):(F=e,y===0&&D(Bt)),y--,F===e?v=void 0:(s=v,v=e),v!==e?(n.length>s?(F=n.charAt(s),s++):(F=e,y===0&&D(me)),F!==e?(O=m,v=Me(F),m=v):(s=m,m=e)):(s=m,m=e);E!==e?(St.test(n.charAt(s))?(m=n.charAt(s),s++):(m=e,y===0&&D(Bt)),m===e&&(m=null),m!==e?(O=o,c=ki(E),o=c):(s=o,o=e)):(s=o,o=e)}else s=o,o=e;return y--,o===e&&(c=e,y===0&&D(Wu)),o}function va(){var o,c,E,m,v,F;if(y++,o=s,n.charCodeAt(s)===35?(c=$u,s++):(c=e,y===0&&D(Uu)),c!==e){for(E=[],m=s,v=s,y++,St.test(n.charAt(s))?(F=n.charAt(s),s++):(F=e,y===0&&D(Bt)),y--,F===e?v=void 0:(s=v,v=e),v!==e?(n.length>s?(F=n.charAt(s),s++):(F=e,y===0&&D(me)),F!==e?(O=m,v=Me(F),m=v):(s=m,m=e)):(s=m,m=e);m!==e;)E.push(m),m=s,v=s,y++,St.test(n.charAt(s))?(F=n.charAt(s),s++):(F=e,y===0&&D(Bt)),y--,F===e?v=void 0:(s=v,v=e),v!==e?(n.length>s?(F=n.charAt(s),s++):(F=e,y===0&&D(me)),F!==e?(O=m,v=Me(F),m=v):(s=m,m=e)):(s=m,m=e);E!==e?(St.test(n.charAt(s))?(m=n.charAt(s),s++):(m=e,y===0&&D(Bt)),m===e&&(m=null),m!==e?(O=o,c=ki(E),o=c):(s=o,o=e)):(s=o,o=e)}else s=o,o=e;return y--,o===e&&(c=e,y===0&&D(ju)),o}function K(){var o,c;for(y++,o=[],c=Zi(),c===e&&(c=Ji());c!==e;)o.push(c),c=Zi(),c===e&&(c=Ji());return y--,o===e&&(c=e,y===0&&D(qu)),o}function Un(){var o,c;if(o=[],xi.test(n.charAt(s))?(c=n.charAt(s),s++):(c=e,y===0&&D(Pi)),c!==e)for(;c!==e;)o.push(c),xi.test(n.charAt(s))?(c=n.charAt(s),s++):(c=e,y===0&&D(Pi));else o=e;return o}function Zi(){var o,c;if(o=[],Gi.test(n.charAt(s))?(c=n.charAt(s),s++):(c=e,y===0&&D(Ii)),c===e&&(c=Un()),c!==e)for(;c!==e;)o.push(c),Gi.test(n.charAt(s))?(c=n.charAt(s),s++):(c=e,y===0&&D(Ii)),c===e&&(c=Un());else o=e;return o}function Ca(){var o;return o=ka(),o===e&&(o=Da(),o===e&&(o=Ba(),o===e&&(o=Fa(),o===e&&(o=Sa(),o===e&&(o=xa()))))),o}function Da(){var o;return zu.test(n.charAt(s))?(o=n.charAt(s),s++):(o=e,y===0&&D(Ku)),o}function Fa(){var o;return _u.test(n.charAt(s))?(o=n.charAt(s),s++):(o=e,y===0&&D(Hu)),o}function Sa(){var o;return Ju.test(n.charAt(s))?(o=n.charAt(s),s++):(o=e,y===0&&D(Zu)),o}function Ba(){var o;return Yu.test(n.charAt(s))?(o=n.charAt(s),s++):(o=e,y===0&&D(Xu)),o}function ka(){var o;return Qu.test(n.charAt(s))?(o=n.charAt(s),s++):(o=e,y===0&&D(ea)),o}function xa(){var o;return ta.test(n.charAt(s))?(o=n.charAt(s),s++):(o=e,y===0&&D(ra)),o}function Pa(){var o;return na.test(n.charAt(s))?(o=n.charAt(s),s++):(o=e,y===0&&D(ia)),o}if(jr=u(),jr!==e&&s===n.length)return jr;throw jr!==e&&s<n.length&&D(ua()),Ri(Ln,Be<n.length?n.charAt(Be):null,Be<n.length?tr(Be,Be+1):tr(Be,Be))}Do.exports={SyntaxError:gt,parse:cs}});var Bo=ie((Yd,So)=>{var ds=Fo();So.exports=ds.parse});var No=ie((Xd,Io)=>{Io.exports={rgb2hsl:dr,rgb2hsv:Qr,rgb2hwb:hr,rgb2cmyk:gr,rgb2keyword:fr,rgb2xyz:oi,rgb2lab:ui,rgb2lch:hs,hsl2rgb:en,hsl2hsv:gs,hsl2hwb:fs,hsl2cmyk:ms,hsl2keyword:ps,hsv2rgb:tn,hsv2hsl:Es,hsv2hwb:As,hsv2cmyk:ys,hsv2keyword:bs,hwb2rgb:mr,hwb2hsl:ws,hwb2hsv:vs,hwb2cmyk:Cs,hwb2keyword:Ds,cmyk2rgb:pr,cmyk2hsl:Fs,cmyk2hsv:Ss,cmyk2hwb:Bs,cmyk2keyword:ks,keyword2rgb:ft,keyword2hsl:Is,keyword2hsv:Ns,keyword2hwb:Ts,keyword2cmyk:Rs,keyword2lab:Os,keyword2xyz:Ms,xyz2rgb:ko,xyz2lab:xo,xyz2lch:xs,lab2xyz:ai,lab2rgb:Po,lab2lch:si,lch2lab:li,lch2xyz:Ps,lch2rgb:Gs};function dr(n){var t=n[0]/255,e=n[1]/255,i=n[2]/255,u=Math.min(t,e,i),a=Math.max(t,e,i),l=a-u,h,f,p;return a==u?h=0:t==a?h=(e-i)/l:e==a?h=2+(i-t)/l:i==a&&(h=4+(t-e)/l),h=Math.min(h*60,360),h<0&&(h+=360),p=(u+a)/2,a==u?f=0:p<=.5?f=l/(a+u):f=l/(2-a-u),[h,f*100,p*100]}function Qr(n){var t=n[0],e=n[1],i=n[2],u=Math.min(t,e,i),a=Math.max(t,e,i),l=a-u,h,f,p;return a==0?f=0:f=l/a*1e3/10,a==u?h=0:t==a?h=(e-i)/l:e==a?h=2+(i-t)/l:i==a&&(h=4+(t-e)/l),h=Math.min(h*60,360),h<0&&(h+=360),p=a/255*1e3/10,[h,f,p]}function hr(n){var t=n[0],e=n[1],a=n[2],i=dr(n)[0],u=1/255*Math.min(t,Math.min(e,a)),a=1-1/255*Math.max(t,Math.max(e,a));return[i,u*100,a*100]}function gr(n){var t=n[0]/255,e=n[1]/255,i=n[2]/255,u,a,l,h;return h=Math.min(1-t,1-e,1-i),u=(1-t-h)/(1-h)||0,a=(1-e-h)/(1-h)||0,l=(1-i-h)/(1-h)||0,[u*100,a*100,l*100,h*100]}function fr(n){return Go[JSON.stringify(n)]}function oi(n){var t=n[0]/255,e=n[1]/255,i=n[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92;var u=t*.4124+e*.3576+i*.1805,a=t*.2126+e*.7152+i*.0722,l=t*.0193+e*.1192+i*.9505;return[u*100,a*100,l*100]}function ui(n){var t=oi(n),e=t[0],i=t[1],u=t[2],a,l,h;return e/=95.047,i/=100,u/=108.883,e=e>.008856?Math.pow(e,1/3):7.787*e+16/116,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,u=u>.008856?Math.pow(u,1/3):7.787*u+16/116,a=116*i-16,l=500*(e-i),h=200*(i-u),[a,l,h]}function hs(n){return si(ui(n))}function en(n){var t=n[0]/360,e=n[1]/100,i=n[2]/100,u,a,l,h,f;if(e==0)return f=i*255,[f,f,f];i<.5?a=i*(1+e):a=i+e-i*e,u=2*i-a,h=[0,0,0];for(var p=0;p<3;p++)l=t+1/3*-(p-1),l<0&&l++,l>1&&l--,6*l<1?f=u+(a-u)*6*l:2*l<1?f=a:3*l<2?f=u+(a-u)*(2/3-l)*6:f=u,h[p]=f*255;return h}function gs(n){var t=n[0],e=n[1]/100,i=n[2]/100,u,a;return i===0?[0,0,0]:(i*=2,e*=i<=1?i:2-i,a=(i+e)/2,u=2*e/(i+e),[t,u*100,a*100])}function fs(n){return hr(en(n))}function ms(n){return gr(en(n))}function ps(n){return fr(en(n))}function tn(n){var t=n[0]/60,e=n[1]/100,f=n[2]/100,i=Math.floor(t)%6,u=t-Math.floor(t),a=255*f*(1-e),l=255*f*(1-e*u),h=255*f*(1-e*(1-u)),f=255*f;switch(i){case 0:return[f,h,a];case 1:return[l,f,a];case 2:return[a,f,h];case 3:return[a,l,f];case 4:return[h,a,f];case 5:return[f,a,l]}}function Es(n){var t=n[0],e=n[1]/100,i=n[2]/100,u,a;return a=(2-e)*i,u=e*i,u/=a<=1?a:2-a,u=u||0,a/=2,[t,u*100,a*100]}function As(n){return hr(tn(n))}function ys(n){return gr(tn(n))}function bs(n){return fr(tn(n))}function mr(n){var t=n[0]/360,e=n[1]/100,i=n[2]/100,u=e+i,a,l,h,f;switch(u>1&&(e/=u,i/=u),a=Math.floor(6*t),l=1-i,h=6*t-a,(a&1)!=0&&(h=1-h),f=e+h*(l-e),a){default:case 6:case 0:r=l,g=f,b=e;break;case 1:r=f,g=l,b=e;break;case 2:r=e,g=l,b=f;break;case 3:r=e,g=f,b=l;break;case 4:r=f,g=e,b=l;break;case 5:r=l,g=e,b=f;break}return[r*255,g*255,b*255]}function ws(n){return dr(mr(n))}function vs(n){return Qr(mr(n))}function Cs(n){return gr(mr(n))}function Ds(n){return fr(mr(n))}function pr(n){var t=n[0]/100,e=n[1]/100,i=n[2]/100,u=n[3]/100,a,l,h;return a=1-Math.min(1,t*(1-u)+u),l=1-Math.min(1,e*(1-u)+u),h=1-Math.min(1,i*(1-u)+u),[a*255,l*255,h*255]}function Fs(n){return dr(pr(n))}function Ss(n){return Qr(pr(n))}function Bs(n){return hr(pr(n))}function ks(n){return fr(pr(n))}function ko(n){var t=n[0]/100,e=n[1]/100,i=n[2]/100,u,a,l;return u=t*3.2406+e*-1.5372+i*-.4986,a=t*-.9689+e*1.8758+i*.0415,l=t*.0557+e*-.204+i*1.057,u=u>.0031308?1.055*Math.pow(u,1/2.4)-.055:u=u*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a=a*12.92,l=l>.0031308?1.055*Math.pow(l,1/2.4)-.055:l=l*12.92,u=Math.min(Math.max(0,u),1),a=Math.min(Math.max(0,a),1),l=Math.min(Math.max(0,l),1),[u*255,a*255,l*255]}function xo(n){var t=n[0],e=n[1],i=n[2],u,a,l;return t/=95.047,e/=100,i/=108.883,t=t>.008856?Math.pow(t,1/3):7.787*t+16/116,e=e>.008856?Math.pow(e,1/3):7.787*e+16/116,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,u=116*e-16,a=500*(t-e),l=200*(e-i),[u,a,l]}function xs(n){return si(xo(n))}function ai(n){var t=n[0],e=n[1],i=n[2],u,a,l,h;return t<=8?(a=t*100/903.3,h=7.787*(a/100)+16/116):(a=100*Math.pow((t+16)/116,3),h=Math.pow(a/100,1/3)),u=u/95.047<=.008856?u=95.047*(e/500+h-16/116)/7.787:95.047*Math.pow(e/500+h,3),l=l/108.883<=.008859?l=108.883*(h-i/200-16/116)/7.787:108.883*Math.pow(h-i/200,3),[u,a,l]}function si(n){var t=n[0],e=n[1],i=n[2],u,a,l;return u=Math.atan2(i,e),a=u*360/2/Math.PI,a<0&&(a+=360),l=Math.sqrt(e*e+i*i),[t,l,a]}function Po(n){return ko(ai(n))}function li(n){var t=n[0],e=n[1],i=n[2],u,a,l;return l=i/360*2*Math.PI,u=e*Math.cos(l),a=e*Math.sin(l),[t,u,a]}function Ps(n){return ai(li(n))}function Gs(n){return Po(li(n))}function ft(n){return ii[n]}function Is(n){return dr(ft(n))}function Ns(n){return Qr(ft(n))}function Ts(n){return hr(ft(n))}function Rs(n){return gr(ft(n))}function Os(n){return ui(ft(n))}function Ms(n){return oi(ft(n))}var ii={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Go={};for(ni in ii)Go[JSON.stringify(ii[ni])]=ni;var ni});var Oo=ie((Qd,Ro)=>{var ci=No(),mt=function(){return new Er};for(Rt in ci)mt[Rt+"Raw"]=function(n){return function(t){return typeof t=="number"&&(t=Array.prototype.slice.call(arguments)),ci[n](t)}}(Rt),di=/(\w+)2(\w+)/.exec(Rt),rn=di[1],To=di[2],mt[rn]=mt[rn]||{},mt[rn][To]=mt[Rt]=function(n){return function(t){typeof t=="number"&&(t=Array.prototype.slice.call(arguments));var e=ci[n](t);if(typeof e=="string"||e===void 0)return e;for(var i=0;i<e.length;i++)e[i]=Math.round(e[i]);return e}}(Rt);var di,rn,To,Rt,Er=function(){this.convs={}};Er.prototype.routeSpace=function(n,t){var e=t[0];return e===void 0?this.getValues(n):(typeof e=="number"&&(e=Array.prototype.slice.call(t)),this.setValues(n,e))};Er.prototype.setValues=function(n,t){return this.space=n,this.convs={},this.convs[n]=t,this};Er.prototype.getValues=function(n){var t=this.convs[n];if(!t){var e=this.space,i=this.convs[e];t=mt[e][n](i),this.convs[n]=t}return t};["rgb","hsl","hsv","cmyk","keyword"].forEach(function(n){Er.prototype[n]=function(t){return this.routeSpace(n,arguments)}});Ro.exports=mt});var Lo=ie((e0,Mo)=>{var hi=Oo();Mo.exports=function(n){var t,e,i,u;if(t=/^((?:rgb|hs[lv]|cmyk|xyz|lab)a?)\s*\(([^\)]*)\)/.exec(n)){var a=t[1],l=a.replace(/a$/,""),h=l==="cmyk"?4:3;e=hi[l],i=t[2].replace(/^\s+|\s+$/g,"").split(/\s*,\s*/).map(function(p,w){return/%$/.test(p)&&w===h?parseFloat(p)/100:(/%$/.test(p),parseFloat(p))}),a===l&&i.push(1),u=i[h]===void 0?1:i[h],i=i.slice(0,h),e[l]=function(){return i}}else if(/^#[A-Fa-f0-9]+$/.test(n)){var l=n.replace(/^#/,""),h=l.length;e=hi.rgb,i=l.split(h===3?/(.)/:/(..)/),i=i.filter(Boolean).map(function(C){return parseInt(h===3?C+C:C,16)}),u=1,e.rgb=function(){return i},i[0]||(i[0]=0),i[1]||(i[1]=0),i[2]||(i[2]=0)}else e=hi.keyword,e.keyword=function(){return n},i=n,u=1;var f={rgb:void 0,hsl:void 0,hsv:void 0,cmyk:void 0,keyword:void 0,hex:void 0};try{f.rgb=e.rgb(i)}catch{}try{f.hsl=e.hsl(i)}catch{}try{f.hsv=e.hsv(i)}catch{}try{f.cmyk=e.cmyk(i)}catch{}try{f.keyword=e.keyword(i)}catch{}return f.rgb&&(f.hex="#"+f.rgb.map(function(p){var w=p.toString(16);return w.length===1?"0"+w:w}).join("")),f.rgb&&(f.rgba=f.rgb.concat(u)),f.hsl&&(f.hsla=f.hsl.concat(u)),f.hsv&&(f.hsva=f.hsv.concat(u)),f.cmyk&&(f.cmyka=f.cmyk.concat(u)),f}});var Uo=ie(rt=>{"use strict";var nn=rt&&rt.__spreadArrays||function(){for(var n=0,t=0,e=arguments.length;t<e;t++)n+=arguments[t].length;for(var i=Array(n),u=0,t=0;t<e;t++)for(var a=arguments[t],l=0,h=a.length;l<h;l++,u++)i[u]=a[l];return i};Object.defineProperty(rt,"__esModule",{value:!0});rt.StringBuilder=rt.String=void 0;var Ot=function(){function n(){}return n.IsNullOrWhiteSpace=function(t){try{return t==null||t=="undefined"?!0:t.toString().replace(/\s/g,"").length<1}catch(e){return console.log(e),!1}},n.Join=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];try{var u=e[0];if(Array.isArray(u)||u instanceof Array){for(var a=n.Empty,l=0,h=0;h<u.length;h++){var f=u[h];h<u.length-1?a+=f+t:a+=f}return a}else if(typeof u=="object"){var p=n.Empty,w=u,C=Object.keys(u);return C.forEach(function(N){p+=w[N]+t}),p=p.slice(0,p.length-t.length),p}var x=e;return n.join.apply(n,nn([t],x))}catch(N){return console.log(N),n.Empty}},n.Format=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];try{return t.match(n.regexNumber)?n.format(n.regexNumber,t,e):t.match(n.regexObject)?n.format(n.regexObject,t,e,!0):t}catch(u){return console.log(u),n.Empty}},n.format=function(t,e,i,u){return u===void 0&&(u=!1),e.replace(t,function(a,l){var h=a.split(":");h.length>1&&(l=h[0].replace("{",""),a=h[1].replace("}",""));var f;return u?f=i[0][l]:f=i[l],f==null||f==null||a.match(/{\d+}/)?f:(f=n.parsePattern(a,f),typeof f<"u"&&f!=null?f:n.Empty)})},n.parsePattern=function(t,e){switch(t){case"L":return e=e.toLocaleLowerCase(),e;case"U":return e=e.toLocaleUpperCase(),e;case"d":{if(typeof e=="string")return n.getDisplayDateFromString(e);if(e instanceof Date)return n.Format("{0:00}.{1:00}.{2:0000}",e.getDate(),e.getMonth(),e.getFullYear());break}case"s":{if(typeof e=="string")return n.getSortableDateFromString(e);if(e instanceof Date)return n.Format("{0:0000}-{1:00}-{2:00}",e.getFullYear(),e.getMonth(),e.getDate());break}case"n":{typeof e!="string"&&(e=e.toString());var i=e.replace(/,/g,".");if(isNaN(parseFloat(i))||i.length<=3)break;var u=i.split(/[^0-9]+/g),a=u;u.length>1&&(a=[n.join.apply(n,nn([""],u.splice(0,u.length-1))),u[u.length-1]]);var l=a[0],h=l.length%3,f=h>0?l.substring(0,h):n.Empty,p=f,w=l.substring(h).match(/.{3}/g);return f=f+"."+n.Join(".",w),e=f+(a.length>1?","+a[1]:""),e}case"x":return this.decimalToHexString(e);case"X":return this.decimalToHexString(e,!0);default:break}return(typeof e=="number"||!isNaN(e))&&!isNaN(+t)&&!n.IsNullOrWhiteSpace(e)?n.formatNumber(e,t):e},n.decimalToHexString=function(t,e){e===void 0&&(e=!1);var i=parseFloat(t),u=i.toString(16);return e?u.toLocaleUpperCase():u},n.getDisplayDateFromString=function(t){var e;if(e=t.split("-"),e.length<=1)return t;var i=e[e.length-1],u=e[e.length-2],a=e[e.length-3];return i=i.split("T")[0],i=i.split(" ")[0],i+"."+u+"."+a},n.getSortableDateFromString=function(t){var e=t.replace(",","").split(".");if(e.length<=1)return t;var i=e[e.length-1].split(" "),u=n.Empty;i.length>1&&(u=i[i.length-1]);var a=e[e.length-1].split(" ")[0],l=e[e.length-2],h=e[e.length-3],f=a+"-"+l+"-"+h;return!n.IsNullOrWhiteSpace(u)&&u.length>1?f+="T"+u:f+="T00:00:00",f},n.formatNumber=function(t,e){var i=e.length,u=t.toString();if(i<=u.length)return u;var a=i-u.length;return a+=1,new Array(a).join("0")+u},n.join=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var u=n.Empty,a=0;a<e.length;a++)if(!(typeof e[a]=="string"&&n.IsNullOrWhiteSpace(e[a])||typeof e[a]!="number"&&typeof e[a]!="string")){var l=""+e[a];u+=l;for(var h=a+1;h<e.length;h++)if(!n.IsNullOrWhiteSpace(e[h])){u+=t,a=h-1;break}}return u},n.regexNumber=/{(\d+(:\w*)?)}/g,n.regexObject=/{(\w+(:\w*)?)}/g,n.Empty="",n}();rt.String=Ot;var Qs=function(){function n(t){this.Values=[],Ot.IsNullOrWhiteSpace(t)||(this.Values=new Array(t))}return n.prototype.ToString=function(){return this.Values.join("")},n.prototype.Append=function(t){this.Values.push(t)},n.prototype.AppendLine=function(t){this.Values.push(`\r
`+t)},n.prototype.AppendFormat=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this.Values.push(Ot.Format.apply(Ot,nn([t],e)))},n.prototype.AppendLineFormat=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this.Values.push(`\r
`+Ot.Format.apply(Ot,nn([t],e)))},n.prototype.Clear=function(){this.Values=[]},n}();rt.StringBuilder=Qs});var _o=ie((ah,an)=>{an.exports=Ko;an.exports.addWheelListener=Ko;an.exports.removeWheelListener=al;function Ko(n,t,e){n.addEventListener("wheel",t,e)}function al(n,t,e){n.removeEventListener("wheel",t,e)}});var Qo=ie((sh,Xo)=>{var sl=4,ll=.001,cl=1e-7,dl=10,vr=11,sn=1/(vr-1),hl=typeof Float32Array=="function";function Ho(n,t){return 1-3*t+3*n}function Jo(n,t){return 3*t-6*n}function Zo(n){return 3*n}function ln(n,t,e){return((Ho(t,e)*n+Jo(t,e))*n+Zo(t))*n}function Yo(n,t,e){return 3*Ho(t,e)*n*n+2*Jo(t,e)*n+Zo(t)}function gl(n,t,e,i,u){var a,l,h=0;do l=t+(e-t)/2,a=ln(l,i,u)-n,a>0?e=l:t=l;while(Math.abs(a)>cl&&++h<dl);return l}function fl(n,t,e,i){for(var u=0;u<sl;++u){var a=Yo(t,e,i);if(a===0)return t;var l=ln(t,e,i)-n;t-=l/a}return t}function ml(n){return n}Xo.exports=function(t,e,i,u){if(!(0<=t&&t<=1&&0<=i&&i<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===e&&i===u)return ml;for(var a=hl?new Float32Array(vr):new Array(vr),l=0;l<vr;++l)a[l]=ln(l*sn,t,i);function h(f){for(var p=0,w=1,C=vr-1;w!==C&&a[w]<=f;++w)p+=sn;--w;var x=(f-a[w])/(a[w+1]-a[w]),N=p+x*sn,W=Yo(N,t,i);return W>=ll?fl(f,N,t,i):W===0?N:gl(f,p,p+sn,t,i)}return function(p){return p===0?0:p===1?1:ln(h(p),e,u)}}});var nu=ie((lh,cn)=>{var Cr=Qo(),eu={ease:Cr(.25,.1,.25,1),easeIn:Cr(.42,0,1,1),easeOut:Cr(0,0,.58,1),easeInOut:Cr(.42,0,.58,1),linear:Cr(0,0,1,1)};cn.exports=pl;cn.exports.makeAggregateRaf=ru;cn.exports.sharedScheduler=ru();function pl(n,t,e){var i=Object.create(null),u=Object.create(null);e=e||{};var a=typeof e.easing=="function"?e.easing:eu[e.easing];a||(e.easing&&console.warn("Unknown easing function in amator: "+e.easing),a=eu.ease);var l=typeof e.step=="function"?e.step:tu,h=typeof e.done=="function"?e.done:tu,f=El(e.scheduler),p=Object.keys(t);p.forEach(function($){i[$]=n[$],u[$]=t[$]-n[$]});var w=typeof e.duration=="number"?e.duration:400,C=Math.max(1,w*.06),x,N=0;return x=f.next(J),{cancel:W};function W(){f.cancel(x),x=0}function J(){var $=a(N/C);N+=1,ue($),N<=C?(x=f.next(J),l(n)):(x=0,setTimeout(function(){h(n)},0))}function ue($){p.forEach(function(be){n[be]=u[be]*$+i[be]})}}function tu(){}function El(n){if(!n){var t=typeof window<"u"&&window.requestAnimationFrame;return t?Al():yl()}if(typeof n.next!="function")throw new Error("Scheduler is supposed to have next(cb) function");if(typeof n.cancel!="function")throw new Error("Scheduler is supposed to have cancel(handle) function");return n}function Al(){return{next:window.requestAnimationFrame.bind(window),cancel:window.cancelAnimationFrame.bind(window)}}function yl(){return{next:function(n){return setTimeout(n,1e3/60)},cancel:function(n){return clearTimeout(n)}}}function ru(){var n=new Set,t=new Set,e=0;return{next:u,cancel:u,clearAll:i};function i(){n.clear(),t.clear(),cancelAnimationFrame(e),e=0}function u(f){t.add(f),a()}function a(){e||(e=requestAnimationFrame(l))}function l(){e=0;var f=t;t=n,n=f,n.forEach(function(p){p()}),n.clear()}function h(f){t.delete(f)}}});var ou=ie((ch,iu)=>{iu.exports=function(t){wl(t);var e=bl(t);return t.on=e.on,t.off=e.off,t.fire=e.fire,t};function bl(n){var t=Object.create(null);return{on:function(e,i,u){if(typeof i!="function")throw new Error("callback is expected to be a function");var a=t[e];return a||(a=t[e]=[]),a.push({callback:i,ctx:u}),n},off:function(e,i){var u=typeof e>"u";if(u)return t=Object.create(null),n;if(t[e]){var a=typeof i!="function";if(a)delete t[e];else for(var l=t[e],h=0;h<l.length;++h)l[h].callback===i&&l.splice(h,1)}return n},fire:function(e){var i=t[e];if(!i)return n;var u;arguments.length>1&&(u=Array.prototype.splice.call(arguments,1));for(var a=0;a<i.length;++a){var l=i[a];l.callback.apply(l.ctx,u)}return n}}}function wl(n){if(!n)throw new Error("Eventify cannot use falsy object as events subject");for(var t=["on","fire","off"],e=0;e<t.length;++e)if(n.hasOwnProperty(t[e]))throw new Error("Subject cannot be eventified, since it already has property '"+t[e]+"'")}});var au=ie((dh,uu)=>{uu.exports=vl;function vl(n,t,e){typeof e!="object"&&(e={});var i=typeof e.minVelocity=="number"?e.minVelocity:5,u=typeof e.amplitude=="number"?e.amplitude:.25,a=typeof e.cancelAnimationFrame=="function"?e.cancelAnimationFrame:Cl(),l=typeof e.requestAnimationFrame=="function"?e.requestAnimationFrame:Dl(),h,f,p=342,w,C,x,N,W,J,ue,$;return{start:R,stop:Ke,cancel:be};function be(){a(w),a($)}function R(){h=n(),N=ue=C=W=0,f=new Date,a(w),a($),w=l(Ne)}function Ne(){var ge=Date.now(),Se=ge-f;f=ge;var le=n(),ce=le.x-h.x,Te=le.y-h.y;h=le;var ae=1e3/(1+Se);C=.8*ce*ae+.2*C,W=.8*Te*ae+.2*W,w=l(Ne)}function Ke(){a(w),a($);var ge=n();x=ge.x,J=ge.y,f=Date.now(),(C<-i||C>i)&&(N=u*C,x+=N),(W<-i||W>i)&&(ue=u*W,J+=ue),$=l(Fe)}function Fe(){var ge=Date.now()-f,Se=!1,le=0,ce=0;N&&(le=-N*Math.exp(-ge/p),le>.5||le<-.5?Se=!0:le=N=0),ue&&(ce=-ue*Math.exp(-ge/p),ce>.5||ce<-.5?Se=!0:ce=ue=0),Se&&(t(x+le,J+ce),$=l(Fe))}}function Cl(){return typeof cancelAnimationFrame=="function"?cancelAnimationFrame:clearTimeout}function Dl(){return typeof requestAnimationFrame=="function"?requestAnimationFrame:function(n){return setTimeout(n,16)}}});var du=ie((hh,cu)=>{cu.exports=Fl;function Fl(n){if(n)return{capture:lu,release:lu};var t,e,i,u=!1;return{capture:a,release:l};function a(h){u=!0,e=window.document.onselectstart,i=window.document.ondragstart,window.document.onselectstart=su,t=h,t.ondragstart=su}function l(){!u||(u=!1,window.document.onselectstart=e,t&&(t.ondragstart=i))}}function su(n){return n.stopPropagation(),!1}function lu(){}});var gu=ie((gh,hu)=>{hu.exports=Sl;function Sl(){this.x=0,this.y=0,this.scale=1}});var mu=ie((fh,yi)=>{yi.exports=Bl;yi.exports.canAttach=fu;function Bl(n,t){if(!fu(n))throw new Error("svg element is required for svg.panzoom to work");var e=n.ownerSVGElement;if(!e)throw new Error("Do not apply panzoom to the root <svg> element. Use its child instead (e.g. <g></g>). As of March 2016 only FireFox supported transform on the root element");t.disableKeyboardInteraction||e.setAttribute("tabindex",0);var i={getBBox:a,getScreenCTM:l,getOwner:u,applyTransform:f,initTransform:h};return i;function u(){return e}function a(){var p=n.getBBox();return{left:p.x,top:p.y,width:p.width,height:p.height}}function l(){var p=e.getCTM();return p||e.getScreenCTM()}function h(p){var w=n.getCTM();w===null&&(w=document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGMatrix()),p.x=w.e,p.y=w.f,p.scale=w.a,e.removeAttributeNS(null,"viewBox")}function f(p){n.setAttribute("transform","matrix("+p.scale+" 0 0 "+p.scale+" "+p.x+" "+p.y+")")}}function fu(n){return n&&n.ownerSVGElement&&n.getCTM}});var Eu=ie((mh,bi)=>{bi.exports=kl;bi.exports.canAttach=pu;function kl(n,t){var e=pu(n);if(!e)throw new Error("panzoom requires DOM element to be attached to the DOM tree");var i=n.parentElement;n.scrollTop=0,t.disableKeyboardInteraction||i.setAttribute("tabindex",0);var u={getBBox:l,getOwner:a,applyTransform:h};return u;function a(){return i}function l(){return{left:0,top:0,width:n.clientWidth,height:n.clientHeight}}function h(f){n.style.transformOrigin="0 0 0",n.style.transform="matrix("+f.scale+", 0, 0, "+f.scale+", "+f.x+", "+f.y+")"}}function pu(n){return n&&n.parentElement&&n.style}});var ku=ie((ph,Bu)=>{"use strict";var Au=_o(),wi=nu(),xl=ou(),Pl=au(),Fu=du(),Gl=Fu(),Il=Fu(!0),Nl=gu(),yu=mu(),bu=Eu(),Tl=1,Rl=1.75,wu=300,vu=200;Bu.exports=Su;function Su(n,t){t=t||{};var e=t.controller;if(e||(yu.canAttach(n)?e=yu(n,t):bu.canAttach(n)&&(e=bu(n,t))),!e)throw new Error("Cannot create panzoom for the current type of dom element");var i=e.getOwner(),u={x:0,y:0},a=!1,l=new Nl;e.initTransform&&e.initTransform(l);var h=typeof t.filterKey=="function"?t.filterKey:Vt,f=typeof t.pinchSpeed=="number"?t.pinchSpeed:1,p=t.bounds,w=typeof t.maxZoom=="number"?t.maxZoom:Number.POSITIVE_INFINITY,C=typeof t.minZoom=="number"?t.minZoom:0,x=typeof t.boundsPadding=="number"?t.boundsPadding:.05,N=typeof t.zoomDoubleClickSpeed=="number"?t.zoomDoubleClickSpeed:Rl,W=t.beforeWheel||Vt,J=t.beforeMouseDown||Vt,ue=typeof t.zoomSpeed=="number"?t.zoomSpeed:Tl,$=Cu(t.transformOrigin),be=t.enableTextSelection?Il:Gl;Ol(p),t.autocenter&&Kt();var R,Ne=0,Ke=0,Fe=0,ge=null,Se=new Date,le,ce=!1,Te=!1,ae,he,jt,$t,Ut,fe;"smoothScroll"in t&&!t.smoothScroll?fe=Ml():fe=Pl(Sr,xn,t.smoothScroll);var qt,it,Et,At=!1;kr();var ot={dispose:Pn,moveBy:Re,moveTo:_t,smoothMoveTo:kn,centerOn:Bn,zoomTo:Le,zoomAbs:yt,smoothZoom:_e,smoothZoomAbs:Or,showRectangle:mn,pause:hn,resume:gn,isPaused:fn,getTransform:pn,getMinZoom:En,setMinZoom:An,getMaxZoom:yn,setMaxZoom:bn,getTransformOrigin:wn,setTransformOrigin:vn,getZoomSpeed:Cn,setZoomSpeed:Dn};xl(ot);var Dr=typeof t.initialX=="number"?t.initialX:l.x,zt=typeof t.initialY=="number"?t.initialY:l.y,Fr=typeof t.initialZoom=="number"?t.initialZoom:l.scale;return(Dr!=l.x||zt!=l.y||Fr!=l.scale)&&yt(Dr,zt,Fr),ot;function hn(){xr(),At=!0}function gn(){At&&(kr(),At=!1)}function fn(){return At}function mn(A){var B=i.getBoundingClientRect(),k=Ce(B.width,B.height),P=A.right-A.left,j=A.bottom-A.top;if(!Number.isFinite(P)||!Number.isFinite(j))throw new Error("Invalid rectangle");var U=k.x/P,q=k.y/j,ne=Math.min(U,q);l.x=-(A.left+P/2)*ne+k.x/2,l.y=-(A.top+j/2)*ne+k.y/2,l.scale=ne}function Ce(A,B){if(e.getScreenCTM){var k=e.getScreenCTM(),P=k.a,j=k.d,U=k.e,q=k.f;u.x=A*P-U,u.y=B*j-q}else u.x=A,u.y=B;return u}function Kt(){var A,B,k=0,P=0,j=Jt();if(j)k=j.left,P=j.top,A=j.right-j.left,B=j.bottom-j.top;else{var U=i.getBoundingClientRect();A=U.width,B=U.height}var q=e.getBBox();if(!(q.width===0||q.height===0)){var ne=B/q.height,Je=A/q.width,Ve=Math.min(Je,ne);l.x=-(q.left+q.width/2)*Ve+A/2+k,l.y=-(q.top+q.height/2)*Ve+B/2+P,l.scale=Ve}}function pn(){return l}function En(){return C}function An(A){C=A}function yn(){return w}function bn(A){w=A}function wn(){return $}function vn(A){$=Cu(A)}function Cn(){return ue}function Dn(A){if(!Number.isFinite(A))throw new Error("Zoom speed should be a number");ue=A}function Sr(){return{x:l.x,y:l.y}}function _t(A,B){l.x=A,l.y=B,Ht(),He("pan"),Zt()}function Br(A,B){_t(l.x+A,l.y+B)}function Ht(){var A=Jt();if(!!A){var B=!1,k=Fn(),P=A.left-k.right;return P>0&&(l.x+=P,B=!0),P=A.right-k.left,P<0&&(l.x+=P,B=!0),P=A.top-k.bottom,P>0&&(l.y+=P,B=!0),P=A.bottom-k.top,P<0&&(l.y+=P,B=!0),B}}function Jt(){if(!!p){if(typeof p=="boolean"){var A=i.getBoundingClientRect(),B=A.width,k=A.height;return{left:B*x,top:k*x,right:B*(1-x),bottom:k*(1-x)}}return p}}function Fn(){var A=e.getBBox(),B=Sn(A.left,A.top);return{left:B.x,top:B.y,right:A.width*l.scale+B.x,bottom:A.height*l.scale+B.y}}function Sn(A,B){return{x:A*l.scale+l.x,y:B*l.scale+l.y}}function Zt(){a=!0,R=window.requestAnimationFrame(Gn)}function Yt(A,B,k){if(vi(A)||vi(B)||vi(k))throw new Error("zoom requires valid numbers");var P=l.scale*k;if(P<C){if(l.scale===C)return;k=C/l.scale}if(P>w){if(l.scale===w)return;k=w/l.scale}var j=Ce(A,B);if(l.x=j.x-k*(j.x-l.x),l.y=j.y-k*(j.y-l.y),p&&x===1&&C===1)l.scale*=k,Ht();else{var U=Ht();U||(l.scale*=k)}He("zoom"),Zt()}function yt(A,B,k){var P=k/l.scale;Yt(A,B,P)}function Bn(A){var B=A.ownerSVGElement;if(!B)throw new Error("ui element is required to be within the scene");var k=A.getBoundingClientRect(),P=k.left+k.width/2,j=k.top+k.height/2,U=B.getBoundingClientRect(),q=U.width/2-P,ne=U.height/2-j;Re(q,ne,!0)}function kn(A,B){Re(A-l.x,B-l.y,!0)}function Re(A,B,k){if(!k)return Br(A,B);qt&&qt.cancel();var P={x:0,y:0},j={x:A,y:B},U=0,q=0;qt=wi(P,j,{step:function(ne){Br(ne.x-U,ne.y-q),U=ne.x,q=ne.y}})}function xn(A,B){We(),_t(A,B)}function Pn(){xr()}function kr(){i.addEventListener("mousedown",Ct,{passive:!1}),i.addEventListener("dblclick",vt,{passive:!1}),i.addEventListener("touchstart",Gr,{passive:!1}),i.addEventListener("keydown",Pr,{passive:!1}),Au.addWheelListener(i,Rr,{passive:!1}),Zt()}function xr(){Au.removeWheelListener(i,Rr),i.removeEventListener("mousedown",Ct),i.removeEventListener("keydown",Pr),i.removeEventListener("dblclick",vt),i.removeEventListener("touchstart",Gr),R&&(window.cancelAnimationFrame(R),R=0),fe.cancel(),me(),Me(),be.release(),er()}function Gn(){a&&In()}function In(){a=!1,e.applyTransform(l),He("transform"),R=0}function Pr(A){var B=0,k=0,P=0;if(A.keyCode===38?k=1:A.keyCode===40?k=-1:A.keyCode===37?B=1:A.keyCode===39?B=-1:A.keyCode===189||A.keyCode===109?P=1:(A.keyCode===187||A.keyCode===107)&&(P=-1),!h(A,B,k,P)){if(B||k){A.preventDefault(),A.stopPropagation();var j=i.getBoundingClientRect(),U=Math.min(j.width,j.height),q=.05,ne=U*q*B,Je=U*q*k;Re(ne,Je)}if(P){var Ve=Mr(P*100),U=$?ut():Nn();Le(U.x,U.y,Ve)}}}function Nn(){var A=i.getBoundingClientRect();return{x:A.width/2,y:A.height/2}}function Gr(A){if(Tn(A),we(),A.touches.length===1)return Ir(A,A.touches[0]);A.touches.length===2&&(Ut=wt(A.touches[0],A.touches[1]),Et=!0,Xt())}function Tn(A){t.onTouch&&!t.onTouch(A)||(A.stopPropagation(),A.preventDefault())}function Rn(A){we(),!(t.onDoubleClick&&!t.onDoubleClick(A))&&(A.preventDefault(),A.stopPropagation())}function Ir(A){Ke=new Date;var B=A.touches[0],k=pe(B);le=k;var P=Ce(k.x,k.y);ae=P.x,he=P.y,jt=ae,$t=he,fe.cancel(),Xt()}function Xt(){ce||(ce=!0,document.addEventListener("touchmove",Oe),document.addEventListener("touchend",bt),document.addEventListener("touchcancel",bt))}function Oe(A){if(A.touches.length===1){A.stopPropagation();var B=A.touches[0],k=pe(B),P=Ce(k.x,k.y),j=P.x-ae,U=P.y-he;j!==0&&U!==0&&Qt(),ae=P.x,he=P.y,Re(j,U)}else if(A.touches.length===2){Et=!0;var q=A.touches[0],ne=A.touches[1],Je=wt(q,ne),Ve=1+(Je/Ut-1)*f,Lr=pe(q),Wr=pe(ne);if(ae=(Lr.x+Wr.x)/2,he=(Lr.y+Wr.y)/2,$){var k=ut();ae=k.x,he=k.y}Le(ae,he,Ve),Ut=Je,A.stopPropagation(),A.preventDefault()}}function we(){Fe&&(clearTimeout(Fe),Fe=0)}function Nr(A){if(!!t.onClick){we();var B=ae-jt,k=he-$t,P=Math.sqrt(B*B+k*k);P>5||(Fe=setTimeout(function(){Fe=0,t.onClick(A)},wu))}}function bt(A){if(we(),A.touches.length>0){var B=pe(A.touches[0]),k=Ce(B.x,B.y);ae=k.x,he=k.y}else{var P=new Date;if(P-Ne<wu)if($){var B=ut();_e(B.x,B.y,N)}else _e(le.x,le.y,N);else P-Ke<vu&&Nr(A);Ne=P,er(),Me()}}function wt(A,B){var k=A.clientX-B.clientX,P=A.clientY-B.clientY;return Math.sqrt(k*k+P*P)}function vt(A){Rn(A);var B=pe(A);$&&(B=ut()),_e(B.x,B.y,N)}function Ct(A){if(we(),!J(A)){if(ge=A,Se=new Date,ce)return A.stopPropagation(),!1;var B=A.button===1&&window.event!==null||A.button===0;if(!!B){fe.cancel();var k=pe(A),P=Ce(k.x,k.y);return jt=ae=P.x,$t=he=P.y,document.addEventListener("mousemove",Dt),document.addEventListener("mouseup",Tr),be.capture(A.target||A.srcElement),!1}}}function Dt(A){if(!ce){Qt();var B=pe(A),k=Ce(B.x,B.y),P=k.x-ae,j=k.y-he;ae=k.x,he=k.y,Re(P,j)}}function Tr(){var A=new Date;A-Se<vu&&Nr(ge),be.release(),er(),me()}function me(){document.removeEventListener("mousemove",Dt),document.removeEventListener("mouseup",Tr),Te=!1}function Me(){document.removeEventListener("touchmove",Oe),document.removeEventListener("touchend",bt),document.removeEventListener("touchcancel",bt),Te=!1,Et=!1,ce=!1}function Rr(A){if(!W(A)){fe.cancel();var B=A.deltaY;A.deltaMode>0&&(B*=100);var k=Mr(B);if(k!==1){var P=$?ut():pe(A);Le(P.x,P.y,k),A.preventDefault()}}}function pe(A){var B,k,P=i.getBoundingClientRect();return B=A.clientX-P.left,k=A.clientY-P.top,{x:B,y:k}}function _e(A,B,k){var P=l.scale,j={scale:P},U={scale:k*P};fe.cancel(),We(),it=wi(j,U,{step:function(q){yt(A,B,q.scale)},done:On})}function Or(A,B,k){var P=l.scale,j={scale:P},U={scale:k};fe.cancel(),We(),it=wi(j,U,{step:function(q){yt(A,B,q.scale)}})}function ut(){var A=i.getBoundingClientRect();return{x:A.width*$.x,y:A.height*$.y}}function Le(A,B,k){return fe.cancel(),We(),Yt(A,B,k)}function We(){it&&(it.cancel(),it=null)}function Mr(A){var B=Math.sign(A),k=Math.min(.25,Math.abs(ue*A/128));return 1-B*k}function Qt(){Te||(He("panstart"),Te=!0,fe.start())}function er(){Te&&(Et||fe.stop(),He("panend"))}function On(){He("zoomend")}function He(A){ot.fire(A,ot)}}function Cu(n){if(!!n){if(typeof n=="object")return(!Wt(n.x)||!Wt(n.y))&&Du(n),n;Du()}}function Du(n){throw console.error(n),new Error(["Cannot parse transform origin.","Some good examples:",'  "center center" can be achieved with {x: 0.5, y: 0.5}','  "top center" can be achieved with {x: 0.5, y: 0}','  "bottom right" can be achieved with {x: 1, y: 1}'].join(`
`))}function Vt(){}function Ol(n){var t=typeof n;if(!(t==="undefined"||t==="boolean")){var e=Wt(n.left)&&Wt(n.top)&&Wt(n.bottom)&&Wt(n.right);if(!e)throw new Error("Bounds object is not valid. It can be: undefined, boolean (true|false) or an object {left, top, right, bottom}")}}function Wt(n){return Number.isFinite(n)}function vi(n){return Number.isNaN?Number.isNaN(n):n!==n}function Ml(){return{start:Vt,stop:Vt,cancel:Vt}}function Ll(){if(typeof document>"u")return;var n=document.getElementsByTagName("script");if(!n)return;for(var t,e=0;e<n.length;++e){var i=n[e];if(i.src&&i.src.match(/\bpanzoom(\.min)?\.js/)){t=i;break}}if(!t)return;var u=t.getAttribute("query");if(!u)return;var a=t.getAttribute("name")||"pz",l=Date.now();h();function h(){var w=document.querySelector(u);if(!w){var C=Date.now(),x=C-l;if(x<2e3){setTimeout(h,100);return}console.error("Cannot find the panzoom element",a);return}var N=f(t);console.log(N),window[a]=Su(w,N)}function f(w){for(var C=w.attributes,x={},N=0;N<C.length;++N){var W=C[N],J=p(W);J&&(x[J.name]=J.value)}return x}function p(w){if(!!w.name){var C=w.name[0]==="p"&&w.name[1]==="z"&&w.name[2]==="-";if(!!C){var x=w.name.substr(3),N=JSON.parse(w.value);return{name:x,value:N}}}}}Ll()});var Ci={};Oa(Ci,{RendererSvg:()=>dn});var Ze=(R=>(R[R.normal=0]="normal",R[R.inv=1]="inv",R[R.dot=2]="dot",R[R.invdot=3]="invdot",R[R.odot=4]="odot",R[R.invodot=5]="invodot",R[R.none=6]="none",R[R.tee=7]="tee",R[R.empty=8]="empty",R[R.invempty=9]="invempty",R[R.diamond=10]="diamond",R[R.odiamond=11]="odiamond",R[R.ediamond=12]="ediamond",R[R.crow=13]="crow",R[R.box=14]="box",R[R.obox=15]="obox",R[R.open=16]="open",R[R.halfopen=17]="halfopen",R[R.vee=18]="vee",R))(Ze||{});var rr=(p=>(p[p.none=0]="none",p[p.dashed=1]="dashed",p[p.solid=2]="solid",p[p.invis=3]="invis",p[p.bold=4]="bold",p[p.filled=5]="filled",p[p.diagonals=6]="diagonals",p[p.dotted=7]="dotted",p[p.rounded=8]="rounded",p))(rr||{});var d=class{static mkWithKeyword(t,e,i,u,a){let l=new d(t,e,i,u);return l.keyword=a,l}static parse(t){switch(t.toLowerCase()){case"aliceblue":return d.AliceBlue;case"antiquewhite":return d.AntiqueWhite;case"aqua":return d.Aqua;case"aquamarine":return d.Aquamarine;case"azure":return d.Azure;case"beige":return d.Beige;case"bisque":return d.Bisque;case"black":return d.Black;case"blanchedalmond":return d.BlanchedAlmond;case"blue":return d.Blue;case"blueviolet":return d.BlueViolet;case"brown":return d.Brown;case"burlywood":return d.BurlyWood;case"cadetblue":return d.CadetBlue;case"chartreuse":return d.Chartreuse;case"chocolate":return d.Chocolate;case"coral":return d.Coral;case"cornflowerblue":return d.CornflowerBlue;case"cornsilk":return d.Cornsilk;case"crimson":return d.Crimson;case"cyan":return d.Cyan;case"darkblue":return d.DarkBlue;case"darkcyan":return d.DarkCyan;case"darkgoldenrod":return d.DarkGoldenrod;case"darkgray":return d.DarkGray;case"darkgreen":return d.DarkGreen;case"darkkhaki":return d.DarkKhaki;case"darkmagenta":return d.DarkMagenta;case"darkolivegreen":return d.DarkOliveGreen;case"darkorange":return d.DarkOrange;case"darkorchid":return d.DarkOrchid;case"darkred":return d.DarkRed;case"darksalmon":return d.DarkSalmon;case"darkseagreen":return d.DarkSeaGreen;case"darkslateblue":return d.DarkSlateBlue;case"darkslategray":return d.DarkSlateGray;case"darkturquoise":return d.DarkTurquoise;case"darkviolet":return d.DarkViolet;case"deeppink":return d.DeepPink;case"deepskyblue":return d.DeepSkyBlue;case"dimgray":return d.DimGray;case"dodgerblue":return d.DodgerBlue;case"firebrick":return d.Firebrick;case"floralwhite":return d.FloralWhite;case"forestgreen":return d.ForestGreen;case"fuchsia":return d.Fuchsia;case"gainsboro":return d.Gainsboro;case"ghostwhite":return d.GhostWhite;case"gold":return d.Gold;case"goldenrod":return d.Goldenrod;case"gray":return d.Gray;case"green":return d.Green;case"greenyellow":return d.GreenYellow;case"honeydew":return d.Honeydew;case"hotpink":return d.HotPink;case"indianred":return d.IndianRed;case"indigo":return d.Indigo;case"ivory":return d.Ivory;case"khaki":return d.Khaki;case"lavender":return d.Lavender;case"lavenderblush":return d.LavenderBlush;case"lawngreen":return d.LawnGreen;case"lemonchiffon":return d.LemonChiffon;case"lightblue":return d.LightBlue;case"lightcoral":return d.LightCoral;case"lightcyan":return d.LightCyan;case"lightgoldenrodyellow":return d.LightGoldenrodYellow;case"lightgray":case"lightgrey":return d.LightGray;case"lightgreen":return d.LightGreen;case"lightpink":return d.LightPink;case"lightsalmon":return d.LightSalmon;case"lightseagreen":return d.LightSeaGreen;case"lightskyblue":return d.LightSkyBlue;case"lightslategray":return d.LightSlateGray;case"lightsteelblue":return d.LightSteelBlue;case"lightyellow":return d.LightYellow;case"lime":return d.Lime;case"limegreen":return d.LimeGreen;case"linen":return d.Linen;case"magenta":return d.Magenta;case"maroon":return d.Maroon;case"mediumaquamarine":return d.MediumAquamarine;case"mediumblue":return d.MediumBlue;case"mediumorchid":return d.MediumOrchid;case"mediumpurple":return d.MediumPurple;case"mediumseagreen":return d.MediumSeaGreen;case"mediumslateblue":return d.MediumSlateBlue;case"mediumspringgreen":return d.MediumSpringGreen;case"mediumturquoise":return d.MediumTurquoise;case"mediumvioletred":return d.MediumVioletRed;case"midnightblue":return d.MidnightBlue;case"mintcream":return d.MintCream;case"mistyrose":return d.MistyRose;case"moccasin":return d.Moccasin;case"navajowhite":return d.NavajoWhite;case"navy":return d.Navy;case"oldlace":return d.OldLace;case"olive":return d.Olive;case"olivedrab":return d.OliveDrab;case"orange":return d.Orange;case"orangered":return d.OrangeRed;case"orchid":return d.Orchid;case"palegoldenrod":return d.PaleGoldenrod;case"palegreen":return d.PaleGreen;case"paleturquoise":return d.PaleTurquoise;case"palevioletred":return d.PaleVioletRed;case"papayawhip":return d.PapayaWhip;case"peachpuff":return d.PeachPuff;case"peru":return d.Peru;case"pink":return d.Pink;case"plum":return d.Plum;case"powderblue":return d.PowderBlue;case"purple":return d.Purple;case"red":return d.Red;case"rosybrown":return d.RosyBrown;case"royalblue":return d.RoyalBlue;case"saddlebrown":return d.SaddleBrown;case"salmon":return d.Salmon;case"sandybrown":return d.SandyBrown;case"seagreen":return d.SeaGreen;case"seashell":return d.SeaShell;case"sienna":return d.Sienna;case"silver":return d.Silver;case"skyblue":return d.SkyBlue;case"slateblue":return d.SlateBlue;case"slategray":return d.SlateGray;case"snow":return d.Snow;case"springgreen":return d.SpringGreen;case"steelblue":return d.SteelBlue;case"tan":return d.Tan;case"teal":return d.Teal;case"thistle":return d.Thistle;case"tomato":return d.Tomato;case"transparent":return d.Transparent;case"turquoise":return d.Turquoise;case"violet":return d.Violet;case"wheat":return d.Wheat;case"white":return d.White;case"whitesmoke":return d.WhiteSmoke;case"yellow":return d.Yellow;case"yellowgreen":return d.YellowGreen;default:return}}get keyword(){return this.keyword_}set keyword(t){this.keyword_=t}constructor(t,e,i,u){this.a=t,this.r=e,this.g=i,this.b=u}static mkRGB(t,e,i){return new d(255,t,e,i)}get A(){return this.a}set A(t){this.a=t}get R(){return this.r}set R(t){this.r=t}get G(){return this.g}set G(t){this.g=t}get B(){return this.b}set B(t){this.b=t}static Xex(t){let e=t.toString(16);return e.length===1?"0"+e:e.substring(e.length-2,2)}static equal(t,e){return t.a===e.a&&t.r===e.r&&t.b===e.b&&t.g===e.g}toString(){return this.keyword?this.keyword:'"#'+d.Xex(this.R)+d.Xex(this.G)+d.Xex(this.B)+(this.A===255?"":d.Xex(this.A))+'"'}static get AliceBlue(){return d.mkWithKeyword(255,240,248,255,"aliceblue")}static get AntiqueWhite(){return d.mkWithKeyword(255,250,235,215,"antiquewhite")}static get Aqua(){return d.mkWithKeyword(255,0,255,255,"aqua")}static get Aquamarine(){return d.mkWithKeyword(255,127,255,212,"aquamarine")}static get Azure(){return d.mkWithKeyword(255,240,255,255,"azure")}static get Beige(){return d.mkWithKeyword(255,245,245,220,"beige")}static get Bisque(){return d.mkWithKeyword(255,255,228,196,"bisque")}static get Black(){return d.mkWithKeyword(255,0,0,0,"black")}static get BlanchedAlmond(){return d.mkWithKeyword(255,255,235,205,"blanchedalmond")}static get Blue(){return d.mkWithKeyword(255,0,0,255,"blue")}static get BlueViolet(){return d.mkWithKeyword(255,138,43,226,"blueviolet")}static get Brown(){return d.mkWithKeyword(255,165,42,42,"brown")}static get BurlyWood(){return d.mkWithKeyword(255,222,184,135,"burlywood")}static get CadetBlue(){return d.mkWithKeyword(255,95,158,160,"cadetblue")}static get Chartreuse(){return d.mkWithKeyword(255,127,255,0,"chartreuse")}static get Chocolate(){return d.mkWithKeyword(255,210,105,30,"chocolate")}static get Coral(){return d.mkWithKeyword(255,255,127,80,"coral")}static get CornflowerBlue(){return d.mkWithKeyword(255,100,149,237,"cornflowerblue")}static get Cornsilk(){return d.mkWithKeyword(255,255,248,220,"cornsilk")}static get Crimson(){return d.mkWithKeyword(255,220,20,60,"crimson")}static get Cyan(){return d.mkWithKeyword(255,0,255,255,"cyan")}static get DarkBlue(){return d.mkWithKeyword(255,0,0,139,"darkblue")}static get DarkCyan(){return d.mkWithKeyword(255,0,139,139,"darkcyan")}static get DarkGoldenrod(){return d.mkWithKeyword(255,184,134,11,"darkgoldenrod")}static get DarkGray(){return d.mkWithKeyword(255,169,169,169,"darkgray")}static get DarkGreen(){return d.mkWithKeyword(255,0,100,0,"darkgreen")}static get DarkKhaki(){return d.mkWithKeyword(255,189,183,107,"darkkhaki")}static get DarkMagenta(){return d.mkWithKeyword(255,139,0,139,"darkmagenta")}static get DarkOliveGreen(){return d.mkWithKeyword(255,85,107,47,"darkolivegreen")}static get DarkOrange(){return d.mkWithKeyword(255,255,140,0,"darkorange")}static get DarkOrchid(){return d.mkWithKeyword(255,153,50,204,"darkorchid")}static get DarkRed(){return d.mkWithKeyword(255,139,0,0,"darkred")}static get DarkSalmon(){return d.mkWithKeyword(255,233,150,122,"darksalmon")}static get DarkSeaGreen(){return d.mkWithKeyword(255,143,188,139,"darkseagreen")}static get DarkSlateBlue(){return d.mkWithKeyword(255,72,61,139,"darkslateblue")}static get DarkSlateGray(){return d.mkWithKeyword(255,47,79,79,"darkslategray")}static get DarkTurquoise(){return d.mkWithKeyword(255,0,206,209,"darkturquoise")}static get DarkViolet(){return d.mkWithKeyword(255,148,0,211,"darkviolet")}static get DeepPink(){return d.mkWithKeyword(255,255,20,147,"deeppink")}static get DeepSkyBlue(){return d.mkWithKeyword(255,0,191,255,"deepskyblue")}static get DimGray(){return d.mkWithKeyword(255,105,105,105,"dimgray")}static get DodgerBlue(){return d.mkWithKeyword(255,30,144,255,"dodgerblue")}static get Firebrick(){return d.mkWithKeyword(255,178,34,34,"firebrick")}static get FloralWhite(){return d.mkWithKeyword(255,255,250,240,"floralwhite")}static get ForestGreen(){return d.mkWithKeyword(255,34,139,34,"forestgreen")}static get Fuchsia(){return d.mkWithKeyword(255,255,0,255,"fuchsia")}static get Gainsboro(){return d.mkWithKeyword(255,220,220,220,"gainsboro")}static get GhostWhite(){return d.mkWithKeyword(255,248,248,255,"ghostwhite")}static get Gold(){return d.mkWithKeyword(255,255,215,0,"gold")}static get Goldenrod(){return d.mkWithKeyword(255,218,165,32,"goldenrod")}static get Gray(){return d.mkWithKeyword(255,128,128,128,"gray")}static get Green(){return d.mkWithKeyword(255,0,128,0,"green")}static get GreenYellow(){return d.mkWithKeyword(255,173,255,47,"greenyellow")}static get Honeydew(){return d.mkWithKeyword(255,240,255,240,"honeydew")}static get HotPink(){return d.mkWithKeyword(255,255,105,180,"hotpink")}static get IndianRed(){return d.mkWithKeyword(255,205,92,92,"indianred")}static get Indigo(){return d.mkWithKeyword(255,75,0,130,"indigo")}static get Ivory(){return d.mkWithKeyword(255,255,255,240,"ivory")}static get Khaki(){return d.mkWithKeyword(255,240,230,140,"khaki")}static get Lavender(){return d.mkWithKeyword(255,230,230,250,"lavender")}static get LavenderBlush(){return d.mkWithKeyword(255,255,240,245,"lavenderblush")}static get LawnGreen(){return d.mkWithKeyword(255,124,252,0,"lawngreen")}static get LemonChiffon(){return d.mkWithKeyword(255,255,250,205,"lemonchiffon")}static get LightBlue(){return d.mkWithKeyword(255,173,216,230,"lightblue")}static get LightCoral(){return d.mkWithKeyword(255,240,128,128,"lightcoral")}static get LightCyan(){return d.mkWithKeyword(255,224,255,255,"lightcyan")}static get LightGoldenrodYellow(){return d.mkWithKeyword(255,250,250,210,"lightgoldenrodyellow")}static get LightGray(){return d.mkWithKeyword(255,211,211,211,"lightgray")}static get LightGreen(){return d.mkWithKeyword(255,144,238,144,"lightgreen")}static get LightPink(){return d.mkWithKeyword(255,255,182,193,"lightpink")}static get LightSalmon(){return d.mkWithKeyword(255,255,160,122,"lightsalmon")}static get LightSeaGreen(){return d.mkWithKeyword(255,32,178,170,"lightseagreen")}static get LightSkyBlue(){return d.mkWithKeyword(255,135,206,250,"lightskyblue")}static get LightSlateGray(){return d.mkWithKeyword(255,119,136,153,"lightslategray")}static get LightSteelBlue(){return d.mkWithKeyword(255,176,196,222,"lightsteelblue")}static get LightYellow(){return d.mkWithKeyword(255,255,255,224,"lightyellow")}static get Lime(){return d.mkWithKeyword(255,0,255,0,"lime")}static get LimeGreen(){return d.mkWithKeyword(255,50,205,50,"limegreen")}static get Linen(){return d.mkWithKeyword(255,250,240,230,"linen")}static get Magenta(){return d.mkWithKeyword(255,255,0,255,"magenta")}static get Maroon(){return d.mkWithKeyword(255,128,0,0,"maroon")}static get MediumAquamarine(){return d.mkWithKeyword(255,102,205,170,"mediumaquamarine")}static get MediumBlue(){return d.mkWithKeyword(255,0,0,205,"mediumblue")}static get MediumOrchid(){return d.mkWithKeyword(255,186,85,211,"mediumorchid")}static get MediumPurple(){return d.mkWithKeyword(255,147,112,219,"mediumpurple")}static get MediumSeaGreen(){return d.mkWithKeyword(255,60,179,113,"mediumseagreen")}static get MediumSlateBlue(){return d.mkWithKeyword(255,123,104,238,"mediumslateblue")}static get MediumSpringGreen(){return d.mkWithKeyword(255,0,250,154,"mediumspringgreen")}static get MediumTurquoise(){return d.mkWithKeyword(255,72,209,204,"mediumturquoise")}static get MediumVioletRed(){return d.mkWithKeyword(255,199,21,133,"mediumvioletred")}static get MidnightBlue(){return d.mkWithKeyword(255,25,25,112,"midnightblue")}static get MintCream(){return d.mkWithKeyword(255,245,255,250,"mintcream")}static get MistyRose(){return d.mkWithKeyword(255,255,228,225,"mistyrose")}static get Moccasin(){return d.mkWithKeyword(255,255,228,181,"moccasin")}static get NavajoWhite(){return d.mkWithKeyword(255,255,222,173,"navajowhite")}static get Navy(){return d.mkWithKeyword(255,0,0,128,"navy")}static get OldLace(){return d.mkWithKeyword(255,253,245,230,"oldlace")}static get Olive(){return d.mkWithKeyword(255,128,128,0,"olive")}static get OliveDrab(){return d.mkWithKeyword(255,107,142,35,"olivedrab")}static get Orange(){return d.mkWithKeyword(255,255,165,0,"orange")}static get OrangeRed(){return d.mkWithKeyword(255,255,69,0,"orangered")}static get Orchid(){return d.mkWithKeyword(255,218,112,214,"orchid")}static get PaleGoldenrod(){return d.mkWithKeyword(255,238,232,170,"palegoldenrod")}static get PaleGreen(){return d.mkWithKeyword(255,152,251,152,"palegreen")}static get PaleTurquoise(){return d.mkWithKeyword(255,175,238,238,"paleturquoise")}static get PaleVioletRed(){return d.mkWithKeyword(255,219,112,147,"palevioletred")}static get PapayaWhip(){return d.mkWithKeyword(255,255,239,213,"papayawhip")}static get PeachPuff(){return d.mkWithKeyword(255,255,218,185,"peachpuff")}static get Peru(){return d.mkWithKeyword(255,205,133,63,"peru")}static get Pink(){return d.mkWithKeyword(255,255,192,203,"pink")}static get Plum(){return d.mkWithKeyword(255,221,160,221,"plum")}static get PowderBlue(){return d.mkWithKeyword(255,176,224,230,"powderblue")}static get Purple(){return d.mkWithKeyword(255,128,0,128,"purple")}static get Red(){return d.mkWithKeyword(255,255,0,0,"red")}static get RosyBrown(){return d.mkWithKeyword(255,188,143,143,"rosybrown")}static get RoyalBlue(){return d.mkWithKeyword(255,65,105,225,"royalblue")}static get SaddleBrown(){return d.mkWithKeyword(255,139,69,19,"saddlebrown")}static get Salmon(){return d.mkWithKeyword(255,250,128,114,"salmon")}static get SandyBrown(){return d.mkWithKeyword(255,244,164,96,"sandybrown")}static get SeaGreen(){return d.mkWithKeyword(255,46,139,87,"seagreen")}static get SeaShell(){return d.mkWithKeyword(255,255,245,238,"seashell")}static get Sienna(){return d.mkWithKeyword(255,160,82,45,"sienna")}static get Silver(){return d.mkWithKeyword(255,192,192,192,"silver")}static get SkyBlue(){return d.mkWithKeyword(255,135,206,235,"skyblue")}static get SlateBlue(){return d.mkWithKeyword(255,106,90,205,"slateblue")}static get SlateGray(){return d.mkWithKeyword(255,112,128,144,"slategray")}static get Snow(){return d.mkWithKeyword(255,255,250,250,"snow")}static get SpringGreen(){return d.mkWithKeyword(255,0,255,127,"springgreen")}static get SteelBlue(){return d.mkWithKeyword(255,70,130,180,"steelblue")}static get Tan(){return d.mkWithKeyword(255,210,180,140,"tan")}static get Teal(){return d.mkWithKeyword(255,0,128,128,"teal")}static get Thistle(){return d.mkWithKeyword(255,216,191,216,"thistle")}static get Tomato(){return d.mkWithKeyword(255,255,99,71,"tomato")}static get Transparent(){return d.mkWithKeyword(0,255,255,255,"transparent")}static get Turquoise(){return d.mkWithKeyword(255,64,224,208,"turquoise")}static get Violet(){return d.mkWithKeyword(255,238,130,238,"violet")}static get Wheat(){return d.mkWithKeyword(255,245,222,179,"wheat")}static get White(){return d.mkWithKeyword(255,255,255,255,"white")}static get WhiteSmoke(){return d.mkWithKeyword(255,245,245,245,"whitesmoke")}static get Yellow(){return d.mkWithKeyword(255,255,255,0,"yellow")}static get YellowGreen(){return d.mkWithKeyword(255,154,205,50,"yellowgreen")}};var L=re(se(),1);var xt=re(se(),1),kt=class extends xt.Attribute{constructor(e){super(e,xt.AttributeRegistry.DrawingObjectIndex);this.labelfontcolor=d.Black;this.styles=[];this.penwidth=1;this.fontname=kt.defaultLabelFontName,this.fontsize=kt.defaultLabelFontSize}rebind(e){this.entity=e,this.bind(xt.AttributeRegistry.DrawingObjectIndex)}static copyValidFields(e,i){e==null||i==null||(e.color&&e.color.keyword&&e.color.keyword.toLowerCase()!=="black"&&(i.color=e.color),e.fillColor&&(i.fillColor=e.fillColor),e.labelfontcolor&&e.labelfontcolor.keyword.toLowerCase()!=="black"&&(i.labelfontcolor=e.labelfontcolor),e.labelText!=null&&e.labelText!==""&&e.labelText!==e.id&&(i.labelText=e.labelText),e.fontColor&&e.fontColor.keyword&&e.fontColor.keyword.toLowerCase()!=="black"&&(i.fontColor=e.fontColor),e.styles&&e.styles.length&&(i.styles=e.styles.map(u=>u)),e.pencolor&&e.pencolor.keyword!=="black"&&(i.pencolor=e.pencolor),e.penwidth&&e.penwidth!==1&&(i.penwidth=e.penwidth),e.rankdir&&(i.rankdir=e.rankdir),e.fontname&&e.fontname!==kt.defaultLabelFontName&&(i.fontname=e.fontname),e.margin&&(i.margin=e.margin),e.fontsize&&e.fontsize!==kt.defaultLabelFontSize&&(i.fontsize=e.fontsize),e.orientation&&(i.orientation=e.orientation),e.ranksep&&(i.ranksep=e.ranksep),e.arrowtail&&(i.arrowtail=e.arrowtail),e.arrowhead&&(i.arrowhead=e.arrowhead),e.ordering&&(i.ordering=e.ordering),e.bgcolor&&(i.bgcolor=e.bgcolor),e.pos&&(i.pos=e.pos),e.nodesep&&(i.nodesep=e.nodesep),e.arrowsize&&(i.arrowsize=e.arrowsize),e.samehead&&(i.samehead=e.samehead),e.layersep&&(i.layersep=e.layersep),e.clusterRank&&(i.clusterRank=e.clusterRank))}get labelText(){return this._labelText}set labelText(e){this._labelText=e}get arrowhead(){return this._arrowhead}set arrowhead(e){this._arrowhead=e}get id(){return this._id}set id(e){this._id=e}static getDrawingObj(e){return e==null?null:e.getAttr(xt.AttributeRegistry.DrawingObjectIndex)}},_=kt;_.defaultLabelFontName="Times-Roman",_.defaultLabelFontSize=12;var Ur=class extends _{constructor(e){super(e);this.shape=2;this.padding=2;this.xRad=3;this.yRad=3;this.labelMargin=1;this.labelWidthToHeightRatio=1;e!=null&&(this.labelText=e.id)}clone(){throw new Error("Method not implemented.")}get Padding(){return this.padding}set Padding(e){this.padding=Math.max(0,e)}get XRadius(){return this.xRad}set XRadius(e){this.xRad=e}get YRadius(){return this.yRad}set YRadius(e){this.yRad=e}static get DefaultFillColor(){return Ur.defaultFillColor}static set DefaultFillColor(e){Ur.defaultFillColor=e}get ShapeEnum(){return this.shape}set ShapeEnum(e){this.shape=e}get LabelMargin(){return this.labelMargin}set LabelMargin(e){this.labelMargin=e}get LabelWidthToHeightRatio(){return this.labelWidthToHeightRatio}set LabelWidthToHeightRatio(e){this.labelWidthToHeightRatio=e}get node(){return this.entity}get id(){return this.node?this.node.id:""}},de=Ur;de.defaultFillColor=d.LightGray;var oe=class extends _{constructor(e,i){super(e);this.directed=!0;this.directed=i,i?this.arrowhead=0:this.arrowhead=6,this.arrowtail=6}clone(){let e=new oe(null,this.directed);return _.copyValidFields(this,e),e.directed=this.directed,e.arrowtail=this.arrowtail,e.arrowhead=this.arrowhead,e}};var ye=class extends de{constructor(){super(...arguments);this.graphVisData={sameRanks:new Array,minRanks:new Array,maxRanks:new Array,sourceRanks:new Array,sinkRanks:new Array}}get defaultNodeObject(){return this._defaultNodeObject}set defaultNodeObject(e){this._defaultNodeObject=e}static getDrawingGraph(e){return _.getDrawingObj(e)}get graph(){return this.entity}findNode(e){let u=this.graph.findNode(e);return u==null?null:_.getDrawingObj(u)}hasDirectedEdge(){for(let e of this.graph.deepEdges)if(_.getDrawingObj(e).directed)return!0;return!1}createGeometry(e=i=>i?new L.Size(i.length*8+8,20):null){let i=new L.GeomGraph(this.graph);this.textMeasure=e;let u={fontFamily:this.fontname,fontSize:this.fontsize,fontStyle:"normal"};i.labelSize=e(this.labelText,u);for(let a of this.graph.nodesBreadthFirst)this.createNodeGeometry(a);for(let a of this.graph.deepEdges)this.createEdgeGeometry(a);if(this.rankdir){let a=i.layoutSettings=new L.SugiyamaLayoutSettings;a.layerDirection=this.rankdir}return i}createEdgeGeometry(e){let i=oe.getDrawingObj(e),u=new L.GeomEdge(e);if(i.arrowhead!=6&&(u.targetArrowhead=new L.Arrowhead),i.arrowtail!=6&&(u.sourceArrowhead=new L.Arrowhead),i.labelText){let a=this.textMeasure(i.labelText,{fontSize:i.fontsize,fontFamily:i.fontname,fontStyle:"normal"}),l=e.label=new L.Label(e);new L.GeomLabel(l,L.Rectangle.mkPP(new L.Point(0,0),new L.Point(a.width,a.height))),i.measuredTextSize=a}i.penwidth&&(u.lineWidth=i.penwidth)}curveByShape(e,i,u,a){let l;switch(a.shape){case 0:l=L.CurveFactory.mkDiamond(e,i,u);break;case 1:l=L.CurveFactory.mkEllipse(e/1.6,i/1.6,u);break;case 4:case 2:l=L.CurveFactory.mkRectangleWithRoundedCorners(e,i,a.XRadius,a.YRadius,u);break;case 3:l=L.CurveFactory.mkCircle(Math.sqrt(e*e+i*i),u);break;case 5:break;case 6:break;case 7:break;case 8:break;case 9:break;case 10:l=L.CurveFactory.mkCircle(Math.sqrt(e*e+i*i)+2*a.penwidth,u);break;case 11:l=L.CurveFactory.createHouse(e,i,u);break;case 12:l=L.CurveFactory.createInvertedHouse(e,i,u);break;case 13:l=L.CurveFactory.createParallelogram(e,i,u);break;case 14:l=L.CurveFactory.createOctagon(e,i,u);break;case 15:break;case 16:break;case 17:break;case 18:break;case 19:l=L.CurveFactory.createHexagon(e,i,u);break}return l!=null?l:L.CurveFactory.mkRectangleWithRoundedCorners(e,i,a.XRadius,a.YRadius,u)}createNodeGeometry(e,i=new L.Point(0,0)){if(e instanceof L.Graph){let u=_.getDrawingObj(e),a=new L.GeomGraph(e);u.labelText&&(a.labelSize=u.measuredTextSize=Kn(u,this.textMeasure))}else{let u=de.getDrawingObj(e),a=new L.Size(1,1);u.labelText&&(a=Kn(u,this.textMeasure)),u.measuredTextSize=a;let l=new L.GeomNode(e),h=a.width+u.LabelMargin*2,f=a.height+u.LabelMargin*2;l.boundaryCurve=this.curveByShape(h,f,i,u)}}measureLabelSizes(e){var i;for(let u of this.graph.nodesBreadthFirst){let a=de.getDrawingObj(u);a.measuredTextSize=(i=Kn(a,e))!=null?i:new L.Size(1,1)}}};function Kn(n,t){return n.labelText?t(n.labelText,{fontSize:n.fontsize,fontFamily:n.fontname,fontStyle:"normal"}):null}var S=re(se(),1);var Pt;(function(n){n.has=Symbol.for("@esfx/collection-core!ReadonlyCollection.has"),n.name="ReadonlyContainer";function t(e){return(typeof e=="object"&&e!==null||typeof e=="function")&&n.has in e}n.hasInstance=t})(Pt||(Pt={}));var nr;(function(n){n.has=Pt.has,n.add=Symbol.for("@esfx/collection-core!Collection.add"),n.delete=Symbol.for("@esfx/collection-core!Collection.delete"),n.name="Container";function t(e){return Pt.hasInstance(e)&&n.add in e&&n.delete in e}n.hasInstance=t})(nr||(nr={}));var ve;(function(n){n.has=Pt.has,n.size=Symbol.for("@esfx/collection-core!ReadonlyCollection.size"),n.name="ReadonlyCollection";function t(e){return Pt.hasInstance(e)&&(typeof e=="object"&&e!==null||typeof e=="function")&&Symbol.iterator in e&&n.size in e}n.hasInstance=t})(ve||(ve={}));var ir;(function(n){n.size=ve.size,n.has=ve.has,n.add=nr.add,n.delete=nr.delete,n.clear=Symbol.for("@esfx/collection-core!Collection.clear"),n.name="Collection";function t(e){return ve.hasInstance(e)&&nr.hasInstance(e)&&n.clear in e}n.hasInstance=t})(ir||(ir={}));var at;(function(n){n.size=ve.size,n.has=ve.has,n.indexOf=Symbol.for("@esfx/collection-core!ReadonlyIndexedCollection.indexOf"),n.getAt=Symbol.for("@esfx/collection-core!ReadonlyIndexedCollection.getAt"),n.name="ReadonlyIndexedCollection";function t(e){return ve.hasInstance(e)&&n.indexOf in e&&n.getAt in e}n.hasInstance=t})(at||(at={}));var zr;(function(n){n.size=ve.size,n.has=ve.has,n.indexOf=at.indexOf,n.getAt=at.getAt,n.setAt=Symbol.for("@esfx/collection-core!FixedSizeIndexedCollection.setAt"),n.name="FixedSizeIndexedCollection";function t(e){return at.hasInstance(e)&&n.setAt in e}n.hasInstance=t})(zr||(zr={}));var Qi;(function(n){n.size=ve.size,n.has=ve.has,n.indexOf=at.indexOf,n.getAt=at.getAt,n.setAt=zr.setAt,n.add=ir.add,n.delete=ir.delete,n.clear=ir.clear,n.insertAt=Symbol.for("@esfx/collection-core!IndexedCollection.insertAt"),n.removeAt=Symbol.for("@esfx/collection-core!IndexedCollection.removeAt"),n.name="IndexedCollection";function t(e){return zr.hasInstance(e)&&n.insertAt in e&&n.removeAt in e}n.hasInstance=t})(Qi||(Qi={}));var Xe;(function(n){n.has=Symbol.for("@esfx/collection-core!ReadonlyKeyedContainer.has"),n.get=Symbol.for("@esfx/collection-core!ReadonlyKeyedContainer.get"),n.name="ReadonlyKeyedContainer";function t(e){return(typeof e=="object"&&e!==null||typeof e=="function")&&n.has in e&&n.get in e}n.hasInstance=t})(Xe||(Xe={}));var or;(function(n){n.has=Xe.has,n.get=Xe.get,n.set=Symbol.for("@esfx/collection-core!KeyedCollection.set"),n.delete=Symbol.for("@esfx/collection-core!KeyedCollection.delete"),n.name="KeyedContainer";function t(e){return Xe.hasInstance(e)&&n.set in e&&n.delete in e}n.hasInstance=t})(or||(or={}));var Ye;(function(n){n.has=Xe.has,n.get=Xe.get,n.size=Symbol.for("@esfx/collection-core!ReadonlyKeyedCollection.size"),n.keys=Symbol.for("@esfx/collection-core!ReadonlyKeyedCollection.keys"),n.values=Symbol.for("@esfx/collection-core!ReadonlyKeyedCollection.values"),n.name="ReadonlyKeyedCollection";function t(e){return(typeof e=="object"&&e!==null||typeof e=="function")&&Symbol.iterator in e&&Xe.hasInstance(e)&&n.size in e&&n.keys in e&&n.values in e}n.hasInstance=t})(Ye||(Ye={}));var De;(function(n){n.size=Ye.size,n.has=Ye.has,n.get=Ye.get,n.keys=Ye.keys,n.values=Ye.values,n.set=or.set,n.delete=or.delete,n.clear=Symbol.for("@esfx/collection-core!KeyedCollection.clear"),n.name="KeyedCollection";function t(e){return Ye.hasInstance(e)&&or.hasInstance(e)&&n.clear in e}n.hasInstance=t})(De||(De={}));var je;(function(n){n.size=Symbol.for("@esfx/collection-core!ReadonlyKeyedMultiCollection.size"),n.has=Symbol.for("@esfx/collection-core!ReadonlyKeyedMultiCollection.has"),n.hasValue=Symbol.for("@esfx/collection-core!ReadonlyKeyedMultiCollection.hasValue"),n.get=Symbol.for("@esfx/collection-core!ReadonlyKeyedMultiCollection.get"),n.keys=Symbol.for("@esfx/collection-core!ReadonlyKeyedMultiCollection.keys"),n.values=Symbol.for("@esfx/collection-core!ReadonlyKeyedMultiCollection.values"),n.name="ReadonlyKeyedMultiCollection";function t(e){return(typeof e=="object"&&e!==null||typeof e=="function")&&Symbol.iterator in e&&n.size in e&&n.has in e&&n.hasValue in e&&n.get in e&&n.keys in e&&n.values in e}n.hasInstance=t})(je||(je={}));var eo;(function(n){n.size=je.size,n.has=je.has,n.hasValue=je.hasValue,n.get=je.get,n.keys=je.keys,n.values=je.values,n.add=Symbol.for("@esfx/collection-core!KeyedMultiCollection.add"),n.delete=Symbol.for("@esfx/collection-core!KeyedMultiCollection.delete"),n.deleteValue=Symbol.for("@esfx/collection-core!KeyedMultiCollection.deleteValue"),n.clear=Symbol.for("@esfx/collection-core!KeyedMultiCollection.clear"),n.name="KeyedMultiCollection";function t(e){return je.hasInstance(e)&&n.add in e&&n.delete in e&&n.deleteValue in e&&n.clear in e}n.hasInstance=t})(eo||(eo={}));function to(n,t,e,i){if(t%4)throw new TypeError("Pointer not aligned");let u=new Uint32Array(n),a,l,h,f,p,w,C;if(l=t+e,t>>=2,e>=16){h=l-16>>2,f=(i+2654435761|0)+2246822519|0,p=i+2246822519|0,w=i+0|0,C=i+2654435761|0;do f=f+u[t++]*2246822519|0|0,f=(f<<13|f>>>19)*2654435761|0,p=p+u[t++]*2246822519|0|0,p=(p<<13|p>>>19)*2654435761|0,w=w+u[t++]*2246822519|0|0,w=(w<<13|w>>>19)*2654435761|0,C=C+u[t++]*2246822519|0|0,C=(C<<13|C>>>19)*2654435761|0;while(t<=h);a=(f<<1|f>>>31)+(p<<7|p>>>25)|(w<<12|w>>>20)|(C<<18|C>>>14)}else a=i+374761393|0;for(a=a+e|0,h=l-4>>2;t<=h;)a=a+u[t++]*3266489917|0|0,a=(a<<17|a>>>15)*668265263|0;if(t=t<<2,t<l){let x=new Uint8Array(u.buffer);do a=a+x[t++]*374761393|0|0,a=(a<<11|a>>>21)*2654435761|0;while(t<l)}return a=(a^a>>>15)*2246822519|0,a=(a^a>>>13)*3266489917|0,a=a^a>>>16,a>>>0}var Va=typeof WebAssembly<"u"&&typeof WebAssembly.Module=="function"&&typeof WebAssembly.Instance=="function",ja=new Uint8Array([0,97,115,109,1,0,0,0,1,8,1,96,3,127,127,126,1,126,3,2,1,0,5,3,1,0,1,7,15,2,3,109,101,109,2,0,5,120,120,104,54,52,0,0,10,130,6,1,255,5,2,3,126,1,127,32,0,32,1,106,33,6,32,1,65,32,79,4,126,32,6,65,32,107,33,6,32,2,66,214,235,130,238,234,253,137,245,224,0,124,33,3,32,2,66,177,169,172,193,173,184,212,166,61,125,33,4,32,2,66,249,234,208,208,231,201,161,228,225,0,124,33,5,3,64,32,3,32,0,41,3,0,66,207,214,211,190,210,199,171,217,66,126,124,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,33,3,32,4,32,0,65,8,106,34,0,41,3,0,66,207,214,211,190,210,199,171,217,66,126,124,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,33,4,32,2,32,0,65,8,106,34,0,41,3,0,66,207,214,211,190,210,199,171,217,66,126,124,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,33,2,32,5,32,0,65,8,106,34,0,41,3,0,66,207,214,211,190,210,199,171,217,66,126,124,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,33,5,32,6,32,0,65,8,106,34,0,79,13,0,11,32,2,66,12,137,32,5,66,18,137,124,32,4,66,7,137,124,32,3,66,1,137,124,32,3,66,207,214,211,190,210,199,171,217,66,126,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,133,66,135,149,175,175,152,182,222,155,158,127,126,66,157,163,181,234,131,177,141,138,250,0,125,32,4,66,207,214,211,190,210,199,171,217,66,126,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,133,66,135,149,175,175,152,182,222,155,158,127,126,66,157,163,181,234,131,177,141,138,250,0,125,32,2,66,207,214,211,190,210,199,171,217,66,126,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,133,66,135,149,175,175,152,182,222,155,158,127,126,66,157,163,181,234,131,177,141,138,250,0,125,32,5,66,207,214,211,190,210,199,171,217,66,126,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,133,66,135,149,175,175,152,182,222,155,158,127,126,66,157,163,181,234,131,177,141,138,250,0,125,5,32,2,66,197,207,217,178,241,229,186,234,39,124,11,32,1,173,124,33,2,32,0,32,1,65,31,113,106,33,1,3,64,32,1,32,0,65,8,106,79,4,64,32,0,41,3,0,66,207,214,211,190,210,199,171,217,66,126,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,32,2,133,66,27,137,66,135,149,175,175,152,182,222,155,158,127,126,66,157,163,181,234,131,177,141,138,250,0,125,33,2,32,0,65,8,106,33,0,12,1,11,11,32,0,65,4,106,32,1,77,4,64,32,2,32,0,53,2,0,66,135,149,175,175,152,182,222,155,158,127,126,133,66,23,137,66,207,214,211,190,210,199,171,217,66,126,66,249,243,221,241,153,246,153,171,22,124,33,2,32,0,65,4,106,33,0,11,3,64,32,0,32,1,73,4,64,32,2,32,0,49,0,0,66,197,207,217,178,241,229,186,234,39,126,133,66,11,137,66,135,149,175,175,152,182,222,155,158,127,126,33,2,32,0,65,1,106,33,0,12,1,11,11,32,2,32,2,66,33,136,133,66,207,214,211,190,210,199,171,217,66,126,34,2,66,29,136,32,2,133,66,249,243,221,241,153,246,153,171,22,126,34,2,66,32,136,32,2,133,11]),st=Va?new WebAssembly.Instance(new WebAssembly.Module(ja)).exports:void 0;var lt=st===null||st===void 0?void 0:st.mem,_n=st===null||st===void 0?void 0:st.xxh64;var qa=typeof TextEncoder=="function",ro=(n,t)=>(ro=za())(n,t),Hn=(n,t)=>ro(n,t);function za(){function n(){let e=new TextEncoder;function i(u,a){let{written:l=0}=e.encodeInto(u,a);return l}return i}function t(){function e(i,u){let a=i.length,l=0;for(let h=0;h<a;h++){let f=i.charCodeAt(h);if((f&55296)!==0&&(f&4294910976)===0&&h<a-1){let p=i.charCodeAt(h+1);(p&64512)===56320&&(f=((f&1023)<<10)+(p&1023)+65536,h++)}if((f&4294967168)===0)u[l++]=f;else if((f&4294965248)===0)u[l++]=f>>6|192,u[l++]=f&63|128;else if((f&268431360)===0)u[l++]=f>>12|224,u[l++]=f>>6&63|128,u[l++]=f&63|128;else if((f&4292870144)===0)u[l++]=f>>18|240,u[l++]=f>>12&63|128,u[l++]=f>>6&63|128,u[l++]=f&63|128;else throw new RangeError("Unsupported charCode.")}return l}return e}return qa?n():t()}var Jn=typeof BigInt=="function"&&typeof BigInt(0)=="bigint",no=typeof BigUint64Array=="function",_a=typeof lt=="object"&&typeof _n=="function",Zn=new ArrayBuffer(8),Ha=new Float64Array(Zn),$e=new Uint32Array(Zn),Gt=()=>(Gt=Ja())(),io=n=>(io=Za())(n),oo=n=>(oo=Ya())(n),uo=n=>(uo=Gt())(n),ao=n=>(ao=Xa())(n),so=n=>(so=Qa())(n),lo=n=>io(n),co=n=>oo(n),ho=n=>uo(n),go=n=>ao(n),Yn=n=>so(n);function Ja(){function n(){let e=new BigUint64Array($e.buffer),i=new Uint8Array(lt.buffer);function u(p){lt.buffer.byteLength<p&&(lt.grow(Math.ceil((p-lt.buffer.byteLength)/65536)),i=new Uint8Array(lt.buffer))}function a(p){e[0]=p;let w=$e[0],C=$e[1];return(w<<7|w>>>25)^C}function l(){return $e[0]=Kr(),$e[1]=Kr(),e[0]}function h(p,w){u(p.length*3);let C=Hn(p,i);return a(_n(0,C,w))}function f(){let p=l();function w(C){return h(C,p)}return w}return f}function t(){let e=new Uint8Array(65536);function i(l){e.byteLength<l&&(e=new Uint8Array(l+(65536-l%65536)))}function u(l,h){i(l.length*3);let f=Hn(l,e);return to(e.buffer,0,f,h)>>0}function a(){let l=Kr();function h(f){return u(f,l)}return h}return a}return Jn&&no&&_a?n():t()}function Za(){function n(e){Ha[0]=e;let i=$e[0],u=$e[1];return(i<<7|i>>>25)^u|0}function t(e){return e>>0===e?e|0:n(e)}return t}function Ya(){function n(){let i=new BigUint64Array(Zn),u=BigInt(0),a=BigInt(1),l=BigInt(2),h=BigInt(2)**BigInt(31)-BigInt(1),f=~h,p=BigInt(64);function w(C){if(C===u)return 0;if(C>=f&&C<=h)return Number(C);C=C<u?~C*l+a:C*l;let x=0;for(;C;)i[0]=C,x=(x<<7|x>>>25)^$e[0],x=(x<<7|x>>>25)^$e[1],C=C>>p;return x|0}return w}function t(){let i=BigInt(0),u=BigInt(1),a=BigInt(2),l=BigInt(2)**BigInt(31)-BigInt(1),h=~l,f=BigInt(32),p=BigInt("0xFFFFFFFF");function w(C){if(C===i)return 0;if(C>=h&&C<=l)return Number(C);C=C<i?~C*a+u:C*a;let x=0;for(;C!==i;)x=(x<<7|x>>>25)^Number(C&p),C>>=f,x=(x<<7|x>>>25)^Number(C&p),C>>=f;return x|0}return w}function e(){let i=Gt();function u(a){return i(a.toString())}return u}return Jn&&no?n():Jn?t():e()}function Xa(){let n="description"in Symbol.prototype?N=>N.description:N=>{let W=N.toString();return W.length>=8&&W.slice(0,7)==="Symbol("&&W.slice(-1)===")"?W.slice(7,-1):W},t=Gt(),e,i;try{new WeakMap().set(Symbol.iterator,null),e=new WeakMap,i=new WeakMap}catch{e=new Map,i=new Map}for(let N of Object.getOwnPropertyNames(Symbol))if(typeof N=="string"){let W=Symbol[N];typeof W=="symbol"&&i.set(W,`Symbol.${N}`)}let u=Gt(),a;try{new WeakMap().set(Symbol.for("@esfx/equatable!~globalSymbolTest"),null),a=new WeakMap}catch{a=new Map}let l=Gt(),h,f=1;try{new WeakMap().set(Symbol(),null),h=new WeakMap}catch{h=new Map}function p(N,W){let J=a.get(N);return J===void 0&&(J=u(W),a.set(N,J)),J}function w(N,W){let J=e.get(N);return J===void 0&&(J=t(W),e.set(N,J)),J}function C(N){let W=h.get(N);return W===void 0&&(W=l(`${f++}#${n(N)}`),h.set(N,W)),W}function x(N){let W=i.get(N);if(W!==void 0)return w(N,W);let J=Symbol.keyFor(N);return J!==void 0?p(N,J):C(N)}return x}function Qa(){let n=new WeakMap,t=Kr(),e=1;function i(a){return a=~a+(a<<15),a=a^a>>12,a=a+(a<<2),a=a^a>>4,a=a*2057,a=a^a>>16,a>>>0}function u(a){let l=n.get(a);return l===void 0&&(l=i(e++^t)^t,n.set(a,l)),l}return u}function Kr(){return Math.floor(Math.random()*4294967295)>>>0}var _r=typeof globalThis=="object"?globalThis:typeof global=="object"?global:typeof self=="object"?self:void 0,Xn=Symbol.for("@esfx/equatable!~hashUnknown"),Hr;_r&&typeof _r[Xn]=="function"?Hr=_r[Xn]:(Hr=function(t){switch(typeof t){case"boolean":return t?1:0;case"number":return lo(t);case"bigint":return co(t);case"string":return ho(t);case"symbol":return go(t);case"function":return Yn(t);case"object":return t===null?0:Yn(t);case"undefined":return 0;default:throw new TypeError(`Unsupported type: ${typeof t}`)}},Object.defineProperty(_r,Xn,{value:Hr}));function fo(n){return Hr(n)}var Qe;(function(n){n.equals=Symbol.for("@esfx/equatable:Equatable.equals"),n.hash=Symbol.for("@esfx/equatable:Equatable.hash"),n.name="Equatable";function t(e){let i;return e!=null&&n.equals in(i=Object(e))&&n.hash in i}n.hasInstance=t,Object.defineProperty(n,Symbol.hasInstance,{configurable:!0,writable:!0,value:t})})(Qe||(Qe={}));var It;(function(n){n.compareTo=Symbol.for("@esfx/equatable:Comparable.compareTo"),n.name="Comparable";function t(e){return e!=null&&n.compareTo in Object(e)}n.hasInstance=t,Object.defineProperty(n,Symbol.hasInstance,{configurable:!0,writable:!0,value:t})})(It||(It={}));var et;(function(n){n.structuralEquals=Symbol.for("@esfx/equatable:StructualEquatable.structuralEquals"),n.structuralHash=Symbol.for("@esfx/equatable:StructuralEquatable.structuralHash"),n.name="StructuralEquatable";function t(e){let i;return e!=null&&n.structuralEquals in(i=Object(e))&&n.structuralHash in i}n.hasInstance=t,Object.defineProperty(n,Symbol.hasInstance,{configurable:!0,writable:!0,value:t})})(et||(et={}));var Nt;(function(n){n.structuralCompareTo=Symbol.for("@esfx/equatable:StructuralComparable.structuralCompareTo"),n.name="StructuralComparable";function t(e){return e!=null&&n.structuralCompareTo in Object(e)}n.hasInstance=t,Object.defineProperty(n,Symbol.hasInstance,{configurable:!0,writable:!0,value:t})})(Nt||(Nt={}));var ct;(function(n){let t=Object.defineProperty({},Symbol.toStringTag,{configurable:!0,value:"Equaler"});n.defaultEqualer=e((a,l)=>Qe.hasInstance(a)?a[Qe.equals](l):Qe.hasInstance(l)?l[Qe.equals](a):Object.is(a,l),a=>Qe.hasInstance(a)?a[Qe.hash]():ts(a)),n.structuralEqualer=e((a,l)=>et.hasInstance(a)?a[et.structuralEquals](l,n.structuralEqualer):et.hasInstance(l)?l[et.structuralEquals](a,n.structuralEqualer):n.defaultEqualer.equals(a,l),a=>et.hasInstance(a)?a[et.structuralHash](n.structuralEqualer):n.defaultEqualer.hash(a)),n.tupleEqualer=e((a,l)=>{if(a!=null&&!Array.isArray(a)||l!=null&&!Array.isArray(l))throw new TypeError("Array expected");if(a===l)return!0;if(!a||!l||a.length!==l.length)return!1;for(let h=0;h<a.length;h++)if(!n.defaultEqualer.equals(a[h],l[h]))return!1;return!0},a=>{if(a==null)return 0;if(!Array.isArray(a))throw new TypeError("Array expected");let l=0;for(let h of a)l=i(l,n.defaultEqualer.hash(h));return l}),n.tupleStructuralEqualer=e((a,l)=>{if(a!=null&&!Array.isArray(a)||l!=null&&!Array.isArray(l))throw new TypeError("Array expected");if(a===l)return!0;if(!a||!l||a.length!==l.length)return!1;for(let h=0;h<a.length;h++)if(!n.structuralEqualer.equals(a[h],l[h]))return!1;return!0},a=>{if(a==null)return 0;if(!Array.isArray(a))throw new TypeError("Array expected");let l=0;for(let h of a)l=i(l,n.structuralEqualer.hash(h));return l});function e(a,l=n.defaultEqualer.hash){return Object.setPrototypeOf({equals:a,hash:l},t)}n.create=e;function i(a,l,h=7){if(typeof a!="number")throw new TypeError("Integer expected: x");if(typeof l!="number")throw new TypeError("Integer expected: y");if(typeof h!="number")throw new TypeError("Integer expected: rotate");if(isNaN(a)||!isFinite(a))throw new RangeError("Argument must be a finite number value: x");if(isNaN(l)||!isFinite(l))throw new RangeError("Argument must be a finite number value: y");if(isNaN(h)||!isFinite(h))throw new RangeError("Argument must be a finite number value: rotate");for(;h<0;)h+=32;for(;h>=32;)h-=32;return(a<<h|a>>>32-h)^l}n.combineHashes=i;function u(a){return typeof a=="object"&&a!==null&&typeof a.equals=="function"&&typeof a.hash=="function"}n.hasInstance=u,Object.defineProperty(n,Symbol.hasInstance,{configurable:!0,writable:!0,value:u})})(ct||(ct={}));var yc=ct.defaultEqualer,bc=ct.structuralEqualer,wc=ct.tupleEqualer,vc=ct.tupleEqualer,Cc=ct.combineHashes,Ue;(function(n){let t=Object.defineProperty({},Symbol.toStringTag,{configurable:!0,value:"Comparer"});n.defaultComparer=e((u,a)=>It.hasInstance(u)?u[It.compareTo](a):It.hasInstance(a)?-a[It.compareTo](u):u<a?-1:u>a?1:0),n.structuralComparer=e((u,a)=>Nt.hasInstance(u)?u[Nt.structuralCompareTo](a,n.structuralComparer):Nt.hasInstance(a)?-a[Nt.structuralCompareTo](u,n.structuralComparer):n.defaultComparer.compare(u,a)),n.tupleComparer=e((u,a)=>{if(u!=null&&!Array.isArray(u)||a!=null&&!Array.isArray(a))throw new TypeError("Array expected");let l;if(l=n.defaultComparer.compare(u.length,a.length))return l;for(let h=0;h<u.length;h++)if(l=n.defaultComparer.compare(u[h],a[h]))return l;return 0}),n.tupleStructuralComparer=e((u,a)=>{if(u!=null&&!Array.isArray(u)||a!=null&&!Array.isArray(a))throw new TypeError("Array expected");let l;if(l=n.defaultComparer.compare(u.length,a.length))return l;for(let h=0;h<u.length;h++)if(l=n.structuralComparer.compare(u[h],a[h]))return l;return 0});function e(u){return Object.setPrototypeOf({compare:u},t)}n.create=e;function i(u){return typeof u=="object"&&u!==null&&typeof u.compare=="function"}n.hasInstance=i,Object.defineProperty(n,Symbol.hasInstance,{configurable:!0,writable:!0,value:i})})(Ue||(Ue={}));var Dc=Ue.defaultComparer,Fc=Ue.structuralComparer,Sc=Ue.tupleComparer,Bc=Ue.tupleStructuralComparer;function ts(n){return fo(n)}var mo,Jr=function(){var n={exports:{}};return function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function u(a,l,h){if(a.length===0)return-1;let f=0,p=a.length-1;for(;f<=p;){let w=f+(p-f>>1),C=a[w];switch(Math.sign(h.compare(C,l))){case-1:f=w+1;break;case 0:return w;case 1:p=w-1;break}}return~f}e.binarySearch=u}(n,n.exports,null),n.exports}(),ar=class{constructor(...t){this._keys=[],this._values=[];let e,i;if(t.length>0){let u=t[0];u===void 0||u!=null&&Symbol.iterator in Object(u)?(e=u,t.length>1&&(i=t[1])):i=u}if(i??(i=Ue.defaultComparer),this._comparer=typeof i=="function"?Ue.create(i):i,e)for(let[u,a]of e)this.set(u,a)}get comparer(){return this._comparer}get size(){return this._keys.length}has(t){return(0,Jr.binarySearch)(this._keys,t,this._comparer)>=0}get(t){let e=(0,Jr.binarySearch)(this._keys,t,this._comparer);return e>=0?this._values[e]:void 0}set(t,e){let i=(0,Jr.binarySearch)(this._keys,t,this._comparer);return i>=0?this._values[i]=e:(this._keys.splice(~i,0,t),this._values.splice(~i,0,e)),this}delete(t){let e=(0,Jr.binarySearch)(this._keys,t,this._comparer);return e>=0?(this._keys.splice(e,1),this._values.splice(e,1),!0):!1}clear(){this._keys.length=0,this._values.length=0}keys(){return this._keys.values()}values(){return this._values.values()}*entries(){for(let t=0;t<this._keys.length;t++)yield[this._keys[t],this._values[t]]}[Symbol.iterator](){return this.entries()}forEach(t,e){if(typeof t!="function")throw new TypeError("Function expected: callback");for(let[i,u]of this)t.call(e,u,i,this)}get[De.size](){return this.size}[De.has](t){return this.has(t)}[De.get](t){return this.get(t)}[De.set](t,e){this.set(t,e)}[De.delete](t){return this.delete(t)}[De.clear](){this.clear()}[De.keys](){return this.keys()}[De.values](){return this.values()}};mo=ar;Object.defineProperty(mo.prototype,Symbol.toStringTag,{configurable:!0,writable:!0,value:"SortedMap"});var Ge=re(se(),1);var qe=re(se(),1),Ao=re(se(),1),yo=re(Eo(),1),dt=class{constructor(t,e,i){this.fixedNodes=new Set;this.separation=e,this.rtree=new qe.RTree((0,Ao.createRectangleNodeOnData)(t,u=>this.GetPaddedBoxOfNode(u))),this.pushingNodes=i}get FixedNodes(){return this.fixedNodes}GetPaddedBoxOfNode(t){let e=t.boundaryCurve.boundingBox.clone();return e.pad(this.separation/2),e}PushNodes(){this.fixedNodes.clear(),(0,qe.insertRange)(this.fixedNodes,this.pushingNodes);let t=new yo.Queue;for(let i of this.pushingNodes)t.enqueue(i);let e=new Array;for(;t.length>0;){let i=t.dequeue();for(let u of this.PushByNodeAndReportPushedAsFixed(i))t.enqueue(u),this.fixedNodes.add(u),e.push(u)}return e}PushByNodeAndReportPushedAsFixed(t){let e=[],i=this.GetPaddedBoxOfNode(t);for(let u of this.rtree.GetAllLeavesIntersectingRectangle(i))this.fixedNodes.has(u.UserData)||this.PushNodeAndUpdateRTree(t,u)&&e.push(u.UserData);return e}PushNodeAndUpdateRTree(t,e){let i=e.UserData.center.sub(t.center),u=t.width/2+e.UserData.width/2,a=t.height/2+e.UserData.height/2,l=Math.abs(i.x),h=Math.abs(i.y),f=l-u,p=h-a;if(f>=this.separation||p>=this.separation)return!1;if(l>=h){let w=i.x>0?this.separation-f:f-this.separation;this.PushByX(w,e)}else{let w=i.y>0?this.separation-p:p-this.separation;this.PushByY(w,e)}return this.UpdateBoundingBoxesOfPushedAndUpParents(e),!0}PushByX(t,e){let i=new qe.Point(t,0);dt.PushByPoint(e,i)}static PushByPoint(t,e){t.UserData.center=t.UserData.center.add(e),t.UserData instanceof qe.GeomGraph&&t.UserData.translate(e)}PushByY(t,e){let i=new qe.Point(0,t);dt.PushByPoint(e,i)}UpdateBoundingBoxesOfPushedAndUpParents(t){t.irect=this.GetPaddedBoxOfNode(t.UserData);let e=t.Parent;for(;e!=null;)e.irect=e.Left.irect.add_rect(e.Right.irect),e=e.Parent}UpdateRTreeByChangedNodeBox(t,e){let i=this.FindClusterNode(t,e);this.UpdateBoundingBoxesOfPushedAndUpParents(i)}FindClusterNode(t,e){let i=this.rtree.RootNode;return this.FindClusterNodeRecurse(i,t,e)}FindClusterNodeRecurse(t,e,i){if(t.UserData!=null)return t.UserData===e?t:null;let u=null;return i.intersects(t.left.irect)&&(u=this.FindClusterNodeRecurse(t.Left,e,i)),u!=null?u:i.intersects(t.right.irect)?this.FindClusterNodeRecurse(t.Right,e,i):null}FirstPushingNode(){return this.pushingNodes[0]}};var Yr=class{constructor(t,e,i){this.RelativeLengthOnCurve=t,this.RightSide=e,this.NormalLength=i}};var sr=class{constructor(t,e,i){this.listOfPushers=new Array;this.labelFixtures=new Map;this.geomGraph=e,this.nodeSeparation=i.NodeSeparation,this.layoutSettings=i,this.pushingNodesArray=t,this.InitBumperPushers()}get geomGraph(){return this.geomGraph_}set geomGraph(t){this.geomGraph_=t}InitBumperPushers(){if(this.pushingNodesArray.length===0)return;let t=Ge.GeomGraph.getGeom(this.pushingNodesArray[0].node.parent),e=this.pushingNodesArray;do if(this.listOfPushers.push(new dt(t.shallowNodes,this.nodeSeparation,e)),t.graph.parent)t=Ge.GeomGraph.getGeom(t.graph.parent),e=[t];else break;while(!0)}RunPushers(){for(let t=0;t<this.listOfPushers.length;t++){let e=this.listOfPushers[t];e.PushNodes();let i=e.FirstPushingNode().node.parent;if(i===this.geomGraph_.graph)break;let u=Ge.GeomGraph.getGeom(i),a=u.boundingBox;if(u.calculateBoundsFromChildren(),u.boundingBox.equalEps(a))break;this.listOfPushers[t+1].UpdateRTreeByChangedNodeBox(u,a)}}Drag(t){if(!(t.x==null&&t.y==null)){for(let e of this.pushingNodesArray)e.translate(t);this.RunPushers(),this.RouteChangedEdges()}}RouteChangedEdges(){this.changedEdges=this.GetChangedEdges(this.GetChangedNodes()),this.InitLabelFixtures(this.changedEdges),new Ge.SplineRouter(this.geomGraph_,this.changedEdges,this.layoutSettings.commonSettings.edgeRoutingSettings.Padding,this.layoutSettings.commonSettings.edgeRoutingSettings.PolylinePadding,this.layoutSettings.commonSettings.edgeRoutingSettings.ConeAngle,this.layoutSettings.commonSettings.edgeRoutingSettings.bundlingSettings).run(),this.PositionLabels(this.changedEdges)}PositionLabels(t){for(let e of t)this.PositionEdgeLabel(e)}PositionEdgeLabel(t){let e=this.labelFixtures.get(t);if(e==null)return;let i=t.curve,u=i.length*e.RelativeLengthOnCurve,a=i.getParameterAtLength(u),l=i.derivative(a),h=(e.RightSide?l.rotate90Cw():l.rotate90Ccw()).normalize().mul(e.NormalLength);t.label.positionCenter(i.value(a).add(h))}InitLabelFixtures(t){for(let e of t)this.InitLabelFixture(e)}InitLabelFixture(t){if(t.label==null||this.labelFixtures.has(t))return;let e=t.curve.closestParameter(t.label.center),i=t.curve,a=i.derivative(e).rotate90Cw(),l=t.label.center.sub(i.value(e)),h=new Yr(i.lengthPartial(0,e)/i.length,l.dot(a)>0,l.length);this.labelFixtures.set(t,h)}GetChangedEdges(t){let e=[],i=Ge.Rectangle.mkOnRectangles(Array.from(t).map(a=>a.boundingBox)),u=i.perimeter();for(let a of this.geomGraph.deepEdges)this.EdgeNeedsRouting(i,a,u,t)&&e.push(a);return e}EdgeNeedsRouting(t,e,i,u){return e.curve==null||u.has(e.source)||u.has(e.target)||e.source.boundingBox.intersects(t)||e.target.boundaryCurve.boundingBox.intersects(t)?!0:e.boundingBox.intersects(t)?Ge.Curve.intersectionOne(i,e.curve,!1)!=null:!1}GetChangedNodes(){let t=new Set;for(let e of this.listOfPushers)for(let i of e.FixedNodes)t.add(i);return t}};var Xr=re(se(),1);var Z=re(se(),1);var ht=class{constructor(){this._canUndo=!0}updateDeltaForDragUndo(t){let e=this.data;e.delta=t}registerUndoDrag(t){this.data==null&&(this.data={draggedEnts:new Set,delta:null,changeData:new Map}),"draggedEnts"in this.data&&this.data.draggedEnts.add(t)}undo(){if(Z.Assert.assert(this.canUndo),this.data instanceof Map)for(let[t,e]of this.data)for(let i of e)i.new=t.getAttr(ri(i.old)).clone(),i.old.rebind(t);else if(this.data&&"deletedEnts"in this.data)for(let t of this.data.deletedEnts)bo(t);else if("insertedEnts"in this.data)for(let t of this.data.insertedEnts){let e=t.parent;if(t instanceof Z.Node)e.removeNode(t);else if(t instanceof Z.Edge)t.remove();else throw new Error("not implemented")}else if("draggedEnts"in this.data){for(let t of this.data.draggedEnts)Z.GeomObject.getGeom(t).translate(this.data.delta);for(let[t,e]of this.data.changeData)for(let i of e)i.new=t.getAttr(ri(i.old)).clone(),i.old.rebind(t)}else throw new Error("not implemented");this.canUndo=!1}redo(){if(Z.Assert.assert(this.canRedo),this.data instanceof Map)for(let[t,e]of this.data)for(let i of e)i.new.rebind(t);else if("deletedEnts"in this.data)for(let t of this.data.deletedEnts)if(t instanceof Z.Graph)t.removeSubgraph();else if(t instanceof Z.Node)t.parent.removeNode(t);else if(t instanceof Z.Edge)t.remove();else if(t instanceof Z.Label){let e=t.parent;e.label=null}else throw new Error("unexpected type in redo");else if("draggedEnts"in this.data){let t=this.data.delta.neg();for(let e of this.data.draggedEnts)Z.GeomObject.getGeom(e).translate(t);for(let[e,i]of this.data.changeData)for(let u of i)u.new.rebind(e)}else if("insertedEnts"in this.data)for(let t of this.data.insertedEnts)bo(t);else throw new Error("not implemented");this.canUndo=!0}addOldNewPair(t,e){this.data||(this.data=new Map);let i="draggedEnts"in this.data?this.data.changeData:this.data;i.has(t)||i.set(t,[]);let u=ri(e),a=i.get(t);a[u]==null&&(a[u]={old:e.clone(),new:null})}registerDelete(t){this.data||(this.data={deletedEnts:new Set}),this.data.deletedEnts.add(t)}registerAdd(t){this.data||(this.data={insertedEnts:new Set}),this.data.insertedEnts.add(t)}get canRedo(){return!this._canUndo}get canUndo(){return this._canUndo}set canUndo(t){this._canUndo=t}*entities(){if(!!this.data)if(this.data instanceof Map)yield*this.data.keys();else if("draggedEnts"in this.data)yield*this.data.changeData.keys(),yield*this.data.draggedEnts;else if("deletedEnts"in this.data)yield*this.data.deletedEnts;else if("insertedEnts"in this.data)yield*this.data.insertedEnts;else throw new Error("not implemented")}};function ri(n){let t;return n instanceof Z.GeomObject?t=Z.AttributeRegistry.GeomObjectIndex:n instanceof _?t=Z.AttributeRegistry.DrawingObjectIndex:t=Z.AttributeRegistry.ViewerIndex,t}function bo(n){if(n instanceof Z.Label){let t=n.parent;t.label=n}else if(n instanceof Z.Graph){n.parent.addNode(n);for(let e of n.edges)e.add();for(let e of n.nodesBreadthFirst){for(let i of e.outEdges)i.add();for(let i of e.inEdges)i.add()}}else n instanceof Z.Node?n.parent.addNode(n):n instanceof Z.Edge&&n.add()}var lr=class{updateDeltaForDragUndo(t){this.currentBridge.updateDeltaForDragUndo(t)}registerForUndoDrag(t){this.currentBridge==null&&(this.currentBridge=new ht),this.currentBridge.registerUndoDrag(t)}registerDelete(t){this.currentBridge==null&&(this.currentBridge=new ht),this.currentBridge.registerDelete(t)}registerAdd(t){this.createUndoPoint(),this.currentBridge.registerAdd(t)}*entitiesToBeChangedByRedo(){this.currentBridge!=null&&(this.currentBridge.canRedo?yield*this.currentBridge.entities():this.currentBridge.next!=null&&this.currentBridge.next.canRedo&&(yield*this.currentBridge.next.entities()))}*entitiesToBeChangedByUndo(){this.currentBridge!=null&&(this.currentBridge.canUndo?yield*this.currentBridge.entities():this.currentBridge.prev!=null&&this.currentBridge.prev.canUndo&&(yield*this.currentBridge.prev.entities()))}registerForUndo(t){this.currentBridge==null&&(this.currentBridge=new ht),this.currentBridge.addOldNewPair(t,t.getAttr(Xr.AttributeRegistry.GeomObjectIndex))}canUndo(){return this.currentBridge==null?!1:!!(this.currentBridge.canUndo||this.currentBridge.prev!=null&&this.currentBridge.prev.canUndo)}canRedo(){return this.currentBridge==null?!1:!!(this.currentBridge.canRedo||this.currentBridge.next!=null&&this.currentBridge.next.canRedo)}undo(){!this.canUndo||(this.currentBridge.canUndo?this.currentBridge.undo():this.currentBridge.prev.undo(),this.currentBridge.prev&&(this.currentBridge=this.currentBridge.prev))}redo(){!this.canRedo||(this.currentBridge.canRedo?this.currentBridge.redo():this.currentBridge.next.redo(),this.currentBridge.next&&(this.currentBridge=this.currentBridge.next))}createUndoPoint(){let t=new ht;if(!this.currentBridge)this.currentBridge=t;else if(this.currentBridge.canUndo)this.currentBridge.next=t,t.prev=this.currentBridge,this.currentBridge=t;else{Xr.Assert.assert(this.currentBridge.canRedo);let e=this.currentBridge.prev;e&&(t.prev=e,e.next=t),this.currentBridge=t}}};var T=re(se(),1);var Q=class{constructor(){this.edgesToReroute=new Set;this.objectsToDrag=new Set;this.undoList=new lr}updateDeltaForDragUndo(t){this.undoList.updateDeltaForDragUndo(t)}registerDelete(t){this.undoList.registerDelete(t)}registerAdd(t){this.undoList.registerAdd(t)}*entitiesToBeChangedByRedo(){yield*this.undoList.entitiesToBeChangedByRedo()}*entitiesToBeChangedByUndo(){yield*this.undoList.entitiesToBeChangedByUndo()}createUndoPoint(){this.undoList.createUndoPoint()}get LayoutSettings(){return this.graph().layoutSettings}get EdgeRoutingMode(){return this.LayoutSettings.commonSettings.edgeRoutingSettings.EdgeRoutingMode}get canUndo(){return this.undoList.canUndo()}get canRedo(){return this.undoList.canRedo()}static calculateAttachmentSegment(t){let e=T.GeomObject.getGeom(t.parent.entity);if(e!=null)if(Q.CalculateAttachedSegmentEnd(t,e),T.Point.closeDistEps(t.attachmentSegmentEnd,t.center))t.attachmentSegmentStart=t.center;else{let i=T.Curve.intersectionOne(t.boundingBox.perimeter(),T.LineSegment.mkPP(t.attachmentSegmentEnd,t.center),!1);t.attachmentSegmentStart=i!=null?i.x:t.center}}static CalculateAttachedSegmentEnd(t,e){t.attachmentSegmentEnd=e.curve.value(e.curve.closestParameter(t.center))}drag(t,e,i){if(!(t.x==0&&t.y==0)){for(let u of this.objectsToDrag)this.registerForUndoDrag(u.entity);this.geomEdgeWithSmoothedPolylineExposed==null?this.EdgeRoutingMode!==T.EdgeRoutingMode.Rectilinear&&this.EdgeRoutingMode!==T.EdgeRoutingMode.RectilinearToCenter?this.dragObjectsForNonRectilinearCase(t,e):this.DragObjectsForRectilinearCase(t):this.dragPolylineCorner(i,t)}}registerForUndoDrag(t){this.undoList.registerForUndoDrag(t)}DragObjectsForRectilinearCase(t){for(let e of this.objectsToDrag)e instanceof T.GeomNode&&e.translate(t);throw T.RectilinearInteractiveEditor.CreatePortsAndRouteEdges(this.LayoutSettings.commonSettings.NodeSeparation/3,1,this.graph().nodesBreadthFirst,this.graph().deepEdges,this.LayoutSettings.commonSettings.edgeRoutingSettings.EdgeRoutingMode),T.EdgeLabelPlacement.constructorG(this.graph()).run(),this.propagateChangesToClusterParents(),new Error("not implemented")}dragObjectsForNonRectilinearCase(t,e){e===0?this.DragIncrementally(t):this.dragWithStraightLines(t)}dragWithStraightLines(t){for(let e of this.objectsToDrag)e instanceof T.GeomGraph?e.deepTranslate(t):e.translate(t);this.propagateChangesToClusterParents(),this.routeEdgesAsStraightLines()}propagateChangesToClusterParents(){let t=new Set;for(let e of this.objectsToDrag){if(!(e instanceof T.GeomNode))continue;let i=e;for(let u of i.node.getAncestors()){let a=T.GeomObject.getGeom(u);a!==this.graph()&&!this.objectsToDrag.has(a)&&t.add(a)}}if(t.size>0)for(let e of this.graph().subgraphsDepthFirst){let i=e;if(t.has(i)){let u=i.getPumpedGraphWithMarginsBox();if(!u.equalEps(i.boundingBox)){this.registerForUndo(i.entity);for(let a of i.selfEdges())this.addToEdgesToReroute(a);for(let a of i.inEdges())this.addToEdgesToReroute(a);for(let a of i.outEdges())this.addToEdgesToReroute(a);i.boundingBox=u}}}}addToEdgesToReroute(t){this.edgesToReroute.add(t)}DragWithSplinesOrBundles(t){for(let e of this.objectsToDrag)e instanceof T.GeomNode&&e.translate(t);this.RunSplineRouterAndPutLabels()}RunSplineRouterAndPutLabels(){T.SplineRouter.mk5(this.graph(),this.LayoutSettings.commonSettings.edgeRoutingSettings.Padding,this.LayoutSettings.commonSettings.edgeRoutingSettings.PolylinePadding,this.LayoutSettings.commonSettings.edgeRoutingSettings.ConeAngle,this.LayoutSettings.commonSettings.edgeRoutingSettings.bundlingSettings).run(),T.EdgeLabelPlacement.constructorG(this.graph()).run()}registerForUndo(t){this.undoList.registerForUndo(t)}routeEdgesAsStraightLines(){for(let e of this.edgesToReroute)this.registerForUndo(e.entity),T.StraightLineEdges.CreateSimpleEdgeCurveWithUnderlyingPolyline(e),e.label&&this.registerForUndo(e.edge.label);T.EdgeLabelPlacement.constructorGA(this.graph(),Array.from(this.edgesToReroute)).run()}DragIncrementally(t){this.incrementalDragger==null&&this.InitIncrementalDragger(),this.incrementalDragger.Drag(t)}dragPolylineCorner(t,e){let i=Q.findClosestCornerForEdit(this.geomEdgeWithSmoothedPolylineExposed.smoothedPolyline,t);i.point=i.point.add(e),i.prev==null?wo(this.geomEdgeWithSmoothedPolylineExposed.source,i):i.next==null&&wo(this.geomEdgeWithSmoothedPolylineExposed.target,i),Q.createCurveOnChangedPolyline(this.geomEdgeWithSmoothedPolylineExposed)}static dragEdgeWithSite(t,e,i){i.point=i.point.add(t),Q.createCurveOnChangedPolyline(e)}static createCurveOnChangedPolyline(t){let e=t.smoothedPolyline.createCurve();T.Arrowhead.trimSplineAndCalculateArrowheadsII(t,t.source.boundaryCurve,t.target.boundaryCurve,e,!1)||T.Arrowhead.createBigEnoughSpline(t),t.sourcePort=new T.RelativeFloatingPort(()=>t.source.boundaryCurve,()=>t.source.center,i().sub(t.source.center)),t.targetPort=new T.RelativeFloatingPort(()=>t.target.boundaryCurve,()=>t.target.center,u().sub(t.target.center));function i(){return t.sourceArrowhead?t.sourceArrowhead.tipPosition:t.curve.start}function u(){return t.targetArrowhead?t.targetArrowhead.tipPosition:t.curve.end}}prepareForObjectDragging(t,e){this.geomEdgeWithSmoothedPolylineExposed=null,this.calculateObjectToDragAndEdgesToReroute(t),this.undoList.createUndoPoint(),e===0&&this.InitIncrementalDragger()}PrepareForClusterCollapseChange(t){throw new Error("not implemented")}InitIncrementalDragger(){this.incrementalDragger=new sr(Array.from(this.objectsToDrag).filter(t=>t instanceof T.GeomNode),this.graph(),this.LayoutSettings)}clearDraggedSets(){this.objectsToDrag.clear(),this.edgesToReroute.clear()}addToObjectsToDrag(t){this.objectsToDrag.add(t)}calculateObjectToDragAndEdgesToReroute(t){this.clearDraggedSets();for(let e of t)this.addToObjectsToDrag(e),e instanceof T.GeomEdge&&(this.addToObjectsToDrag(e.source),this.addToObjectsToDrag(e.target));this.removeClusterSuccessorsFromObjectsToDrag(),this.calculateDragSetsForEdges()}removeClusterSuccessorsFromObjectsToDrag(){let t=new Array;for(let e of this.objectsToDrag)this.hasAncestorInObjectsToDrag(e)&&t.push(e);for(let e of t)this.objectsToDrag.delete(e)}calculateDragSetsForEdges(){for(let t of Array.from(this.objectsToDrag))t instanceof T.GeomGraph?this.addGeomGraphEdgesToRerouteOrDrag(t):t instanceof T.GeomNode?this.addNodeEdgesToRerouteOrDrag(t):t instanceof T.GeomEdge&&t.edge.label&&this.addToObjectsToDrag(t.edge.label.getAttr(T.AttributeRegistry.GeomObjectIndex))}addNodeEdgesToRerouteOrDrag(t){T.Assert.assert(!(t instanceof T.GeomGraph));for(let e of t.selfEdges())this.addToObjectsToDrag(e);for(let e of t.inEdges())this.hasSelfOrAncestorInObjectsToDrag(e.source)?this.addToObjectsToDrag(e):this.addToEdgesToReroute(e);for(let e of t.outEdges())this.hasSelfOrAncestorInObjectsToDrag(e.target)?this.addToObjectsToDrag(e):this.addToEdgesToReroute(e);if(t instanceof T.GeomGraph)for(let e of t.nodesBreadthFirst)this.addNodeEdgesToRerouteOrDrag(e)}addGeomGraphEdgesToRerouteOrDrag(t){T.Assert.assert(t instanceof T.GeomGraph);for(let e of t.selfEdges())this.addToObjectsToDrag(e);for(let e of t.inEdges())t.isAncestor(e.source)||(this.hasSelfOrAncestorInObjectsToDrag(e.source)?this.addToObjectsToDrag(e):this.addToEdgesToReroute(e));for(let e of t.outEdges())t.isAncestor(e.target)||(this.hasSelfOrAncestorInObjectsToDrag(e.target)?this.addToObjectsToDrag(e):this.addToEdgesToReroute(e));for(let e of t.nodesBreadthFirst){for(let i of e.outEdges()){let u=i.target;t.isAncestor(u)||(this.hasSelfOrAncestorInObjectsToDrag(u)?this.addToObjectsToDrag(i):this.addToEdgesToReroute(i))}for(let i of e.inEdges()){let u=i.source;t.isAncestor(u)||(this.hasSelfOrAncestorInObjectsToDrag(u)?this.addToObjectsToDrag(i):this.addToEdgesToReroute(i))}}}hasSelfOrAncestorInObjectsToDrag(t){for(;t;){if(this.objectsToDrag.has(t))return!0;t=t.parent}return!1}hasAncestorInObjectsToDrag(t){for(t=t.parent;t;){if(this.objectsToDrag.has(t))return!0;t=t.parent}return!1}static CalculateMiddleOffsetsForMultiedge(t,e,i,u){let a=Q.GetMiddleAnglesOfMultiedge(t,e),l=Array.from(a.values()),h=u*6,f=l.length/2,p=f*2===l.length,w;if(p){w=-(h/2);for(let C=f-1;C>=0;C--){let x=l[C];i.set(x,w),w-=h+(x.label?x.label.width:0)}w=h/2;for(let C=f;C<l.length;C++){let x=l[C];i.set(x,w),w+=h+(x.label?x.label.width:0)}}else{w=0;for(let C=f;C>=0;C--){let x=l[C];i.set(x,w),w=h+(x.label?x.label.width:0)}w=h;for(let C=f+1;C<l.length;C++){let x=l[C];i.set(x,w),w+=h+(x.label?x.label.width:0)}}}static GetMiddleAnglesOfMultiedge(t,e){let i=new ar,u=t[0],a=e.center,l=Q.Middle(u.curve);i.set(0,u);for(let h=1;h<t.length;h++){let f=t[h],p=Q.Middle(f.curve),w=T.Point.anglePCP(l,a,p);w>Math.PI&&(w-=Math.PI*2),i.set(w,f)}return i}static Middle(t){return t.value(.5*t.parStart+.5*t.parEnd)}static*GetMultiEdges(t){let e=new Map;for(let i of t.outEdges())Q.GetOrCreateListOfMultiedge(e,i.target).push(i);for(let i of t.inEdges())Q.GetOrCreateListOfMultiedge(e,i.source).push(i);for(let i of e.values())i.length>1&&(yield i)}static GetOrCreateListOfMultiedge(t,e){let i=t.get(e);return i||(t.set(e,i=[]),i)}prepareForGeomEdgeChange(t){T.Assert.assert(this.geomEdgeWithSmoothedPolylineExposed===t),this.createUndoPoint(),this.registerForUndo(t.edge)}undo(){this.undoList.undo()}redo(){this.undoList.redo()}clear(){this.objectsToDrag=new Set,this.edgesToReroute.clear(),this.undoList=new lr}static getPreviousCornerSite(t,e){let i=t.smoothedPolyline.headSite,u=i.next;for(;u!=null;){if(Q.betweenSites(i,u,e))return i;i=u,u=u.next}return null}static betweenSites(t,e,i){let u=T.LineSegment.closestParameterOnLineSegment(i,t.point,e.point);return u>.1&&u<.9}insertSite(t,e,i){this.prepareForGeomEdgeChange(t);let u=T.CornerSite.mkSiteSPS(i,e,i.next);Q.dragEdgeWithSite(new T.Point(0,0),t,u)}deleteSite(t,e){this.prepareForGeomEdgeChange(t),T.Assert.assert(this.geomEdgeWithSmoothedPolylineExposed===t),e.prev.next=e.next,e.next.prev=e.prev,Q.dragEdgeWithSite(new T.Point(0,0),t,e.prev)}static findClosestCornerForEdit(t,e,i=Number.POSITIVE_INFINITY){i!==Number.POSITIVE_INFINITY&&(i*=i);let u=t.headSite,a=u,l=a.point.sub(e).lengthSquared;for(;u.next!=null;){u=u.next;let h=e.sub(u.point).lengthSquared;h<l&&(a=u,l=h)}return l>i?null:a}ReactOnViewChange(){}ForgetDragging(){this.incrementalDragger=null}};function wo(n,t){let e=n.boundaryCurve;if(T.Curve.PointRelativeToCurveLocation(t.point,e)!=T.PointLocation.Outside)return;let u=T.LineSegment.mkPP(n.center,t.point),a=T.Curve.intersectionOne(u,e,!1);a&&(t.point=a.x)}function ee(n){return n.getAttr(S.AttributeRegistry.ViewerIndex)}function cr(n){return S.GeomObject.getGeom(n.entity)}function is(n){return n&&n.entity instanceof S.Node}var te=class{constructor(t){this.RadiusOfPolylineCorner=10;this.geomEdge=new S.GeomEdge(null);this.EdgeAttr=new oe(null,!0);this.arrowheadLength=S.Arrowhead.defaultArrowheadLength;this.dragGroup=new Set;this.geomGraphEditor=new Q;this.mouseMoveThreshold=.05;this.sourceLoosePolylineWrap={loosePolyline:null};this.sourceOfInsertedEdgeWrap={node:null};this.sourcePortWrap={port:null};this.targetOfInsertedEdgeWrap={node:null};this.targetPortWrap={port:null};this.dragging=!1;this.edgeAttr=new oe(null,!0);this.viewer=t,this.decorateObjectForDragging=this.defaultObjectDecorator,this.removeObjDraggingDecorations=this.defaultObjectDecoratorRemover,this.DecorateEdgeForDragging=te.TheDefaultEdgeDecoratorStub,this.decorateEdgeLabelForDragging=this.defaultEdgeLabelDecorator,this.RemoveEdgeDraggingDecorations=te.TheDefaultEdgeDecoratorStub,this.geomGraphEditor.graph=()=>S.GeomGraph.getGeom(this._graph)}resizeLabel(t,e){let i=e.getAttr(S.AttributeRegistry.DrawingObjectIndex);i.labelText=t,this.viewer.invalidate(e.getAttr(S.AttributeRegistry.ViewerIndex))}get hasEdgeInsertionPort(){return this.SourcePort!=null||this.TargetPort!=null}get insertingEdge(){return this.insertionMode==2}createUndoPoint(){this.geomGraphEditor.createUndoPoint()}registerDelete(t){this.geomGraphEditor.registerDelete(t)}registerAdd(t){this.geomGraphEditor.registerAdd(t)}forget(t){this.dragGroup.delete(t),this.edgeWithSmoothedPolylineExposed===t&&(this.edgeWithSmoothedPolylineExposed=null)}get edgeWithSmoothedPolylineExposed(){return this._edgeWithSmoothedPolylineExposed}set edgeWithSmoothedPolylineExposed(t){this._edgeWithSmoothedPolylineExposed!==t&&this._edgeWithSmoothedPolylineExposed&&(this._edgeWithSmoothedPolylineExposed.selectedForEditing=!1),this._edgeWithSmoothedPolylineExposed=t,t?(t.selectedForEditing=!0,this.geomGraphEditor.geomEdgeWithSmoothedPolylineExposed=S.GeomEdge.getGeom(t.edge)):this.geomGraphEditor.geomEdgeWithSmoothedPolylineExposed=null}get ActiveDraggedObject(){return this.aActiveDraggedObject}set ActiveDraggedObject(t){this.aActiveDraggedObject=t}get interactiveEdgeRouter(){return this._interactiveEdgeRouter}set interactiveEdgeRouter(t){this._interactiveEdgeRouter=t}ViewerObjectUnderMouseCursorChanged(t,e){this.TargetPort!=null&&(this.viewer.RemoveTargetPortEdgeRouting(),this.TargetPort=null)}ViewChangeEventHandler(t,e){this._graph!=null}get graph(){return this._graph}set graph(t){this._graph=t,this.geomGraphEditor.clear()}get MouseMoveThreshold(){return this.mouseMoveThreshold}set MouseMoveThreshold(t){this.mouseMoveThreshold=t}get DecorateEdgeForDragging(){return this.decorateEdgeForDragging}set DecorateEdgeForDragging(t){this.decorateEdgeForDragging=t}get RemoveEdgeDraggingDecorations(){return this.removeEdgeDraggingDecorations}set RemoveEdgeDraggingDecorations(t){this.removeEdgeDraggingDecorations=t}get NodeInsertPredicate(){return this.nodeInsertPredicate}set NodeInsertPredicate(t){this.nodeInsertPredicate=t}get SourceOfInsertedEdge(){return this.sourceOfInsertedEdgeWrap.node}set SourceOfInsertedEdge(t){this.sourceOfInsertedEdgeWrap.node=t}get TargetOfInsertedEdge(){return this.targetOfInsertedEdgeWrap.node}set TargetOfInsertedEdge(t){this.targetOfInsertedEdgeWrap.node=t}get SourcePort(){return this.sourcePortWrap.port}set SourcePort(t){this.sourcePortWrap.port=t}get TargetPort(){return this.targetPortWrap.port}set TargetPort(t){this.targetPortWrap.port=t}get CanUndo(){return this.geomGraphEditor.canUndo}get CanRedo(){return this.geomGraphEditor.canRedo}get insertionMode(){return this.viewer==null?0:this.viewer.insertionMode}set insertionMode(t){this.viewer!=null&&(this.viewer.insertionMode=t)}viewerGraphChanged(){this._graph=this.viewer.graph,this.geomGraphEditor.clear(),this._graph!=null&&S.GeomGraph.getGeom(this._graph)!=null&&this.geomGraphEditor.clear(),this.ActiveDraggedObject=null,this.dragGroup.clear(),this.cleanObstacles()}cleanObstacles(){this.interactiveEdgeRouter=null,this.looseObstaclesToTheirViewerNodes=null,this.SourceOfInsertedEdge=null,this.TargetOfInsertedEdge=null,this.SourcePort=null,this.TargetPort=null,this.viewer.RemoveSourcePortEdgeRouting(),this.viewer.RemoveTargetPortEdgeRouting()}RelayoutOnIsCollapsedChanged(t){this.geomGraphEditor.PrepareForClusterCollapseChange([t]);let e=S.GeomGraph.getGeom(t.node);e.isCollapsed?this.CollapseCluster(t.node):this.ExpandCluster(e);for(let i of this.geomGraphEditor.entitiesToBeChangedByUndo())this.invalidate(i)}relayout(t){let e=t;for(;e.parent!=null;)e=e.parent;(0,S.layoutGeomGraph)(e),this.MakeExpandedNodesVisible(t.entity)}ExpandCluster(t){t!=null&&this.relayout(t)}MakeExpandedNodesVisible(t){for(let e of t.shallowNodes){let i=ee(e);te.UnhideNodeEdges(e),i.isVisible=!0,e instanceof S.Graph&&e.getAttr(S.AttributeRegistry.GeomObjectIndex).isCollapsed==!1&&this.MakeExpandedNodesVisible(e)}}static UnhideNodeEdges(t){for(let e of t.selfEdges){let i=ee(e);i.isVisible=!0}for(let e of t.outEdges)ee(e.target).isVisible&&(ee(e).isVisible=!0);for(let e of t.inEdges)ee(e.source).isVisible&&(ee(e).isVisible=!0)}CollapseCluster(t){te.HideCollapsed(t);let e=S.GeomGraph.getGeom(t),i=e.center;e.boundingBox=S.Rectangle.mkSizeCenter(e.labelSize,i),this.relayout(e)}static HideCollapsed(t){for(let e of t.shallowNodes)ee(e).isVisible=!1,e instanceof S.Graph&&S.GeomGraph.getGeom(e).isCollapsed==!1&&te.HideCollapsed(e)}defaultObjectDecorator(t){if(t.entity instanceof S.Label){this.decorateEdgeLabelForDragging(t);return}let e=de.getDrawingObj(t.entity),i=e.penwidth;t.unmarkedForDraggingCallback||(t.unmarkedForDraggingCallback=()=>_.getDrawingObj(t.entity).penwidth=i),e.penwidth=Math.max(this.viewer.LineThicknessForEditing,i*2),this.invalidate(t.entity)}defaultObjectDecoratorRemover(t){let e=t.unmarkedForDraggingCallback;e&&(e(),t.unmarkedForDraggingCallback=null,this.invalidate(t.entity));let i=t.entity;if(i instanceof S.Node)for(let u of i.edges)this.removeObjDraggingDecorations(ee(u))}static TheDefaultEdgeDecoratorStub(t){}defaultEdgeLabelDecorator(t){let e=t.entity.getAttr(S.AttributeRegistry.GeomObjectIndex);t.markedForDragging&&(Q.calculateAttachmentSegment(e),t.unmarkedForDraggingCallback=()=>{this.invalidate(t.entity)}),this.invalidate(t.entity)}static LeftButtonIsPressed(t){return(t.buttons&1)==1}static MiddleButtonIsPressed(t){return(t.buttons&4)==4}static RightButtonIsPressed(t){return(t.buttons&2)==2}MouseDownPointAndMouseUpPointsAreFarEnoughOnScreen(t){if(this.mouseDownScreenPoint==null)return!1;let e=t.clientX,i=t.clientY,u=(this.mouseDownScreenPoint.x-e)/this.viewer.DpiX,a=(this.mouseDownScreenPoint.y-i)/this.viewer.DpiY;return Math.sqrt(u*u+a*a)>this.MouseMoveThreshold/3}analyzeLeftMouseButtonClick(t){this.edgeWithSmoothedPolylineExposed?this.toggleCornerForSelectedEdge():this.viewer.objectUnderMouseCursor&&this.analyzeLeftMouseButtonClickOnObjectUnderCursor(t)}analyzeLeftMouseButtonClickOnObjectUnderCursor(t){let e=this.viewer.objectUnderMouseCursor,i=t.ctrlKey||t.shiftKey,u=e.entity;if(u instanceof S.Edge){let a=u.getAttr(S.AttributeRegistry.GeomObjectIndex);a!=null&&this.viewer.layoutEditingEnabled&&(a.smoothedPolyline==null&&(a.smoothedPolyline=te.CreateUnderlyingPolyline(a)),this.edgeWithSmoothedPolylineExposed!==e&&this.switchToEdgeEditing(e))}else e.markedForDragging?this.unselectForDragging(e):(i||this.unselectEverything(),this.selectObjectForDragging(e)),this.unselectEdge()}toggleCornerForSelectedEdge(){let t=Q.findClosestCornerForEdit(S.GeomEdge.getGeom(this.edgeWithSmoothedPolylineExposed.edge).smoothedPolyline,this.mouseDownGraphPoint,this.edgeWithSmoothedPolylineExposed.radiusOfPolylineCorner);if(t==null)this.tryInsertCorner();else{if(t.prev==null||t.next==null)return;this.geomGraphEditor.createUndoPoint(),this.geomGraphEditor.registerForUndo(this.edgeWithSmoothedPolylineExposed.edge),this.geomGraphEditor.deleteSite(S.GeomEdge.getGeom(this.edgeWithSmoothedPolylineExposed.edge),t),this.invalidate(this.edgeWithSmoothedPolylineExposed.entity)}}tryInsertCorner(){if(!this.closeEnoughToSelectedEdge())this.unselectEdge();else{let t=Q.getPreviousCornerSite(S.GeomEdge.getGeom(this.edgeWithSmoothedPolylineExposed.edge),this.mouseDownGraphPoint);if(t==null||t.next==null)return;this.geomGraphEditor.insertSite(S.GeomEdge.getGeom(this.edgeWithSmoothedPolylineExposed.edge),this.mouseDownGraphPoint,t),this.invalidate(this.edgeWithSmoothedPolylineExposed.edge)}}closeEnoughToSelectedEdge(){let t=S.GeomEdge.getGeom(this.edgeWithSmoothedPolylineExposed.edge).curve,e=t.closestParameter(this.mouseDownGraphPoint);return t.value(e).sub(this.mouseDownGraphPoint).length<this.edgeWithSmoothedPolylineExposed.radiusOfPolylineCorner}static CreateUnderlyingPolyline(t){return S.SmoothedPolyline.mkFromPoints(te.CurvePoints(t))}static*CurvePoints(t){if(yield t.source.center,t.curve instanceof S.Curve){let i=t.curve;i.segs.length>0&&(yield i.start);for(let u=0;u<i.segs.length;u++)yield i.segs[u].end}yield t.target.center}ModifierKeyIsPressed(){return(this.viewer.modifierKeys&2)==2||(this.viewer.modifierKeys&4)==4}switchToEdgeEditing(t){this.unselectEverything(),this.edgeWithSmoothedPolylineExposed=t,t.radiusOfPolylineCorner=this.viewer.smoothedPolylineCircleRadius,this.DecorateEdgeForDragging(t),this.invalidate(t.entity)}*ViewerNodes(){for(let t of this.viewer.entities)t.entity instanceof S.Node&&(yield t.entity.getAttr(S.AttributeRegistry.ViewerIndex))}selectObjectForDragging(t){t.markedForDragging==!1&&(t.markedForDragging=!0,this.dragGroup.add(t),this.decorateObjectForDragging(t))}prepareToRemoveFromDragGroup(t){t.markedForDragging=!1,this.removeObjDraggingDecorations(t)}unselectForDragging(t){this.prepareToRemoveFromDragGroup(t),this.dragGroup.delete(t)}unselectEverything(){for(let t of this.dragGroup)this.prepareToRemoveFromDragGroup(t);this.dragGroup.clear(),this.unselectEdge()}unselectEdge(){this.edgeWithSmoothedPolylineExposed!=null&&(this.edgeWithSmoothedPolylineExposed.selectedForEditing=!1,this.removeEdgeDraggingDecorations(this.edgeWithSmoothedPolylineExposed),this.invalidate(this.edgeWithSmoothedPolylineExposed.edge),this.edgeWithSmoothedPolylineExposed=null)}static*Edges(t){for(let e of t.entity.edges)yield ee(e)}viewerMouseDown(t,e){if(!this.viewer.layoutEditingEnabled||this.viewer.graph==null||(this.viewer.setObjectUnderCursorFromEvent(e),this.mouseDownGraphPoint=this.viewer.screenToSource(e),this.mouseDownScreenPoint=new S.Point(e.clientX,e.clientY),!te.LeftButtonIsPressed(e)))return!1;if(this.leftMouseButtonWasPressed=!0,this.insertingEdge)return!0;if(this.insertionMode==1)return this.insertNode(),!0;if(this.edgeWithSmoothedPolylineExposed!=null)return this.mouseIsInsideOfCornerSite(e)&&e.preventDefault(),!0;let i=this.viewer.objectUnderMouseCursor;return i&&!this.viewer.objectUnderMouseCursor.hasOwnProperty("edge")?(this.ActiveDraggedObject=i,!0):this.ActiveDraggedObject!=null?(e.preventDefault(),!0):!1}insertNode(){let t=this.findNodeID(),e=new S.Node(t);this._graph.addNode(e),new de(e);let i=this.viewer.createIViewerNodeN(e,this.mouseDownGraphPoint);this.viewer.addNode(i,!0)}findNodeID(){let t=0,e="node"+t.toString();for(;this._graph.findNode(e);)e="node"+ ++t;return e}viewerMouseMove(t,e){!this.viewer.layoutEditingEnabled||(te.LeftButtonIsPressed(e)?this.ActiveDraggedObject!=null||this.activeCornerSite!=null?this.drag(e):this.insertingEdge?this.mouseMoveInsertEdgeLeftButtonOn(e):this.MouseMoveLiveSelectObjectsForDragging(e):this.insertingEdge&&this.mouseMoveInsertEdgeNoButtons(e))}setDraggingFlag(t){!this.dragging&&this.MouseDownPointAndMouseUpPointsAreFarEnoughOnScreen(t)&&(this.dragging=!0)}TrySetNodePort(t,e,i,u){if(this.graph==null)return;S.Assert.assert(this.insertingEdge);let a=this.viewer.screenToSource(t);return u.loosePolyline=null,this.DraggingStraightLine()?e.node=this.setPortWhenDraggingStraightLine(i,a):(this.interactiveEdgeRouter==null&&this.PrepareForEdgeDragging(),u.loosePolyline=this.interactiveEdgeRouter.GetHitLoosePolyline(a),u.loosePolyline!=null?this.SetPortUnderLoosePolyline(a,u.loosePolyline,e,i):(e.node=null,i.port=null)),i.port!=null}setPortWhenDraggingStraightLine(t,e){if(is(this.viewer.objectUnderMouseCursor)){let i=this.viewer.objectUnderMouseCursor,u={portParameter:0},a=cr(i);return this.NeedToCreateBoundaryPort(e,i,u)?t.port=this.CreateOrUpdateCurvePort(u.portParameter,a,t.port):te.PointIsInside(e,a.boundaryCurve)?t.port=this.CreateFloatingPort(a,e):t.port=null,i}return t.port=null,null}CreateOrUpdateCurvePort(t,e,i){if(!(i instanceof S.CurvePort))return S.CurvePort.mk(e.boundaryCurve,t);let a=i;return a.parameter=t,a.curve=e.boundaryCurve,i}CreateFloatingPort(t,e){return new S.FloatingPort(t.boundaryCurve,e)}SetPortUnderLoosePolyline(t,e,i,u){let a=Number.POSITIVE_INFINITY,l=0;for(let h of this.GetViewerNodesInsideOfLooseObstacle(e)){let f=h.entity.getAttr(S.AttributeRegistry.GeomObjectIndex).boundaryCurve;if(te.PointIsInside(t,f)){i.node=h,this.SetPortForMousePositionInsideOfNode(t,i.node,u);return}let p=f.closestParameter(t),w=f.value(p).sub(t).length;w<a&&(l=p,a=w,i.node=h)}u.port=this.CreateOrUpdateCurvePort(l,cr(i.node),u.port)}GetViewerNodesInsideOfLooseObstacle(t){return this.looseObstaclesToTheirViewerNodes==null&&this.InitLooseObstaclesToViewerNodeMap(),this.looseObstaclesToTheirViewerNodes.get(t)}InitLooseObstaclesToViewerNodeMap(){this.looseObstaclesToTheirViewerNodes=new Map;for(let t of this.ViewerNodes()){let e=this.interactiveEdgeRouter.GetHitLoosePolyline(cr(t).center),i=this.looseObstaclesToTheirViewerNodes.get(e);i==null&&this.looseObstaclesToTheirViewerNodes.set(e,i=new Array),i.push(t)}}SetPortForMousePositionInsideOfNode(t,e,i){let u=cr(e),a={portParameter:0};this.NeedToCreateBoundaryPort(t,e,a)?i.port=this.CreateOrUpdateCurvePort(a.portParameter,u,i.port):i.port=this.CreateFloatingPort(u,t)}static PointIsInside(t,e){return S.Curve.PointRelativeToCurveLocation(t,e)==S.PointLocation.Inside}NeedToCreateBoundaryPort(t,e,i){let u=e.entity.getAttr(S.AttributeRegistry.DrawingObjectIndex),a=cr(e).boundaryCurve;i.portParameter=a.closestParameter(t);let l=a.value(i.portParameter);return t.sub(l).length<=this.viewer.smoothedPolylineCircleRadius*2+u.penwidth/2?(this.TryToSnapToTheSegmentEnd(i,a,l),!0):!1}TryToSnapToTheSegmentEnd(t,e,i){if(e instanceof S.Curve){let u=e.getSegIndexParam(t.portParameter),a=u.par,l=e.segs[u.segIndex];a-l.parStart<l.parEnd-a&&(l.start.sub(i).length<this.viewer.smoothedPolylineCircleRadius*2?t.portParameter-=a-l.parStart:l.end.sub(i).length<this.viewer.smoothedPolylineCircleRadius*2&&(t.portParameter+=+(l.parEnd-a)))}}drag(t){if(!this.dragging)if(this.MouseDownPointAndMouseUpPointsAreFarEnoughOnScreen(t))this.prepareFirstTimeDragging();else return;let e=this.viewer.screenToSource(t);this.handleTheMouseCursorOutOfTheBoundingBox(e),this.geomGraphEditor.drag(e.sub(this._lastDragPoint),this.GetDraggingMode(),this._lastDragPoint);for(let i of this.geomGraphEditor.entitiesToBeChangedByUndo())this.invalidate(i);t.stopPropagation(),this._lastDragPoint=e}prepareFirstTimeDragging(){this.dragging=!0,this.activeCornerSite!=null?this.geomGraphEditor.prepareForGeomEdgeChange(this.edgeWithSmoothedPolylineExposed.edge.getAttr(S.AttributeRegistry.GeomObjectIndex)):this.ActiveDraggedObject!=null&&(this.unselectEdge(),this.ActiveDraggedObject.markedForDragging||this.unselectEverything(),this.prepareForDragging()),this._lastDragPoint=this.mouseDownGraphPoint}handleTheMouseCursorOutOfTheBoundingBox(t){let e=this.viewer.smoothedPolylineCircleRadius,i=S.Rectangle.mkSizeCenter(new S.Size(e,e),t),u=S.GeomGraph.getGeom(this._graph);u.boundingBox.containsRect(i)||(this.geomGraphEditor.registerForUndo(this._graph),u.boundingBox=u.boundingBox.addRec(i),this.invalidate(this._graph))}prepareForDragging(){this.selectObjectForDragging(this.ActiveDraggedObject),this.geomGraphEditor.prepareForObjectDragging(this.DraggedGeomObjects(),this.GetDraggingMode())}GetDraggingMode(){return(this.viewer.modifierKeys&4)==4||this.viewer.IncrementalDraggingModeAlways?0:1}static RouteEdgesRectilinearly(t){let e=t.graph.getAttr(S.AttributeRegistry.GeomObjectIndex),i=e.layoutSettings;S.RectilinearInteractiveEditor.CreatePortsAndRouteEdges(i.commonSettings.NodeSeparation/3,1,e.nodesBreadthFirst,e.deepEdges,i.commonSettings.edgeRoutingSettings.EdgeRoutingMode),S.EdgeLabelPlacement.constructorG(e).run()}*DraggedGeomObjects(){let t=te.GetActiveObjectCluster(this.ActiveDraggedObject);for(let e of this.dragGroup)te.GetActiveObjectCluster(e)==t&&(yield S.GeomObject.getGeom(e.entity))}static GetActiveObjectCluster(t){return t.entity.parent}viewerMouseUp(t,e){e.defaultPrevented||!this.viewer.layoutEditingEnabled||this.handleMouseUpOnLayoutEnabled(e)}handleMouseUpOnLayoutEnabled(t){if(!this.MouseDownPointAndMouseUpPointsAreFarEnoughOnScreen(t)&&this.leftMouseButtonWasPressed)this.viewer.objectUnderMouseCursor!=null||this.edgeWithSmoothedPolylineExposed!=null?(this.analyzeLeftMouseButtonClick(t),t.preventDefault()):this.unselectEverything();else if(this.dragging){this.insertingEdge?this.InsertEdgeOnMouseUp():(this.geomGraphEditor.updateDeltaForDragUndo(this.mouseDownGraphPoint.sub(this._lastDragPoint)),this.interactiveEdgeRouter=null,this.looseObstaclesToTheirViewerNodes=null);let i=S.GeomGraph.getGeom(this._graph),u=i.getPumpedGraphWithMarginsBox();u.equal(i.boundingBox)||(this.geomGraphEditor.registerForUndo(this._graph),i.boundingBox=u,this.invalidate(this._graph),t.preventDefault())}this.dragging=!1,this.geomGraphEditor.ForgetDragging(),this.activeCornerSite=null,this.ActiveDraggedObject=null,this.leftMouseButtonWasPressed=!1,this.TargetPort!=null&&this.viewer.RemoveTargetPortEdgeRouting(),this.SourcePort!=null&&this.viewer.RemoveSourcePortEdgeRouting(),this.TargetOfInsertedEdge=null,this.SourceOfInsertedEdge=null,this.TargetPort=null,this.SourcePort=null}InsertEdgeOnMouseUp(){if(this.viewer.stopDrawingRubberEdge(),this.TargetPort!=null){let t=this.FinishRoutingEdge();this.addEdgeToTheViewer(t)}this.interactiveEdgeRouter.Clean()}addEdgeToTheViewer(t){let e=this.viewer.createEdgeWithGivenGeometry(t);this.viewer.addEdge(e,!0)}mkArrowhead(){let t=new S.Arrowhead;return t.length=this.arrowheadLength,t}FinishRoutingEdge(){let t=new S.Edge(this.sourceOfInsertedEdgeWrap.node.entity,this.targetOfInsertedEdgeWrap.node.entity);t.add();let e=this.EdgeAttr.clone();return e.rebind(t),this.geomEdge.rebind(t),this.geomEdge.sourceArrowhead=e.arrowtail==6?null:this.mkArrowhead(),this.geomEdge.targetArrowhead=e.arrowhead==6?null:this.mkArrowhead(),this.TargetOfInsertedEdge!=this.SourceOfInsertedEdge?(this.geomEdge.curve instanceof S.LineSegment||(this.interactiveEdgeRouter.TryToRemoveInflectionsAndCollinearSegments(this.geomEdge.smoothedPolyline),this.interactiveEdgeRouter.SmoothenCorners(this.geomEdge.smoothedPolyline),this.geomEdge.curve=this.geomEdge.smoothedPolyline.createCurve()),S.Arrowhead.trimSplineAndCalculateArrowheads(this.geomEdge,this.geomEdge.curve,!0)):this.geomEdge=te.CreateEdgeGeometryForSelfEdge(this.SourceOfInsertedEdge.entity),this.viewer.RemoveSourcePortEdgeRouting(),this.viewer.RemoveTargetPortEdgeRouting(),t}static CreateEdgeGeometryForSelfEdge(t){let e=new S.Edge(t,t),i=new S.GeomEdge(e);return S.StraightLineEdges.CreateSimpleEdgeCurveWithUnderlyingPolyline(i),i}SelectEntitiesForDraggingWithRectangle(t){}mouseIsInsideOfCornerSite(t){let e=this.viewer.screenToSource(t),i=this.edgeWithSmoothedPolylineExposed.edge.getAttr(S.AttributeRegistry.DrawingObjectIndex).penwidth;return this.activeCornerSite=Q.findClosestCornerForEdit(S.GeomEdge.getGeom(this.edgeWithSmoothedPolylineExposed.edge).smoothedPolyline,e,this.edgeWithSmoothedPolylineExposed.radiusOfPolylineCorner+i),this.activeCornerSite!==null}MouseScreenPointIsCloseEnoughToVertex(t,e){return t.sub(this.mouseDownGraphPoint).length<e}invalidate(t){let e=ee(t);if(!!e){if(e.entity instanceof S.Label){if(e.markedForDragging){let i=S.GeomObject.getGeom(e.entity);Q.calculateAttachmentSegment(i)}}else e.entity instanceof S.Edge&&e.entity.label&&this.viewer.invalidate(ee(e.entity.label));if(this.viewer.invalidate(e),t instanceof S.Graph){for(let i of t.nodesBreadthFirst)this.viewer.invalidate(ee(i));for(let i of t.deepEdges)this.viewer.invalidate(ee(i)),i.label&&this.viewer.invalidate(ee(i.label))}}}undo(){if(this.geomGraphEditor.canUndo){let t=new Set(this.geomGraphEditor.entitiesToBeChangedByUndo());this.geomGraphEditor.undo();for(let e of t){let i=ee(e);i.markedForDragging?this.dragGroup.add(i):this.dragGroup.delete(i),this.invalidate(e)}}}redo(){if(this.geomGraphEditor.canRedo){let t=new Set(this.geomGraphEditor.entitiesToBeChangedByRedo());this.geomGraphEditor.redo();for(let e of t){let i=ee(e);i.markedForDragging?this.dragGroup.add(i):this.dragGroup.delete(i),this.invalidate(e)}}}static RectRouting(t){return t==S.EdgeRoutingMode.Rectilinear||t==S.EdgeRoutingMode.RectilinearToCenter}PrepareForEdgeDragging(){if(this.viewer.graph==null||this.DraggingStraightLine())return;let t=S.GeomGraph.getGeom(this.viewer.graph).layoutSettings;if(!te.RectRouting(t.commonSettings.edgeRoutingSettings.EdgeRoutingMode)&&this.interactiveEdgeRouter==null){let e=t.commonSettings.NodeSeparation/3,i=.65*e;this.interactiveEdgeRouter=S.InteractiveEdgeRouter.constructorANNN(Array.from(this._graph.nodesBreadthFirst).map(u=>S.GeomNode.getGeom(u).boundaryCurve),e,i,0)}}mouseMoveInsertEdgeNoButtons(t){let e=this.SourceOfInsertedEdge;this.TrySetNodePort(t,this.sourceOfInsertedEdgeWrap,this.sourcePortWrap,this.sourceLoosePolylineWrap)?this.viewer.SetSourcePortForEdgeRouting(this.sourcePortWrap.port.Location):e!=null&&this.viewer.RemoveSourcePortEdgeRouting()}mouseMoveInsertEdgeLeftButtonOn(t){if(this.SourcePort!=null){if(this.setDraggingFlag(t),this.dragging){let e={loosePolyline:null};this.TrySetNodePort(t,this.targetOfInsertedEdgeWrap,this.targetPortWrap,e)?(this.viewer.setTargetPortForEdgeRouting(this.targetPortWrap.port.Location),this.drawEdgeInteractivelyToPort(e.loosePolyline,this.DraggingStraightLine())):(this.viewer.RemoveTargetPortEdgeRouting(),this.DrawEdgeInteractivelyToLocation(t,this.DraggingStraightLine()))}t.preventDefault()}}MouseMoveLiveSelectObjectsForDragging(t){this.unselectEverything(),os(t)&&(this.viewer.modifierKeys&4)!=4&&this.SelectEntitiesForDraggingWithRectangle(t)}DrawEdgeInteractivelyToLocation(t,e){this.DrawEdgeInteractivelyToLocationP(this.viewer.screenToSource(t),e)}DrawEdgeInteractivelyToLocationP(t,e){this.geomEdge=e?this.getStraightLineEdge(t):this.CalculateEdgeInteractivelyToLocation(t),this.viewer.drawRubberEdge(this.geomEdge)}getStraightLineEdge(t){let e=new S.GeomEdge(null);return e.curve=S.LineSegment.mkPP(this.SourcePort.Location,t),e}CalculateEdgeInteractivelyToLocation(t){return this.interactiveEdgeRouter.SourcePort==null&&this.interactiveEdgeRouter.SetSourcePortAndSourceLoosePolyline(this.SourcePort,this.sourceLoosePolylineWrap.loosePolyline),this.interactiveEdgeRouter.RouteEdgeToLocation(t)}drawEdgeInteractivelyToPort(t,e){this.geomEdge=e?this.getStraightLineEdge(this.TargetPort.Location):this.CalculateEdgeInteractively(this.TargetPort,t),this.viewer.drawRubberEdge(this.geomEdge)}DraggingStraightLine(){return this.viewer.graph==null?!0:this.interactiveEdgeRouter!=null&&this.interactiveEdgeRouter.OverlapsDetected}CalculateEdgeInteractively(t,e){this.interactiveEdgeRouter.SourcePort==null&&this.interactiveEdgeRouter.SetSourcePortAndSourceLoosePolyline(this.SourcePort,this.sourceLoosePolylineWrap.loosePolyline);let i,u=null;if(this.SourceOfInsertedEdge==this.TargetOfInsertedEdge)i=S.LineSegment.mkPP(this.SourcePort.Location,this.TargetPort.Location);else{let l={smoothedPolyline:null};i=this.interactiveEdgeRouter.RouteEdgeToPort(t,e,!1,l),u=l.smoothedPolyline}let a=new S.GeomEdge(null);return a.curve=i,a.smoothedPolyline=u,a}};function os(n){return(n.buttons&1)==1}var V=re(se(),1);var z=re(se(),1);var Ws=re(Bo(),1),H=re(se(),1);var Ls=re(Lo(),1);function Ar(n){let t=Hs(n);return{type:Ks(n),id:n.id,children:js(n,t)}}function Vs(n){return{type:"edge_stmt",edge_list:[{type:"node_id",id:n.source.id},{type:"node_id",id:n.target.id}],attr_list:Array.from($s(n))}}function js(n,t){let e=new Map,i=[],u=H.GeomGraph.getGeom(n);if(u){let a=Array.from(Vo(u));i.push({type:"attr_stmt",target:"graph",attr_list:a})}Js(i,n);for(let a of n.nodesBreadthFirst)e.set(a.id,Us(a));for(let a of n.nodesBreadthFirst){if(a.parent===n)continue;e.get(a.parent.id).children.push(e.get(a.id))}for(let a of n.deepEdges){let l=Vs(a),h=_s(a,t);h===n?i.push(l):e.get(h.id).children.push(l)}for(let a of n.shallowNodes)i.push(e.get(a.id));return i}function*$s(n){let t=H.GeomObject.getGeom(n);if(t&&t.curve&&(yield{type:"attr",id:"edgeCurve",eq:JSON.stringify((0,H.iCurveToJSON)(t.curve))},t.sourceArrowhead&&(yield{type:"attr",id:"sourceArrowhead",eq:JSON.stringify(t.sourceArrowhead.tipPosition.toJSON())}),t.targetArrowhead&&(yield{type:"attr",id:"targetArrowhead",eq:JSON.stringify(t.targetArrowhead.tipPosition.toJSON())}),n.label)){let e=n.label.getAttr(H.AttributeRegistry.GeomObjectIndex).boundingBox,i={left:e.left,right:e.right,top:e.top,bottom:e.bottom};yield{type:"attr",id:"geomEdgeLabel",eq:JSON.stringify(i)}}yield*gi(_.getDrawingObj(n))}function Us(n){if(n instanceof H.Graph){let e=Array.from(Vo(H.GeomGraph.getGeom(n))),i=[],u={type:"attr_stmt",target:"graph",attr_list:e};return i.push(u),{type:"subgraph",children:i,id:n.id}}else return{type:"node_stmt",node_id:{type:"node_id",id:n.id},attr_list:Array.from(zs(n))}}function qs(n){let t=H.GeomNode.getGeom(n).boundaryCurve;return{type:"attr",id:"boundaryCurve",eq:JSON.stringify((0,H.iCurveToJSON)(t))}}function*zs(n){H.GeomObject.getGeom(n)&&(yield qs(n)),yield*gi(_.getDrawingObj(n))}function*gi(n){if(n.color&&n.color.keyword.toLowerCase()!=="black"&&(yield{type:"attr",id:"color",eq:n.color.toString()}),n.fillColor&&(yield{type:"attr",id:"fillColor",eq:n.fillColor.toString()}),n.labelfontcolor&&n.labelfontcolor.keyword.toLowerCase()!=="black"&&(yield{type:"attr",id:"labelfontcolor",eq:n.labelfontcolor.toString()}),!(n.labelText==null||n.labelText==="")&&n.entity&&n.labelText!==n.id&&(yield{type:"attr",id:"label",eq:n.labelText}),n.fontColor&&n.fontColor.keyword.toLowerCase()!=="black"&&(yield{type:"attr",id:"fontColor",eq:n.fontColor.toString()}),n.styles&&n.styles.length){let t=n.styles.map(e=>rr[e]).reduce((e,i)=>e.concat(","+i));yield{type:"attr",id:"style",eq:t}}n.pencolor&&n.pencolor.keyword!=="black"&&(yield{type:"attr",id:"pencolor",eq:n.pencolor.toString()}),n.penwidth&&n.penwidth!==1&&(yield{type:"attr",id:"penwidth",eq:n.penwidth.toString()}),n.rankdir&&(yield{type:"attr",id:"rankdir",eq:n.rankdir.toString()}),n.fontname&&n.fontname!==_.defaultLabelFontName&&(yield{type:"attr",id:"fontname",eq:n.fontname}),n.margin&&(yield{type:"attr",id:"margin",eq:n.margin.toString()}),n.fontsize&&n.fontsize!==_.defaultLabelFontSize&&(yield{type:"attr",id:"fontsize",eq:n.fontsize.toString()}),n.orientation&&(yield{type:"attr",id:"orientation",eq:n.orientation.toString()}),n.ranksep&&(yield{type:"attr",id:"ranksep",eq:n.ranksep.toString()}),n.arrowtail&&(yield{type:"attr",id:"arrowtail",eq:Ze[n.arrowtail]}),n.arrowhead&&(yield{type:"attr",id:"arrowhead",eq:Ze[n.arrowhead]}),n.ordering&&(yield{type:"attr",id:"ordering",eq:n.ordering.toString()}),n.bgcolor&&(yield{type:"attr",id:"bgcolor",eq:n.bgcolor.toString()}),n.pos&&(yield{type:"attr",id:"pos",eq:n.pos.toString()}),n.nodesep&&(yield{type:"attr",id:"nodesep",eq:n.nodesep.toString()}),n.arrowsize&&(yield{type:"attr",id:"arrowsize",eq:n.arrowsize.toString()}),n.samehead&&(yield{type:"attr",id:"samehead",eq:n.samehead.toString()}),n.layersep&&(yield{type:"attr",id:"layersep",eq:n.layersep.toString()}),n.clusterRank&&(yield{type:"attr",id:"clusterrank",eq:n.clusterRank.toString()}),n.measuredTextSize&&(yield{type:"attr",id:"measuredTextSize",eq:JSON.stringify(n.measuredTextSize)}),n instanceof de&&(n.shape&&n.shape!==2&&(yield{type:"attr",id:"shape",eq:n.shape.toString()}),n.xRad&&n.xRad!==3&&(yield{type:"attr",id:"xRad",eq:n.xRad.toString()}),n.yRad&&n.yRad!==3&&(yield{type:"attr",id:"yRad",eq:n.yRad.toString()}),n.padding&&n.padding!==2&&(yield{type:"attr",id:"padding",eq:n.padding.toString()}))}function Ks(n){return ye.getDrawingGraph(n).hasDirectedEdge()?"digraph":"graph"}function _s(n,t){let e=n.source,i=n.target,u=t.get(e.id),a=t.get(i.id);for(;u>a;)e=e.parent,u--;for(;u<a;)i=i.parent,a--;for(;e.parent!==i.parent;)e=e.parent,i=i.parent;return e.parent}function Hs(n){let t=new Map;return t.set(n.id,0),Wo(n,t),t}function Wo(n,t){let e=t.get(n.id)+1;for(let i of n.shallowNodes)t.set(i.id,e),i instanceof H.Graph&&Wo(i,t)}function Js(n,t){let e=ye.getDrawingObj(t);if(e==null)return;let i=e.defaultNodeObject;i&&n.push({type:"attr_stmt",target:"node",attr_list:Array.from(gi(i))})}function*Vo(n){if(n==null)return;let t=n.boundingBox;if(t&&t.isEmpty()===!1){let e={left:t.left,right:t.right,top:t.top,bottom:t.bottom};yield{type:"attr",id:"graphBoundingBox",eq:JSON.stringify(e)}}n.radX!==10&&(yield{type:"attr",id:"radX",eq:n.radX.toString()}),n.radY!==10&&(yield{type:"attr",id:"radY",eq:n.radY.toString()})}function yr(n,t,e=!1){let i=!1,u=e,a=ye.getDrawingObj(n),l=z.GeomGraph.getGeom(n);function h(f){if(!f)return;for(let C of f.subgraphs())h(C);let p=Zs(a,f,t),w=Ys(f.layoutSettings,p);u=u||w.layoutChanged,i=i||w.routingChanged,f.layoutSettings=p}if(h(l),u||i)for(let f of l.deepEdges)f.requireRouting();return u?(0,z.layoutGeomGraph)(l,null):i&&(0,z.routeEdges)(l,Array.from(l.deepEdges),null),n}function Zs(n,t,e){let i=!1;for(let a of t.deepEdges)if(a.sourceArrowhead!=null||a.targetArrowhead!=null){i=!0;break}let u;switch(e.layoutType){case"Sugiyama LR":{let a=u=new z.SugiyamaLayoutSettings;a.layerDirection=z.LayerDirectionEnum.LR;break}case"Sugiyama RL":{let a=u=new z.SugiyamaLayoutSettings;a.layerDirection=z.LayerDirectionEnum.RL;break}case"Sugiyama TB":{let a=u=new z.SugiyamaLayoutSettings;a.layerDirection=z.LayerDirectionEnum.TB;break}case"Sugiyama BT":{let a=u=new z.SugiyamaLayoutSettings;a.layerDirection=z.LayerDirectionEnum.BT;break}case"MDS":u=new z.MdsLayoutSettings;break;case"IPsepCola":u=new z.FastIncrementalLayoutSettings;break;default:{let a=t.graph.shallowNodeCount>2001||t.graph.deepEdgesCount>4e3;if(i&&!a){let l=u=new z.SugiyamaLayoutSettings;n&&n.rankdir&&(l.layerDirection=n.rankdir)}else u=new z.FastIncrementalLayoutSettings}}return e.edgeRoutingMode==null?u instanceof z.SugiyamaLayoutSettings?u.edgeRoutingSettings.EdgeRoutingMode=z.EdgeRoutingMode.SugiyamaSplines:u.edgeRoutingSettings.EdgeRoutingMode=z.EdgeRoutingMode.Spline:u.edgeRoutingSettings.EdgeRoutingMode=e.edgeRoutingMode,u}function Ys(n,t){if(!n)return{layoutChanged:!0,routingChanged:!0};let e=n.commonSettings.edgeRoutingSettings.EdgeRoutingMode!==t.commonSettings.edgeRoutingSettings.EdgeRoutingMode,i=e&&t.commonSettings.edgeRoutingSettings.EdgeRoutingMode===z.EdgeRoutingMode.SugiyamaSplines,u=n instanceof z.SugiyamaLayoutSettings&&t instanceof z.SugiyamaLayoutSettings&&n.layerDirection!=t.layerDirection;return{layoutChanged:n.constructor!==t.constructor||i||u,routingChanged:e}}var $o=re(se(),1),tt=class{constructor(t={}){this.opts={fontFamily:"sans-serif",fontSize:16,lineHeight:1,fontStyle:"normal",fontWeight:"normal"};this.el=document.createElement("canvas"),this.ctx=this.el.getContext("2d"),this.measure=this.measure.bind(this),this.setOptions(t)}setOptions(t){Object.assign(this.opts,t);let{fontFamily:e,fontSize:i,fontStyle:u,fontWeight:a}=this.opts;this.ctx.font=`${u} ${a} ${i}px ${e}`}measure(t,e){this.setOptions(e);let{fontSize:i,lineHeight:u}=this.opts,a=i*1.2,l=i*(u-1),h=0,f=t.split(`
`);for(let p of f){let w=this.ctx.measureText(p);h=Math.max(h,w.width)}return new $o.Size(h,f.length*a+(f.length-1)*l)}};var Xs=re(se(),1);function br(n,t){if(n===t)return!0;if(!n||!t)return!1;if(Array.isArray(n)){if(!Array.isArray(t)||n.length!==t.length)return!1;for(let e=0;e<n.length;e++)if(!br(n[e],t[e]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof n=="object"&&typeof t=="object"){let e=Object.keys(n),i=Object.keys(t);if(e.length!==i.length)return!1;for(let u of e)if(!t.hasOwnProperty(u)||!br(n[u],t[u]))return!1;return!0}return!1}var G=re(se(),1);var pt=re(Uo(),1),Lt=class extends G.Attribute{constructor(e,i){super(e,G.AttributeRegistry.ViewerIndex);this.isVisible=!0;this.markedForDragging=!1;this.svgData=i}clone(){throw new Error("not implemented")}rebind(e){this.entity=e,this.bind(G.AttributeRegistry.ViewerIndex)}},fi=class extends Lt{get graph(){return this.entity}},mi=class extends Lt{get node(){return this.entity}},pi=class extends Lt{},Ei=class extends Lt{get edge(){return this.entity}},Mt=class{constructor(t){this._textMeasurer=new tt;this.container=t}getShowRect(){let t=this.geomGraph.boundingBox;return new DOMRect(t.left,-t.top,t.width,t.height)}removeRubberEdge(){this.rubberEdge.remove(),this.rubberEdge=null}drawRubberEdge(t){let e=this.rubberEdge=this.createOrGetWithId(this.transformGroup,"path","rubberEdge");e.setAttribute("d",nt(t.curve)),e.setAttribute("fill","none"),e.setAttribute("stroke","black"),e.setAttribute("stroke-opacity","1"),e.setAttribute("stroke-width","1"),e.setAttribute("stroke-dasharray","5")}positionEdgeInsertionElement(t,e){let i=e?"brown":"blue",u=this.getSmoothedPolylineRadius()/2,a=nt(e?G.CurveFactory.mkCircle(u,t):G.CurveFactory.mkDiamond(u,u,t));this.edgeInsertionPortElem.setAttribute("d",a),this.edgeInsertionPortElem.setAttribute("fill",i)}prepareToEdgeInsertion(t,e){this.stopNodeInsertion(),this.edgeInsertionPortElem=this.createOrGetWithId(this.transformGroup,"path","edgeInsertCircle"),this.positionEdgeInsertionElement(t,e)}positionNodeInsertionCircle(t){let e=nt(G.CurveFactory.mkCircle(this.getSmoothedPolylineRadius()/2,t));this.nodeInsertionCircle.setAttribute("d",e),this.nodeInsertionCircle.setAttribute("fill","red")}stopNodeInsertion(){this.nodeInsertionCircle&&this.nodeInsertionCircle.remove()}stopEdgeInsertion(){this.edgeInsertionPortElem&&this.edgeInsertionPortElem.remove()}prepareToNodeInsertion(t){this.stopEdgeInsertion(),this.nodeInsertionCircle=this.createOrGetWithId(this.transformGroup,"path","nodeInsertCircle");let e=this.getSmoothedPolylineRadius()/2,i=nt(G.CurveFactory.mkCircle(e,t));this.nodeInsertionCircle.setAttribute("d",i),this.nodeInsertionCircle.setAttribute("fill","red")}invalidate(t){let e=t.entity;if(e instanceof G.Graph)e.parent&&this.drawNode(e);else if(e instanceof G.Node)this.drawNode(e);else if(e instanceof G.Edge)this.drawEdge(e);else if(e instanceof G.Label)this.drawEdgeLabel(e);else throw new Error("not implemented")}getSvgString(){return this.svg==null?null:new XMLSerializer().serializeToString(this.svg)}get geomGraph(){return G.GeomGraph.getGeom(this.graph)}clearContainer(){for(;this.container.childNodes.length>0;)this.container.removeChild(this.container.firstChild)}setGraph(t){this.clearContainer(),this.graph=t,this.graph.setAttr(G.AttributeRegistry.ViewerIndex,null),this.svg=this.createAndBindWithGraph(t,"svg",this.container),this.superTransGroup=document.createElementNS(on,"g"),this.superTransGroup.setAttribute("transform","matrix(1,0,0,1, 0, 0)"),this.svg.appendChild(this.superTransGroup),this.superTransGroup.appendChild(this.transformGroup=document.createElementNS(on,"g")),this.setTransformForTranformGroup();for(let e of this.graph.nodesBreadthFirst)this.drawNode(e);for(let e of this.graph.deepEdges)this.drawEdge(e),this.drawEdgeLabel(e.label)}setTransformForTranformGroup(){this.transformGroup.setAttribute("transform",pt.String.Format("matrix(1,0,0,-1, {0},{1})",0,0))}getTransform(){if(!this.svg)return G.PlaneTransformation.getIdentity();let t=this.superTransGroup.getScreenCTM(),e=new G.PlaneTransformation(t.a,t.b,t.e,t.c,t.d,t.f),i=new G.PlaneTransformation(1,0,0,0,-1,0);return e.multiply(i)}getScale(){try{return this.svg.getScreenCTM().a}catch(t){return 1}}drawEdge(t){if(G.GeomEdge.getGeom(t).curve==null)return;let e=this.createAndBindWithGraph(t,"g",this.transformGroup),i=this.createOrGetWithId(e,"path","curve");i.setAttribute("fill","none"),this.setStroke(i,oe.getDrawingObj(t));let u=G.GeomEdge.getGeom(t);return i.setAttribute("d",nt(u.curve)),this.addArrows(t,e),this.drawSelectedForEdit(t,e),e}drawSelectedForEdit(t,e){let i=ee(t),u="smoothPoly",a="corners";if(i.selectedForEditing)this.drawSmoothPolyline(t,e,u),this.addCornerCirclesGroup(t,e,a);else{let l=e.children.namedItem(u);l&&e.removeChild(l);let h=e.children.namedItem(a);h&&e.removeChild(h)}}addCornerCirclesGroup(t,e,i){let u=this.createOrGetWithId(e,"g",i),a=G.GeomEdge.getGeom(t).smoothedPolyline,l=0;for(let h of a)this.addCornerCircle(h,u,l++,t)}addCornerCircle(t,e,i,u){let a=this.createOrGetWithId(e,"path",i.toString()),l=this.getSmoothedPolylineRadius(),h=nt(G.CurveFactory.mkCircle(l,t));a.setAttribute("d",h),a.setAttribute("fill","none"),this.setStroke(a,oe.getDrawingObj(u))}drawSmoothPolyline(t,e,i){let u=this.createOrGetWithId(e,"path",i),a=t.getAttr(G.AttributeRegistry.GeomObjectIndex).smoothedPolyline,l=el(a);u.setAttribute("d",l),u.setAttribute("fill","none"),this.setStroke(u,oe.getDrawingObj(t))}createOrGetWithId(t,e,i){let u=t.children.namedItem(i);if(u)return u;let a=document.createElementNS(on,e);return a.id=i,t.appendChild(a),a}drawEdgeLabel(t){if(t==null)return;let e=this.createAndBindWithGraph(t,"g",this.transformGroup),i=t.getAttr(G.AttributeRegistry.GeomObjectIndex);if(!i)return;this.drawLabelAtXY(t,oe.getDrawingObj(t.parent),i.boundingBox,e,"edgeLabel");let u="attachPrompt";t.getAttr(G.AttributeRegistry.ViewerIndex).markedForDragging?this.addLabelAttachmentPrompt(t,i,e,u):this.removeLabelAttachmentPrompt(e,u)}removeLabelAttachmentPrompt(t,e){let i=t.children.namedItem(e);i&&t.removeChild(i)}addLabelAttachmentPrompt(t,e,i,u){let a=G.LineSegment.mkPP(e.attachmentSegmentStart,e.attachmentSegmentEnd),l=this.createOrGetWithId(i,"path",u);l.setAttribute("fill","none");let h=a.length;l.setAttribute("stroke-dasharray",[h*.4,h*.2,h*.4].toString()),this.setStroke(l,oe.getDrawingObj(t.parent)),l.setAttribute("d",nt(a))}addArrows(t,e){let i=G.GeomEdge.getGeom(t),u=i.curve;this.AddArrowhead(t,i.sourceArrowhead,u.start,e,"sourceArr"),this.AddArrowhead(t,i.targetArrowhead,u.end,e,"targetArr")}AddArrowhead(t,e,i,u,a){if(!e)return;let l=this.createOrGetWithId(u,"polygon",a);this.setStroke(l,oe.getDrawingObj(t));let h=ul(i,e.tipPosition);return l.setAttribute("points",zo(h)),l}setStroke(t,e){let i=un(e.color);if(t.setAttribute("stroke",i),t.setAttribute("stroke-opacity",(e.color?e.color.A/255:1).toString()),t.setAttribute("stroke-width",e.penwidth.toString()),e.styles&&e.styles.length)for(let u of e.styles)this.attachStyleToPath(t,u)}attachStyleToPath(t,e){switch(e){case 1:t.setAttribute("stroke-dasharray","5");break;case 7:t.setAttribute("stroke-dasharray","2");break;default:break}}drawNode(t){let e=this.createAndBindWithGraph(t,"g",this.transformGroup),u=G.GeomObject.getGeom(t).boundaryCurve;!u||this.drawNodeOnCurve(u,t,e)}drawNodeOnCurve(t,e,i){let u=_.getDrawingObj(e);if(u.shape!=5&&(this.makePathOnCurve(e,u,t,i,"boundaryCurve"),u.shape==10)){let a=t,l=a.aAxis.length-2*u.penwidth;a=G.CurveFactory.mkCircle(l,a.center),this.makePathOnCurve(e,u,a,i,"doubleCircle")}this.drawLabel(e,u,i)}makePathOnCurve(t,e,i,u,a){var h,f;let l=this.createOrGetWithId(u,"path",a);if(e.styles.find(p=>p==5)){let p=(f=(h=e.fillColor)!=null?h:e.color)!=null?f:de.defaultFillColor;l.setAttribute("fill",un(p))}else l.setAttribute("fill","none");l.setAttribute("d",nt(i)),l.setAttribute("stroke",un(e.color)),l.setAttribute("stroke-width",e.penwidth.toString())}drawLabel(t,e,i){!e||!e.labelText||e.labelText.length==0||e.measuredTextSize==null||this.writeLabelText(t,e.measuredTextSize,i,"nodeLabel")}writeLabelText(t,e,i,u){let a=G.GeomNode.getGeom(t),l=_.getDrawingObj(t),f=t instanceof G.Graph?G.Rectangle.creatRectangleWithSize(e,new G.Point(a.boundaryCurve.boundingBox.center.x,a.boundaryCurve.boundingBox.top-(e.height/2+l.LabelMargin))):G.Rectangle.creatRectangleWithSize(e,a.center);this.drawLabelAtXY(null,l,f,i,u)}drawLabelAtXY(t,e,i,u,a){let l=e.fontsize,h=this.createOrGetWithId(u,"text",a);h.setAttribute("text-anchor","middle"),h.setAttribute("x",i.center.x.toString()),h.setAttribute("fill",un(e.fontColor)),h.setAttribute("font-family",e.fontname),h.setAttribute("font-size",l.toString()+"px"),h.setAttribute("transform","scale(1,-1)"),this.createTspans(e.labelText,h,l,i)}createTspans(t,e,i,u){let a=`
`,l=t.split(a);for(;e.children.length;)e.removeChild(e.children.item(0));if(l.length==1){let h=this.createOrGetWithId(e,"tspan","0");h.textContent=t,h.setAttribute("text-anchor","middle"),h.setAttribute("x",u.center.x.toString()),h.setAttribute("alignment-baseline","middle"),h.setAttribute("y",(-u.center.y).toString())}else{let h=u.top-1;for(let f=0;f<l.length;f++){let p=this.createOrGetWithId(e,"tspan",f.toString());p.textContent=l[f],p.setAttribute("text-anchor","middle"),p.setAttribute("x",u.center.x.toString()),p.setAttribute("alignment-baseline","hanging"),p.setAttribute("y",(-h).toString()),h-=1.21*i}}}getViewBoxString(t){return pt.String.Format("0 0 {0} {1}",t.width,t.height)}createAndBindWithGraph(t,e,i){let u=t?ee(t):null;if(u){let l=u.svgData;return G.Assert.assert(u.svgData!=null),i!==l.parentNode&&(l.parentNode&&l.parentNode.removeChild(l),i.appendChild(l)),l}let a=document.createElementNS(on,e);return i.appendChild(a),t instanceof G.Graph?new fi(t,a):t instanceof G.Node?new mi(t,a):t instanceof G.Edge?new Ei(t,a):t instanceof G.Label&&new pi(t,a),a}};Mt.arrowAngle=25;var on="http://www.w3.org/2000/svg";function nt(n){return pt.String.Join(" ",Array.from(rl(n)))}function el(n){return pt.String.Join(" ",Array.from(tl(n)))}function*tl(n){let t=!0;for(let e of n)t?(t=!1,yield"M",yield ze(e)):(yield"L",yield ze(e))}function*rl(n){if(yield"M",yield ze(n.start),n instanceof G.Curve)for(let e of n.segs)yield il(e);else if(n instanceof G.LineSegment)yield"L",yield ze(n.end);else if(n instanceof G.BezierSeg)yield qo(n);else if(n instanceof G.Polyline){let a=n;for(let l of a.skip(1))yield"L",yield ze(l.point);a.closed&&(yield"L",yield ze(a.start))}else if(n instanceof G.Ellipse){let l=n;l.isFullEllipse()?(yield Ai(new G.Ellipse(0,Math.PI,l.aAxis,l.bAxis,l.center)),yield Ai(new G.Ellipse(Math.PI,Math.PI*2,l.aAxis,l.bAxis,l.center))):this.ellipseToString(l)}}function ze(n){return wr(n.x)+" "+wr(n.y)}function wr(n){return Math.abs(n)<1e-11?"0":n.toString()}function qo(n){return"C"+zo([n.B(1),n.B(2),n.B(3)])}function Ai(n){let t=Math.abs(n.parEnd-n.parStart)>=Math.PI?"1":"0",e=n.orientedCounterclockwise()?"1":"0";return pt.String.Join(" ","A",nl(n),wr(G.Point.angle(new G.Point(1,0),n.aAxis)/(Math.PI/180)),t,e,ze(n.end))}function nl(n){return wr(n.aAxis.length)+","+wr(n.bAxis.length)}function zo(n){return pt.String.Join(" ",n.map(t=>ze(t)))}function il(n){if(n instanceof G.LineSegment)return ol(n);if(n instanceof G.BezierSeg)return qo(n);if(n instanceof G.Ellipse)return Ai(n);throw new Error("NotImplementedException")}function ol(n){return"L "+ze(n.end)}function un(n){return n?"rgba("+n.R+","+n.G+","+n.B+","+n.A/255+")":"Black"}function ul(n,t){let e=t.sub(n),i=e;e=e.normalize();let u=new G.Point(-e.y,e.x),a=i.length*Math.tan(Mt.arrowAngle*.5*(Math.PI/180));return u=u.mul(a),[n.add(u),t,n.sub(u)]}var Pu=re(ku(),1);function Ie(n){return ee(n)}var dn=class{constructor(t=document.body){this.mouseHitDistance=.05/2;this.needCreateGeometry=!0;this.needCalculateLayout=!0;this._layoutOptions={};this.IncrementalDraggingModeAlways=!1;this.GraphChanged=new V.EventHandler;this.objectUnderMouseCursorChanged=new V.EventHandler;this.modifierKeys=0;this.LineThicknessForEditing=2;this.layoutEditingEnabled=!0;this.container=t,this._textMeasurer=new tt,this._svgCreator=new Mt(t),this._svgCreator.getSmoothedPolylineRadius=()=>this.smoothedPolylineCircleRadius,t.addEventListener("pointerdown",e=>{this.layoutEditor.viewerMouseDown(this,e)&&this.panZoom.pause()}),t.addEventListener("pointermove",e=>{this.processMouseMove(e),this.layoutEditingEnabled&&this.layoutEditor.viewerMouseMove(this,e)}),t.addEventListener("pointerup",e=>{!this.layoutEditingEnabled||(this.layoutEditor.viewerMouseUp(this,e),this.panZoom&&this.panZoom.resume())}),this.layoutEditor=new te(this)}addKeyDownListener(t){this.keyDownListener=t}*entitiesIter(){for(let t of this.graph.nodesBreadthFirst)yield Ie(t);for(let t of this.graph.deepEdges)yield Ie(t),t.label&&(yield Ie(t.label))}get smoothedPolylineRadiusWithNoScale(){return this.Dpi*.05}getInterpolationSlack(){return this.mouseHitDistance}get Dpi(){return 96*window.devicePixelRatio}getHitSlack(){return this.Dpi*this.mouseHitDistance/this.CurrentScale}getSvgString(){return this._svgCreator.getSvgString()}getJSONString(){return this.graph==null?"no graph":JSON.stringify(Ar(this.graph),null,2)}processMouseMove(t){if(this.mousePosition=new V.Point(t.clientX,t.clientY),!(this==null||this._svgCreator==null)&&!!this.layoutEditingEnabled&&!(this.layoutEditor.dragging&&this.insertingEdge==!1)){if(this.insertingNode){this._svgCreator.positionNodeInsertionCircle(this.ScreenToSourceP(this.mousePosition.x,this.mousePosition.y));return}this.insertingEdge&&this._svgCreator.positionEdgeInsertionElement(this.ScreenToSourceP(this.mousePosition.x,this.mousePosition.y),this.layoutEditor.hasEdgeInsertionPort),this.setObjectUnderCursorFromEvent(t)}}setObjectUnderCursorFromEvent(t){this._objectTree==null&&(this._objectTree=(0,V.buildRTreeWithInterpolatedEdges)(this.graph,this.getHitSlack()));let e=Array.from((0,V.getGeomIntersectedObjects)(this._objectTree,this.getHitSlack(),this.screenToSource(t)));if(e.length==0){this.objectUnderMouseCursor=null;return}u();let i=e[0];i instanceof V.GeomObject&&(this.objectUnderMouseCursor=i.entity.getAttr(V.AttributeRegistry.ViewerIndex));function u(){e.sort((a,l)=>{let h=a instanceof V.GeomGraph?3:a instanceof V.GeomLabel?2:a instanceof V.GeomNode?1:0,f=l instanceof V.GeomGraph?3:l instanceof V.GeomLabel?2:l instanceof V.GeomNode?1:0;if(h!=f)return h-f;if(h==2)return 0;return p(l)-p(a);function p(w){let C=0,x=w.entity.parent;for(;x;)C++,x=x.parent;return C}})}}get insertionMode(){return this._insertionMode}set insertionMode(t){if(t!=this.insertionMode){switch(t){case 0:this._svgCreator.stopNodeInsertion(),this._svgCreator.stopEdgeInsertion();break;case 1:this._svgCreator.prepareToNodeInsertion(this.ScreenToSourceP(this.mousePosition.x,this.mousePosition.y));break;case 2:this._svgCreator.prepareToEdgeInsertion(this.ScreenToSourceP(this.mousePosition.x,this.mousePosition.y),this.layoutEditor.hasEdgeInsertionPort);break;default:throw new Error("not implemented")}this._insertionMode=t}}createUndoPoint(){this.layoutEditor.createUndoPoint()}selectedEntities(){let t=Array.from(this.layoutEditor.dragGroup);return this.objectUnderMouseCursor&&t.push(this.objectUnderMouseCursor),this.layoutEditor.edgeWithSmoothedPolylineExposed&&t.push(this.layoutEditor.edgeWithSmoothedPolylineExposed),t}createIViewerNodeNPA(t,e,i){throw new Error("Method not implemented.")}createIViewerNodeN(t,e){return this.graph.getAttr(V.AttributeRegistry.DrawingObjectIndex).createNodeGeometry(t,e),this._svgCreator.drawNode(t),Ie(t)}undo(){this.layoutEditor.undo()}redo(){this.layoutEditor.redo()}setGraph(t,e=this._layoutOptions){if(this._graph===t)this.setOptions(e);else{this._graph=t,this._layoutOptions=e,this._textMeasurer.setOptions(e.label||{});let i=ye.getDrawingObj(t)||new ye(t);this.needCreateGeometry?i.createGeometry(this._textMeasurer.measure):i.measureLabelSizes(this._textMeasurer.measure),this.needCalculateLayout&&yr(t,this._layoutOptions,!0),this._update()}this.needCalculateLayout=this.needCreateGeometry=!0}setOptions(t){let e=this._layoutOptions.label,i=t.label,u=!br(e,i);if(this._layoutOptions=t,!this._graph)return;let a=ye.getDrawingObj(this._graph);u&&(this._textMeasurer.setOptions(t.label||{}),a.createGeometry(this._textMeasurer.measure));let l=u;yr(this._graph,this._layoutOptions,l),this._update()}_update(){!this._graph||(this._objectTree=null,this._svgCreator.setGraph(this._graph),this.panZoom&&this.panZoom.dispose(),this.panZoom=(0,Pu.default)(this._svgCreator.superTransGroup,{onTouch:()=>!1}),this.panZoom.showRectangle(this._svgCreator.getShowRect()),this.layoutEditor.viewerGraphChanged(),this.graph.deepEdgesCount>2e3&&this.graph.nodeCountDeep>1e3&&(this.layoutEditingEnabled=!1))}screenToSource(t){return this.ScreenToSourceP(t.clientX,t.clientY)}ScreenToSourceP(t,e){return this._svgCreator.getTransform().inverse().multiplyPoint(new V.Point(t,e))}get CurrentScale(){return this._svgCreator.getScale()}get objectUnderMouseCursor(){return this._objectUnderMouse}set objectUnderMouseCursor(t){this._objectUnderMouse!==t&&(this._objectUnderMouse=t)}invalidate(t){this._objectTree=null,this.graph!==t.entity&&Gu(t.entity)?t.entity.getAttr(V.AttributeRegistry.ViewerIndex).svgData.remove():this.graph==t.entity?this.panZoom.showRectangle(this._svgCreator.getShowRect()):this._svgCreator.invalidate(t)}invalidateAll(){}get entities(){return this.entitiesIter()}get DpiX(){return this.Dpi}get DpiY(){return this.Dpi}get insertingNode(){return this.insertionMode==1}get insertingEdge(){return this.insertionMode==2}PopupMenus(t){throw new Error("Method not implemented.")}get smoothedPolylineCircleRadius(){return this.smoothedPolylineRadiusWithNoScale/this.CurrentScale}addEdge(t,e){this._objectTree=null,e&&this.layoutEditor.registerAdd(t.entity)}createEdgeWithGivenGeometry(t){return this._svgCreator.drawEdge(t),Ie(t)}addNode(t,e){this._objectTree=null,e&&this.layoutEditor.registerAdd(t.entity)}remove(t,e){let i=t.entity;this._objectTree=null,e&&this.layoutEditor.registerDelete(i),this.objectUnderMouseCursor===t&&(this.objectUnderMouseCursor=null),t.svgData.remove(),this.layoutEditor.forget(t),i instanceof V.Graph?this.removeSubgraph(i):this.removeForNonSubgraph(i,e)}removeForNonSubgraph(t,e){if(t instanceof V.Node){if(e)for(let u of t.edges)this.layoutEditor.registerDelete(u),u.label&&this.layoutEditor.registerDelete(u.label);t.parent.removeNode(t);for(let u of t.edges)xu(u)}else if(t instanceof V.Edge)t.remove(),e&&t.label&&this.layoutEditor.registerDelete(t.label),xu(t);else if(t instanceof V.Label){let i=t.parent;i.label=null}}removeSubgraph(t){let e=Array.from(t.allElements());for(let i of e)Ie(i).svgData.remove();t.removeSubgraph();for(let i of e)Ie(i).svgData.remove(),i instanceof V.Edge&&i.label&&Ie(i.label).svgData.remove()}RouteEdge(t){throw new Error("Method not implemented.")}SetSourcePortForEdgeRouting(t){this.sourcePortLocatiton=t}setTargetPortForEdgeRouting(t){this.targetPortLocatiton=t}RemoveSourcePortEdgeRouting(){}RemoveTargetPortEdgeRouting(){}drawRubberEdge(t){this._svgCreator.drawRubberEdge(t)}stopDrawingRubberEdge(){this._svgCreator.removeRubberEdge()}get graph(){return this._graph}get Transform(){return this._svgCreator.getTransform()}};function xu(n){n.remove(),Ie(n).svgData.remove(),n.label&&Ie(n.label).svgData.remove()}function Gu(n){if(n instanceof V.Edge)return n.source!==n.target?!n.source.outEdges.has(n)||!n.target.inEdges.has(n)?!0:t(n.source)||t(n.target):!n.source.selfEdges.has(n)||t(n.source);if(n instanceof V.Node)return t(n);if(n instanceof V.Label)return n.parent==null?!0:Gu(n.parent);return!1;function t(e){let i=e.parent;for(;i;){if(i.findNode(e.id)!==e)return!0;e=i,i=i.parent}return!1}}globalThis.msagl=globalThis.msagl||{};Object.assign(globalThis.msagl,Ci);})();
/*!
   Copyright 2019 Ron Buckton

   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
*/
/*!
   Copyright 2021 Ron Buckton

   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
*/
/*!
   Copyright 2022 Ron Buckton

   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.

   THIRD PARTY LICENSE NOTICE:

   xxHash Library
   Copyright (c) 2012-2021 Yann Collet
   All rights reserved.

   BSD 2-Clause License (https://www.opensource.org/licenses/bsd-license.php)

   Redistribution and use in source and binary forms, with or without modification,
   are permitted provided that the following conditions are met:

   * Redistributions of source code must retain the above copyright notice, this
     list of conditions and the following disclaimer.

   * Redistributions in binary form must reproduce the above copyright notice, this
     list of conditions and the following disclaimer in the documentation and/or
     other materials provided with the distribution.

   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
   ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
   WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
   DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR
   ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
   (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
   LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
   ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
   (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
   SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/
/*!
   Copyright 2022 Ron Buckton

   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
*/
/*! The following comments were added due to code inlined from "@esfx/internal-binarysearch": */
